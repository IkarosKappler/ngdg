(()=>{"use strict";var e,t={29:(e,t)=>{var r,n,i,o,a,s,c,l,h,u,d,p,v,f,m,x,y,g,w,_,I,P,E,M,V,b,G,F,S,T,L;Object.defineProperty(t,"__esModule",{value:!0}),t.earcut=void 0,t.earcut=(r=function(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1},n=function(e,t,r,n,i){var o,a;if(i===L(e,t,r,n)>0)for(o=t;o<r;o+=n)a=S(o,e[o],e[o+1],a);else for(o=r-n;o>=t;o-=n)a=S(o,e[o],e[o+1],a);return a&&I(a,a.next)&&(T(a),a=a.next),a},i=function(e,t){if(!e)return e;t||(t=e);var r=e,n=!1;do{if(n=!1,r.steiner||!I(r,r.next)&&0!==_(r.prev,r,r.next))r=r.next;else{if(T(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t},o=function(e,t,r,n,h,u,d){if(e){!d&&u&&f(e,n,h,u);for(var p,v,m=e;e.prev!==e.next;)if(p=e.prev,v=e.next,u?s(e,n,h,u):a(e))t.push(p.i/r),t.push(e.i/r),t.push(v.i/r),T(e),e=v.next,m=v.next;else if((e=v)===m){d?1===d?(e=c(i(e),t,r),o(e,t,r,n,h,u,2)):2===d&&l(e,t,r,n,h,u):o(i(e),t,r,n,h,u,1);break}}},a=function(e){var t=e.prev,r=e,n=e.next;if(_(t,r,n)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(g(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&_(i.prev,i,i.next)>=0)return!1;i=i.next}return!0},s=function(e,t,r,n){var i=e.prev,o=e,a=e.next;if(_(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,c=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,h=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,u=x(s,c,t,r,n),d=x(l,h,t,r,n),p=e.prevZ,v=e.nextZ;p&&p.z>=u&&v&&v.z<=d;){if(p!==e.prev&&p!==e.next&&g(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&_(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,v!==e.prev&&v!==e.next&&g(i.x,i.y,o.x,o.y,a.x,a.y,v.x,v.y)&&_(v.prev,v,v.next)>=0)return!1;v=v.nextZ}for(;p&&p.z>=u;){if(p!==e.prev&&p!==e.next&&g(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&_(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;v&&v.z<=d;){if(v!==e.prev&&v!==e.next&&g(i.x,i.y,o.x,o.y,a.x,a.y,v.x,v.y)&&_(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0},c=function(e,t,r){var n=e;do{var o=n.prev,a=n.next.next;!I(o,a)&&P(o,n,n.next,a)&&b(o,a)&&b(a,o)&&(t.push(o.i/r),t.push(n.i/r),t.push(a.i/r),T(n),T(n.next),n=e=a),n=n.next}while(n!==e);return i(n)},l=function(e,t,r,n,a,s){var c=e;do{for(var l=c.next.next;l!==c.prev;){if(c.i!==l.i&&w(c,l)){var h=F(c,l);return c=i(c,c.next),h=i(h,h.next),o(c,t,r,n,a,s),void o(h,t,r,n,a,s)}l=l.next}c=c.next}while(c!==e)},h=function(e,t,r,o){var a,s,c,l,h=[],p=t.length;for(a=0;a<p;a++)s=t[a]*o,c=a<p-1?t[a+1]*o:e.length,(l=n(e,s,c,o,!1))===l.next&&(l.steiner=!0),h.push(y(l));for(h.sort(u),a=0;a<h.length;a++)d(h[a],r),r=i(r,r.next);return r},u=function(e,t){return e.x-t.x},d=function(e,t){var r=p(e,t);if(!r)return t;var n=F(r,e),o=i(r,r.next);return i(n,n.next),t===r?o:t},p=function(e,t){var r,n=t,i=e.x,o=e.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>a){if(a=s,s===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(i===a)return r;var c,l=r,h=r.x,u=r.y,d=1/0;n=r;do{i>=n.x&&n.x>=h&&i!==n.x&&g(o<u?i:a,o,h,u,o<u?a:i,o,n.x,n.y)&&(c=Math.abs(o-n.y)/(i-n.x),b(n,e)&&(c<d||c===d&&(n.x>r.x||n.x===r.x&&v(r,n)))&&(r=n,d=c)),n=n.next}while(n!==l);return r},v=function(e,t){return _(e.prev,e,t.prev)<0&&_(t.next,e,e.next)<0},f=function(e,t,r,n){var i=e;do{null===i.z&&(i.z=x(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,m(i)},m=function(e){var t,r,n,i,o,a,s,c,l=1;do{for(r=e,e=null,o=null,a=0;r;){for(a++,n=r,s=0,t=0;t<l&&(s++,n=n.nextZ);t++);for(c=l;s>0||c>0&&n;)0!==s&&(0===c||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,c--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,l*=2}while(a>1);return e},x=function(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1},y=function(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r},g=function(e,t,r,n,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(n-s)-(r-a)*(t-s)>=0&&(r-a)*(o-s)-(i-a)*(n-s)>=0},w=function(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!V(e,t)&&(b(e,t)&&b(t,e)&&G(e,t)&&0!=(0!=_(e.prev,e,t.prev)||_(e,t.prev,t))||I(e,t)&&_(e.prev,e,e.next)>0&&_(t.prev,t,t.next)>0)},_=function(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)},I=function(e,t){return e.x===t.x&&e.y===t.y},P=function(e,t,r,n){var i=M(_(e,t,r)),o=M(_(e,t,n)),a=M(_(r,n,e)),s=M(_(r,n,t));return i!==o&&a!==s||!(0!==i||!E(e,r,t))||!(0!==o||!E(e,n,t))||!(0!==a||!E(r,e,n))||!(0!==s||!E(r,t,n))},E=function(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)},M=function(e){return e>0?1:e<0?-1:0},V=function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&P(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1},b=function(e,t){return _(e.prev,e,e.next)<0?_(e,t,e.next)>=0&&_(e,e.prev,t)>=0:_(e,t,e.prev)<0||_(e,e.next,t)<0},G=function(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n},F=function(e,t){var n=new r(e.i,e.x,e.y),i=new r(t.i,t.x,t.y),o=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=o,o.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i},S=function(e,t,n,i){var o=new r(e,t,n);return i?(o.next=i.next,o.prev=i,i.next.prev=o,i.next=o):(o.prev=o,o.next=o),o},T=function(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)},L=function(e,t,r,n){for(var i=0,o=t,a=r-n;o<r;o+=n)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i},function(e,t,r){void 0===r&&(r=2),r=r||2;var i,a,s,c,l,u,d,p=t&&t.length>0,v=p?t[0]*r:e.length,f=n(e,0,v,r,!0),m=[];if(!f||f.next===f.prev)return m;if(p&&(f=h(e,t,f,r)),e.length>80*r){i=s=e[0],a=c=e[1];for(var x=r;x<v;x+=r)(l=e[x])<i&&(i=l),(u=e[x+1])<a&&(a=u),l>s&&(s=l),u>c&&(c=u);d=0!==(d=Math.max(s-i,c-a))?1/d:0}return o(f,m,r,i,a,d),m})},481:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BumpMapper=void 0;var n=r(212),i=r(224),o=r(787);t.BumpMapper={applyBumpmap:function(e,t,r,a,s){var c=(0,i.computeVertexNormals)(e,t),l=new n.Geometry;l.vertices=c.map((function(e){var t=e.end.clone();return o.GeometryGenerationHelpers.normalizeVectorXYZ(e.start,t,s.bumpmapStrength),t}));var h=new n.Points(l,new n.PointsMaterial({size:1.4,color:65535})),u=null;if(console.log("options.useBumpmap",s.useBumpmap,"bumpmap",r),s.useBumpmap&&r){for(var d=0;d<e.vertexMatrix.length;d++)for(var p=0;p<e.vertexMatrix[d].length;p++){var v=e.vertexMatrix[d][p],f=e.vertices[v],m=1-d/(e.vertexMatrix.length-1),x=p/(e.vertexMatrix[d].length-1),y=r.getHeightAt(x,m),g=l.vertices[v];f.lerp(g,y)}(t=(new n.BufferGeometry).fromGeometry(e)).computeVertexNormals(),u=new n.Mesh(t,a)}return{dildoMesh:u,dildoNormalsMesh:h}}}},615:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DildoGeneration=void 0;var n=r(212),i=r(718),o=r(938),a=r(498),s=r(787),c=r(752),l=r(41),h=r(541),u=r(507),d=r(481),p=function(){function e(e,t){this.canvas=document.getElementById(e),this.parent=this.canvas.parentElement,this.scene=new n.Scene,this.camera=new n.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e4),this.camera.position.z=500;this.ambientLightA=new n.AmbientLight(4473924),this.ambientLightA.position.set(350,0,-350).multiplyScalar(50),this.scene.add(this.ambientLightA),this.ambientLightB=new n.PointLight(16777215,5,3500,.5),this.ambientLightB.position.set(-350,0,350).multiplyScalar(10),this.scene.add(this.ambientLightB),this.directionalLightA=new n.DirectionalLight(16777215,2),this.directionalLightA.position.set(350,350,350).multiplyScalar(10),this.scene.add(this.directionalLightA),this.scene.add(this.directionalLightA.target),this.directionalLightB=new n.DirectionalLight(16777215,2),this.directionalLightB.position.set(-350,-350,-50).multiplyScalar(10),this.scene.add(this.directionalLightB),this.renderer=new n.WebGLRenderer({canvas:this.canvas,preserveDrawingBuffer:!0,antialias:!0}),this.controls=t.makeOrbitControls(this.camera,this.renderer.domElement),this.controls.update(),this.geometries=[],this.partialResults={};var r=this;window.addEventListener("resize",(function(){r.resizeCanvas()})),this.resizeCanvas();var i=function(){requestAnimationFrame(i),r.controls.update(),r.renderer.render(r.scene,r.camera)};i()}return e.prototype.resizeCanvas=function(){var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;this.canvas.width=e,this.canvas.height=t,this.canvas.style.width=e+"px",this.canvas.style.height=t+"px",this.canvas.setAttribute("width",e+"px"),this.canvas.setAttribute("height",t+"px"),this.renderer.setSize(e,t),this.camera.setViewOffset(e,t,e/4,t/20,e,t)},e.prototype.rebuild=function(e){this.removeCachedGeometries();var t=e.outline.getBounds().width,r=s.GeometryGenerationHelpers.mkCircularPolygon(t,e.shapeSegmentCount,e.baseShapeExcentricity),c=void 0!==e.useBumpmap&&e.useBumpmap&&e.bumpmap?e.bumpmap:null,l=new o.DildoGeometry(Object.assign({baseShape:r},e)),h=e.useTextureImage&&void 0!==e.textureImagePath,u=void 0!==e.textureImagePath?e.textureImagePath:null,p="double"===e.renderFaces?n.DoubleSide:"back"===e.renderFaces?n.BackSide:n.FrontSide,v=void 0!==e.wireframe&&e.wireframe,f=a.DildoMaterials.createMainMaterial(h,v,u,p),m=(new n.BufferGeometry).fromGeometry(l);m.computeVertexNormals();var x=new n.Mesh(m,f);this.camera.lookAt(new n.Vector3(20,0,150)),this.camera.lookAt(x.position);var y=new n.Geometry;if(l.spineVertices.forEach((function(e){y.vertices.push(e.clone())})),e.addSpine&&s.GeometryGenerationHelpers.addSpine(this,y),e.showBasicPerpendiculars&&s.GeometryGenerationHelpers.addPerpendicularPaths(this,l),e.useBumpmap){var g=d.BumpMapper.applyBumpmap(l,m,c,f,e),w=g.dildoMesh,_=g.dildoNormalsMesh;x=w,e.showBumpmapTargets&&(_.position.y=-100,this.addMesh(_))}if(e.performSlice)this.__performPlaneSlice(x,l,v,h,u,e);else if(x.position.y=-100,x.userData.isExportable=!0,this.addMesh(x),e.showNormals){var I=new i.VertexNormalsHelper(x,e.normalsLength,65280);this.scene.add(I),this.geometries.push(I)}},e.prototype.__performPlaneSlice=function(e,t,r,o,d,p){var v=new n.Plane(new n.Vector3(0,0,1),0),f=s.GeometryGenerationHelpers.makeSlice(t,v),m=new n.Plane(new n.Vector3(0,0,-1),0),x=s.GeometryGenerationHelpers.makeSlice(t,m),y=a.DildoMaterials.createSliceMaterial(o,r,d),g=new n.PlaneGeometry(300,500),w=new n.Mesh(g,new n.MeshBasicMaterial({color:4737096,transparent:!0,opacity:.35,side:n.DoubleSide}));w.rotation.x=Math.PI/5,this.partialResults[u.KEY_SPLIT_PANE_MESH]=w,p.showSplitPane&&(w.position.z=.5,this.addMesh(w));for(var _=s.GeometryGenerationHelpers.makeAndAddPlaneIntersection(this,e,t,w,g,p),I=(new l.PathFinder).findAllPathsOnMesh(f,_),P=0;P<I.length;P++){var E=new n.Geometry;E.vertices=I[P].map((function(e){return f.vertices[e]}));var M=new n.Line(E,new n.LineBasicMaterial({color:(0,h.randomWebColor)(F,"Mixed")}));M.position.y=-100,this.addMesh(M)}if(p.addPrecalculatedShapeOutlines){var V=new n.Geometry;V.vertices=_;var b=new n.Line(V,new n.LineBasicMaterial({color:8913064}));b.position.y=-100,b.position.z=-50,this.addMesh(b)}for(var G=[],F=0;F<I.length;F++){var S=s.GeometryGenerationHelpers.makePlaneTriangulation(this,f,I[F],p);G.push(S),p.closeCutAreas&&((0,c.mergeGeometries)(f,S,u.EPS),(0,c.mergeGeometries)(x,S,u.EPS))}if(p.showLeftSplit){f.uvsNeedUpdate=!0,f.buffersNeedUpdate=!0,f.computeVertexNormals();var T=new n.Mesh(f,y);if(T.position.y=-100,T.position.z=-50,T.userData.isExportable=!0,this.addMesh(T),p.showNormals){var L=new i.VertexNormalsHelper(T,p.normalsLength,65280);this.scene.add(L),this.geometries.push(L)}}if(p.showRightSplit){x.uvsNeedUpdate=!0,x.buffersNeedUpdate=!0,x.computeVertexNormals();var N=new n.Mesh(x,y);if(N.position.y=-100,N.position.z=50,N.userData.isExportable=!0,this.addMesh(N),p.showNormals){L=new i.VertexNormalsHelper(N,p.normalsLength,65280);this.scene.add(L),this.geometries.push(L)}}this.partialResults[u.KEY_LEFT_SLICE_PLANE]=v,this.partialResults[u.KEY_LEFT_SLICE_GEOMETRY]=f,this.partialResults[u.KEY_RIGHT_SLICE_PLANE]=m,this.partialResults[u.KEY_RIGHT_SLICE_GEOMETRY]=x,this.partialResults[u.KEY_PLANE_INTERSECTION_POINTS]=_,this.partialResults[u.KEY_SPLIT_TRIANGULATION_GEOMETRIES]=G},e.prototype.addMesh=function(e){e.rotation.x=Math.PI,this.scene.add(e),this.geometries.push(e)},e.prototype.removeCachedGeometries=function(){for(var e=0;e<this.geometries.length;e++){var t=this.geometries[e];this.scene.remove(t),t instanceof n.Mesh&&(t.geometry.dispose(),t.material.dispose())}this.geometries=[]},e.prototype.generateSTL=function(e,t){var r=[];for(var n in this.geometries)if(!0===this.geometries[n].userData.isExportable){var i=t.parse(this.geometries[n]);r.push(i)}"function"==typeof e.onComplete?e.onComplete(r.join("\n\n")):console.warn("STL data was generated but no 'onComplete' callback was defined.")},e}();t.DildoGeneration=p},938:function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.DildoGeometry=t.DildoBaseClass=void 0;var o=r(739),a=r(212),s=r(787),c=r(29),l=r(280),h=Math.PI/180,u=function(){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]]};t.DildoBaseClass=u;var d=function(e){function t(t){var r=e.call(this)||this;return a.Geometry.call(r),r.vertexMatrix=[],r.topIndex=-1,r.bottomIndex=-1,r.spineVertices=[],r.outerPerpLines=[],r.innerPerpLines=[],r.flatSidePolygon=null,r.leftFlatIndices=[],r.rightFlatIndices=[],r.leftFlatTriangleIndices=[],r.rightFlatTriangleIndices=[],r.flatSideBounds=null,r.hollowBottomEdgeVertIndices=[],r.hollowBottomTriagles=[],r.dildoNormals=[],r._buildVertices(t),r._buildFaces(t),r._buildUVMapping(t),t.useBumpmap&&(t.bumpmapTexture?r.__applyBumpmap(t.bumpmapTexture):console.warn("Cannot apply bumpmap as desired, because the bumpmap texture is null or undefined.")),r}return i(t,e),t.prototype.__buildSlice=function(e,t,r,n,i,o,s,c,l){for(var h=(t.max.x-r.x)/t.width,u=0;u<e.vertices.length;u++){var d=e.vertices[u];if(o){var p=new a.Vector3(d.x*h,0,d.y*h);v(p,l,0,0),this._bendVertex(p,s,c,i),p.y+=t.max.y}else{p=new a.Vector3(d.x*h,r.y,d.y*h);v(p,l,0,0)}this.vertexMatrix[n][u]=this.vertices.length,this.vertices.push(p),0==n&&(0==u&&p.y,u+1==e.vertices.length&&p.y)}},t.prototype.__buildSpine=function(e,t,r,n,i,o,s){var c=(t.max.x-r.x)/t.width,l=e.clone();if(i){var h=new a.Vector3(l.x*c,0,l.y*c);this._bendVertex(h,o,s,n),h.y+=t.max.y}else h=new a.Vector3(l.x*c,r.y,l.y*c);this.spineVertices.push(h)},t.prototype.__buildPerps=function(e,t,r,n,i,o,c,l,h,u){for(var d=(t.max.x-r.x)/t.width,v=[0,Math.floor(e.vertices.length/2)],f=0;f<v.length;f++){var m=v[f],x=e.vertices[m];if(o){var y=new a.Vector3(x.x*d,0,x.y*d);this._bendVertex(y,c,l,i),y.y+=t.max.y}else y=new a.Vector3(x.x*d,r.y,x.y*d);var g=new a.Vector3(r.x-n.x,r.y-n.y,0);if(0==m)var w=new a.Vector3(y.x-n.x,y.y+n.y,0);else w=new a.Vector3(y.x+n.x,y.y+n.y,0);p(w,c*i,y.x,y.y);var _=y.clone();_.x+=g.x,_.y+=g.y,_.z+=g.z,h&&s.GeometryGenerationHelpers.normalizeVectorXY(y,w,u),0==m?this.outerPerpLines.push(new a.Line3(y,w)):this.innerPerpLines.push(new a.Line3(y,w))}},t.prototype.__makeFlatSideVertices=function(e){this.flatSidePolygon=new o.Polygon(this.getPerpendicularPathVertices(!0),!1),this.flatSideBounds=this.flatSidePolygon.getBounds();for(var t=0;t<this.flatSidePolygon.vertices.length;t++){var r=this.vertices.length;this.leftFlatIndices.push(r),this.vertices.push(new a.Vector3(this.flatSidePolygon.vertices[t].x,this.flatSidePolygon.vertices[t].y,e)),0!==t&&t+1!==this.flatSidePolygon.vertices.length&&t+2!==this.flatSidePolygon.vertices.length||this.hollowBottomEdgeVertIndices.push(r)}for(t=0;t<this.flatSidePolygon.vertices.length;t++){r=this.vertices.length;this.rightFlatIndices.push(r),this.vertices.push(new a.Vector3(this.flatSidePolygon.vertices[t].x,this.flatSidePolygon.vertices[t].y,-e)),0!==t&&t+1!==this.flatSidePolygon.vertices.length&&t+2!==this.flatSidePolygon.vertices.length||this.hollowBottomEdgeVertIndices.push(r)}},t.prototype.__makeFlatSideFaces=function(){for(var e=this,t=this.leftFlatIndices.map((function(t){return e.vertices[t]})),r=s.GeometryGenerationHelpers.flattenVert2dArray(t),n=(0,c.earcut)(r),i=0;i+2<n.length;i+=3){var o=n[i],a=n[i+1],l=n[i+2];s.GeometryGenerationHelpers.makeFace3(this,this.leftFlatIndices[o],this.leftFlatIndices[a],this.leftFlatIndices[l]),this.leftFlatTriangleIndices.push([this.leftFlatIndices[o],this.leftFlatIndices[a],this.leftFlatIndices[l]])}for(i=0;i+2<n.length;i+=3){o=n[i],a=n[i+1],l=n[i+2];s.GeometryGenerationHelpers.makeFace3(this,this.rightFlatIndices[o],this.rightFlatIndices[l],this.rightFlatIndices[a]),this.rightFlatTriangleIndices.push([this.rightFlatIndices[o],this.rightFlatIndices[a],this.rightFlatIndices[l]])}},t.prototype.getPerpendicularPathVertices=function(e,t){for(var r=[],n=0;n<this.innerPerpLines.length;n++)r.push(t?this.innerPerpLines[n].start:this.innerPerpLines[n].end);for(n=this.outerPerpLines.length-1;n>=0;n--)r.push(t?this.outerPerpLines[n].start:this.outerPerpLines[n].end);return e&&r.push(this.vertices[this.bottomIndex]),r},t.prototype.getPerpendicularHullLines=function(){for(var e=[],t=0;t<this.innerPerpLines.length;t++)e.push(this.innerPerpLines[t]);for(t=this.outerPerpLines.length-1;t>=0;t--)e.push(this.outerPerpLines[t]);return e},t.prototype._getTopVertex=function(e,t,r,n){if(t){var i=new a.Vector3(0,0,0);return this._bendVertex(i,r,n,1),i.y+=e.max.y,i}return new a.Vector3(0,e.min.y,0)},t.prototype._getBottomVertex=function(e){return new a.Vector3(0,e.max.y,0)},t.prototype._bendVertex=function(e,t,r,n){var i=new a.Vector3(0,0,1),o=t*n;e.x-=r,e.applyAxisAngle(i,o),e.x+=r},t.prototype.applyBumpMap=function(e){for(var t=0;t<this.vertexMatrix.length;t++)for(var r=0;r<this.vertexMatrix[t].length;r++){var n=this.vertexMatrix[t][r];this.vertices[n]}},t.prototype._buildFaces=function(e){var t=e.baseShape,r=e.outlineSegmentCount,n=Boolean(e.closeTop),i=Boolean(e.closeBottom),o=Boolean(e.makeHollow),a=t.vertices.length;this.faceVertexUvs[0]=[];for(var s=0;s<r;s++)for(var c=0;c<a;c++)s>0&&c>0&&(this.addFace4ByIndices(s,c-1,s-1,c,o),c+1==t.vertices.length&&this.addFace4ByIndices(s,c,s-1,0,o));o&&(this.__makeFlatSideFaces(),this.__makeBackFrontFaces()),i&&(o?this._buildHollowBottomFaces():this._buildEndFaces(this.bottomIndex,0,a,!1)),n&&this._buildEndFaces(this.topIndex,this.vertexMatrix.length-1,a,o)},t.prototype._buildHollowBottomFaces=function(){for(var e,t=this,r=this.hollowBottomEdgeVertIndices.map((function(e){return t.vertices[e]})),n=function(e){for(var n,i=0,o=Number.MAX_VALUE,a=0;a<r.length;a++){var s=t.hollowBottomEdgeVertIndices[a];(n=r[a].distanceTo(e))<o&&(i=s,o=n)}return i},i=this.vertexMatrix[0].length,o=n(this.vertices[i-1]),s=0;s<i;s++){var c=n(this.vertices[this.vertexMatrix[0][s]]);e=[o,this.vertexMatrix[0][0==s?i-1:s-1],this.vertexMatrix[0][s]],this.faces.push(new a.Face3(e[0],e[1],e[2])),this.hollowBottomTriagles.push(e),o!==c&&(e=[c,o,this.vertexMatrix[0][s]],this.faces.push(new a.Face3(e[0],e[1],e[2])),this.hollowBottomTriagles.push(e)),o=c}},t.prototype._buildEndFaces=function(e,t,r,n){for(var i=1;i<r;i++)s.GeometryGenerationHelpers.makeFace3(this,this.vertexMatrix[t][i-1],e,this.vertexMatrix[t][i],n),i+1==r&&s.GeometryGenerationHelpers.makeFace3(this,this.vertexMatrix[t][i],e,this.vertexMatrix[t][0],n)},t.prototype.__makeBackFrontFaces=function(){for(var e=1;e+1<this.flatSidePolygon.vertices.length;e++)s.GeometryGenerationHelpers.makeFace4(this,this.leftFlatIndices[e],this.leftFlatIndices[e-1],this.rightFlatIndices[e],this.rightFlatIndices[e-1])},t.prototype._buildUVMapping=function(e){for(var t=e.baseShape,r=e.outlineSegmentCount,n=t.vertices.length,i=Boolean(e.closeTop),o=Boolean(e.closeBottom),c=Boolean(e.makeHollow),h=1;h<r;h++)for(var u=1;u<t.vertices.length;u++)s.GeometryGenerationHelpers.addCylindricUV4(this,h,u-1,h-1,u,r,n,c),u+1==t.vertices.length&&s.GeometryGenerationHelpers.addCylindricUV4(this,h,u-1,h-1,u,r,n,c);if(c){for(u=0;u<this.leftFlatTriangleIndices.length;u++){var d=this.leftFlatTriangleIndices[u][0],p=this.leftFlatTriangleIndices[u][1],v=this.leftFlatTriangleIndices[u][2];l.UVHelpers.makeFlatTriangleUVs(this,this.flatSideBounds,d,p,v)}for(u=0;u<this.rightFlatTriangleIndices.length;u++){var m=this.rightFlatTriangleIndices[u][0],x=this.rightFlatTriangleIndices[u][2],y=this.rightFlatTriangleIndices[u][1];l.UVHelpers.makeFlatTriangleUVs(this,this.flatSideBounds,m,x,y)}for(u=1;u+1<this.flatSidePolygon.vertices.length;u++){var g=(u-1)/(this.flatSidePolygon.vertices.length-1),w=u/(this.flatSidePolygon.vertices.length-1);this.faceVertexUvs[0].push([new a.Vector2(0,w),new a.Vector2(0,g),new a.Vector2(1,w)]),this.faceVertexUvs[0].push([new a.Vector2(0,g),new a.Vector2(1,g),new a.Vector2(1,w)])}}if(o)if(c)f(this,this.hollowBottomEdgeVertIndices,this.hollowBottomTriagles);else for(u=1;u<n;u++)s.GeometryGenerationHelpers.addPyramidalBaseUV3(this,u-1,n),u+1==n&&s.GeometryGenerationHelpers.addPyramidalBaseUV3(this,u-1,n);if(i){var _=r-1;for(u=1;u<n;u++)s.GeometryGenerationHelpers.addPyramidalBaseUV3(this,u-1,n),u+1==n&&s.GeometryGenerationHelpers.addPyramidalBaseUV3(this,_,n)}this.uvsNeedUpdate=!0},t.prototype.addFace4ByIndices=function(e,t,r,n,i){s.GeometryGenerationHelpers.makeFace4(this,this.vertexMatrix[e][t],this.vertexMatrix[r][t],this.vertexMatrix[e][n],this.vertexMatrix[r][n],i)},t.prototype._buildVertices=function(e){for(var t=e.baseShape,r=e.outline,n=e.outlineSegmentCount,i=Boolean(e.makeHollow),o=e.bendAngle/180*Math.PI,a=e.hollowStrengthX,s=e.twistAngle*h,c=Boolean(e.normalizePerpendiculars),l=void 0!==e.normalsLength?e.normalsLength:10,u=r.getBounds(),d=u.height,p=t.getBounds(),v=p.getCenter(),f=d/o,m=e.isBending&&!isNaN(f)&&f!==Number.POSITIVE_INFINITY&&f!==Number.NEGATIVE_INFINITY&&Math.abs(o)>.01,x=0;x<n;x++){var y=Math.min(1,Math.max(0,x/(n-1)));this.vertexMatrix[x]=[];var g=r.getPointAt(y),w=r.getPerpendicularAt(y),_=(u.max.y-g.y)/d,I=x/(n-1);this.__buildSlice(t,u,g,x,_,m,o,f,s*I),this.__buildSpine(v,u,g,_,m,o,f),this.__buildPerps(t,u,g,w,_,m,o,f,c,l)}var P=this._getTopVertex(u,m,o,f),E=this._getBottomVertex(u);this.topIndex=this.vertices.length,this.vertices.push(P),this.bottomIndex=this.vertices.length,this.vertices.push(E),i&&this.__makeFlatSideVertices(Math.max(p.width,p.height)/2+a)},t.prototype.__applyBumpmap=function(e){for(var t=0;t<this.vertexMatrix.length;t++)for(var r=0;r<this.vertexMatrix[t].length;r++);},t}(u);t.DildoGeometry=d;var p=function(e,t,r,n){var i=new a.Vector3(0,0,1);return e.x-=r,e.y-=n,e.applyAxisAngle(i,t),e.x+=r,e.y+=n,e},v=function(e,t,r,n){var i=new a.Vector3(0,1,0);return e.x-=r,e.z-=n,e.applyAxisAngle(i,t),e.x+=r,e.z+=n,e},f=function(e,t,r){for(var n=o.Bounds.computeFromVertices(t.map((function(t){return new o.Vertex(e.vertices[t].x,e.vertices[t].z)}))),i=function(e){return new a.Vector2((e.x-n.min.x)/n.width,(e.z-n.min.y)/n.height)},s=0;s<r.length;s++){var c=e.vertices[r[s][0]],l=e.vertices[r[s][1]],h=e.vertices[r[s][2]];e.faceVertexUvs[0].push([i(c),i(l),i(h)])}}},498:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DildoMaterials=void 0;var n,i,o=r(212);t.DildoMaterials=(n=new Map,i={createMainMaterial:function(e,t,r,n){return e?new o.MeshLambertMaterial({color:16777215,wireframe:t,depthTest:!0,opacity:1,side:n,visible:!0,emissive:0,reflectivity:1,refractionRatio:.89,map:i.loadTextureImage(r)}):new o.MeshPhongMaterial({color:3684607,wireframe:t,flatShading:!1,depthTest:!0,opacity:1,side:n,visible:!0,emissive:0,reflectivity:1,refractionRatio:.89,map:null})},createSliceMaterial:function(e,t,r){return t?new o.MeshBasicMaterial({wireframe:!0}):new o.MeshLambertMaterial({color:e?8947848:169363624,wireframe:!1,depthTest:!0,opacity:1,side:o.DoubleSide,visible:!0,emissive:0,reflectivity:1,refractionRatio:.89,map:e?i.loadTextureImage(r):null,vertexColors:!1})},loadTextureImage:function(e){var t=n.get(e);return t||(t=(new o.TextureLoader).load(e),n.set(e,t)),t}})},787:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GeometryGenerationHelpers=void 0;var n=r(212),i=r(29),o=r(739),a=r(585),s=r(834),c=r(659),l=r(280),h=r(507);t.GeometryGenerationHelpers={makeFace3:function(e,t,r,i,o){o?e.faces.push(new n.Face3(i,r,t)):e.faces.push(new n.Face3(t,r,i))},makeFace4:function(e,r,n,i,o,a){a?(t.GeometryGenerationHelpers.makeFace3(e,r,i,n,!1),t.GeometryGenerationHelpers.makeFace3(e,i,o,n,!1)):(t.GeometryGenerationHelpers.makeFace3(e,r,n,i,!1),t.GeometryGenerationHelpers.makeFace3(e,n,o,i,!1))},addCylindricUV4:function(e,t,r,i,o,a,s,c){c?(e.faceVertexUvs[0].push([new n.Vector2(t/a,r/s),new n.Vector2(t/a,o/s),new n.Vector2(i/a,r/s)]),e.faceVertexUvs[0].push([new n.Vector2(t/a,o/s),new n.Vector2(i/a,o/s),new n.Vector2(i/a,r/s)])):(e.faceVertexUvs[0].push([new n.Vector2(t/a,r/s),new n.Vector2(i/a,r/s),new n.Vector2(t/a,o/s)]),e.faceVertexUvs[0].push([new n.Vector2(i/a,r/s),new n.Vector2(i/a,o/s),new n.Vector2(t/a,o/s)]))},addPyramidalBaseUV3:function(e,t,r){var i=1-2*Math.abs(.5-t/r),o=1-2*Math.abs(.5-(t+1)/r);e.faceVertexUvs[0].push([new n.Vector2(i,0),new n.Vector2(.5,1),new n.Vector2(o,0)])},flattenVert2dArray:function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].x,e[r].y);return t},mkCircularPolygon:function(e,t,r){void 0===r&&(r=1);for(var n,i=[],a=0;a<t;a++)n=2*Math.PI*(a/t),i.push(new o.Vertex(Math.cos(n)*e*r,Math.sin(n)*e));return new o.Polygon(i,!1)},makeSlice:function(e,t){var r=(0,a.sliceGeometry)(e,t,!1);return r.mergeVertices(),r.computeFaceNormals(),r},makeAndAddPlaneIntersection:function(e,r,o,a,l,h){var u=(new s.PlaneMeshIntersection).getIntersectionPoints(r,o,a,l),d=(0,c.clearDuplicateVertices3)(u,1e-6),p=new n.Geometry;p.vertices=d;var v=new n.PointsMaterial({size:1.4,color:65535}),f=new n.Points(p,v);h.showSplitShape&&(f.position.y=-100,f.position.z=-50,e.addMesh(f));for(var m=t.GeometryGenerationHelpers.flattenVert2dArray(d),x=(0,i.earcut)(m),y=new n.Geometry,g=0;g<d.length;g++)y.vertices.push(d[g].clone());for(g=0;g+2<x.length;g+=3){var w=x[g],_=x[g+1],I=x[g+2];t.GeometryGenerationHelpers.makeFace3(y,w,_,I)}if(h.addRawIntersectionTriangleMesh){var P=new n.Mesh(y,new n.LineBasicMaterial({color:16746496}));P.position.y=-100,P.position.z=-50,e.addMesh(P)}return h.addPrecalculatedMassiveFaces&&t.GeometryGenerationHelpers.makeAndAddMassivePlaneIntersection(e,o),h.addPrecalculatedHollowFaces&&t.GeometryGenerationHelpers.makeAndAddHollowPlaneIntersection(e,o),d},makeAndAddMassivePlaneIntersection:function(e,r){var o=r.getPerpendicularPathVertices(!0,!0),a=new n.Geometry;a.vertices=o;for(var s=new n.MeshBasicMaterial({wireframe:!1,color:16711680,opacity:.5,side:n.DoubleSide,transparent:!0}),c=t.GeometryGenerationHelpers.flattenVert2dArray(o),l=(0,i.earcut)(c),h=0;h+2<l.length;h+=3){var u=l[h],d=l[h+1],p=l[h+2];t.GeometryGenerationHelpers.makeFace3(a,u,d,p)}var v=new n.Mesh(a,s);v.position.y=-100,v.position.z=50,v.userData.isExportable=!1,e.addMesh(v)},makeAndAddHollowPlaneIntersection:function(e,t){for(var r=new n.Geometry,i=t.getPerpendicularHullLines(),o=0;o<i.length;o++){var a=i[o].start,s=i[o].end;r.vertices.push(a,s);var c=r.vertices.length;o>0&&(r.faces.push(new n.Face3(c-4,c-2,c-3)),r.faces.push(new n.Face3(c-3,c-2,c-1)))}var l=new n.MeshBasicMaterial({wireframe:!1,color:16711680,opacity:.5,side:n.DoubleSide,transparent:!0}),h=new n.Mesh(r,l);h.position.y=-100,h.position.z=-50,h.userData.isExportable=!1,e.addMesh(h)},addSpine:function(e,t){var r=new n.LineSegments(t,new n.LineBasicMaterial({color:16746496}));r.position.y=-100,e.addMesh(r)},addPerpendicularPaths:function(e,r){t.GeometryGenerationHelpers.addPerpendicularPath(e,r.outerPerpLines,16711680),t.GeometryGenerationHelpers.addPerpendicularPath(e,r.innerPerpLines,65280)},addPerpendicularPath:function(e,t,r){var i=new n.Geometry;t.forEach((function(e){i.vertices.push(e.start.clone()),i.vertices.push(e.end.clone())}));var o=new n.LineSegments(i,new n.LineBasicMaterial({color:r}));o.position.y=-100,e.addMesh(o)},makePlaneTriangulation:function(e,t,r,a){var s=r.reduce((function(e,r){var n=t.vertices[r];return e.push(n.x,n.y),e}),[]),c=(0,i.earcut)(s),u=new n.Geometry;u.vertices=r.map((function(e){return t.vertices[e]}));for(var d=o.Bounds.computeFromVertices(u.vertices.map((function(e){return new o.Vertex(e.x,e.y)}))),p=0;p<c.length;p+=3){var v=c[p],f=c[p+1],m=c[p+2];u.faces.push(new n.Face3(v,f,m)),l.UVHelpers.makeFlatTriangleUVs(u,d,v,f,m)}u.uvsNeedUpdate=!0,u.buffersNeedUpdate=!0,u.computeVertexNormals();var x=new n.Mesh(u,new n.MeshBasicMaterial({color:18687,transparent:!0,opacity:.55,side:n.DoubleSide}));return x.position.y=-100,x.userData.isExportable=!1,e.partialResults[h.KEY_PLANE_INTERSECTION_TRIANGULATION]=u,a.showSplitShapeTriangulation&&e.addMesh(x),u},normalizeVectorXY:function(e,t,r){var n=t.x-e.x,i=t.y-e.y,o=r/Math.sqrt(n*n+i*i);t.x=e.x+n*o,t.y=e.y+i*o},normalizeVectorXYZ:function(e,t,r){var n=t.x-e.x,i=t.y-e.y,o=t.z-e.z,a=r/Math.sqrt(n*n+i*i+o*o);t.x=e.x+n*a,t.y=e.y+i*a,t.z=e.z+o*a},removeAllChildNodes:function(e){for(;e.lastChild;)e.removeChild(e.lastChild)},clamp:function(e,t,r){return Math.max(Math.min(e,r),t)}}},479:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ImageStore=void 0,t.ImageStore=(r=new Map,{getImage:function(e,t){var n=r.get(e);return n||(n=document.createElement("img"),r.set(e,n),n.onload=function(){t(n)},n.setAttribute("src",e)),n},isImageLoaded:function(e){return e.complete&&0!==e.naturalHeight&&void 0!==e.naturalHeight}})},41:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PathFinder=void 0;var n=r(507),i=function(){function e(e){this.visitedVertices=new Set,this.unvisitedVertIndices=new Set,this.numVisitedVertices=0,this.epsilon=void 0!==e&&e>=0?e:n.EPS}return e.prototype.findAllPathsOnMesh=function(e,t){var r=[];this.visitedVertices.clear(),this.unvisitedVertIndices.clear();var n=a(e,t,this.epsilon),i=n.length;for(this.unvisitedVertIndices=new Set(n.map((function(e,t){return t})));this.numVisitedVertices<i;){var o=this.unvisitedVertIndices.values().next().value,s=this.findUnvisitedPaths(e,n,o);r.push(s)}return this.combineAdjacentPaths(r,e)},e.prototype.findUnvisitedPaths=function(e,t,r){var n,i=[r];for(this.visitedVertices.add(r),this.unvisitedVertIndices.delete(r),this.numVisitedVertices++;-1!==(n=this.findAdjacentFace(e,t,r));)i.push(n),this.visitedVertices.add(n),this.unvisitedVertIndices.delete(n),this.numVisitedVertices++,r=n;return i},e.prototype.findAdjacentFace=function(e,t,r){for(var n=e.faces.length,i=0;i<n;i++)if(o(e,i,r))for(var a=0;a<t.length;a++){var s=t[a];if(s!==r&&!this.isVisited(s)){if(!this.isVisited(s)&&o(e,i,s))return s;if(o(e,i,s))return s}}return-1},e.prototype.isVisited=function(e){return this.visitedVertices.has(e)},e.prototype.combineAdjacentPaths=function(e,t){for(var r=[],n=new Set(e.map((function(e,t){return t})));n.size>0;){var i=n.values().next().value;n.delete(i);var o=e[i],a=null;do{!(a=s(e,o[o.length-1],n,t))&&o.length>1&&(o=o.reverse(),a=s(e,o[o.length-1],n,t)),a&&(o=o.concat(a))}while(a);r.push(o)}return r},e}();t.PathFinder=i;var o=function(e,t,r){var n=e.faces[t];return n.a===r||n.b===r||n.c===r},a=function(e,t,r){for(var n=[],i=0;i<t.length;i++){for(var o=t[i],a=-1,s=r,c=0;c<e.vertices.length;c++){var l=e.vertices[c].distanceTo(o);l<=s&&(-1===a||-1!==a&&e.vertices[a].distanceTo(o)>=l&&a>c)&&(a=c,s=l)}-1===a?console.warn("PathFinder.mapVerticesToGeometryIndices could not find a matching geometry vertex for path point "+i+". The final result might be locally broken."):n.push(a)}return n},s=function(e,t,r,n){for(var i=0;i<n.faces.length;i++)if(o(n,i,t))for(var a=0;a<e.length;a++)if(r.has(a)){var s=e[a];if(o(n,i,s[0]))return r.delete(a),s;if(o(n,i,s[s.length-1]))return r.delete(a),s.reverse()}}},834:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PlaneMeshIntersection=void 0;var n=r(212),i=function(){var e=this;this.getIntersectionPoints=function(t,r,i,o){e.pointsOfIntersection=[];var a=new n.Plane;i.localToWorld(e.planePointA.copy(o.vertices[o.faces[0].a])),i.localToWorld(e.planePointB.copy(o.vertices[o.faces[0].b])),i.localToWorld(e.planePointC.copy(o.vertices[o.faces[0].c])),a.setFromCoplanarPoints(e.planePointA,e.planePointB,e.planePointC);var s=e;return r.faces.forEach((function(e){t.localToWorld(s.a.copy(r.vertices[e.a])),t.localToWorld(s.b.copy(r.vertices[e.b])),t.localToWorld(s.c.copy(r.vertices[e.c])),s.lineAB=new n.Line3(s.a,s.b),s.lineBC=new n.Line3(s.b,s.c),s.lineCA=new n.Line3(s.c,s.a),s.__setPointOfIntersection(s.lineAB,a),s.__setPointOfIntersection(s.lineBC,a),s.__setPointOfIntersection(s.lineCA,a)})),e.pointsOfIntersection},this.__setPointOfIntersection=function(e,t){var r=t.intersectLine(e,this.pointOfIntersection);r&&this.pointsOfIntersection.push(r.clone())},this.pointsOfIntersection=[],this.a=new n.Vector3,this.b=new n.Vector3,this.c=new n.Vector3,this.planePointA=new n.Vector3,this.planePointB=new n.Vector3,this.planePointC=new n.Vector3,this.lineAB=new n.Line3,this.lineBC=new n.Line3,this.lineCA=new n.Line3,this.pointOfIntersection=new n.Vector3};t.PlaneMeshIntersection=i},280:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UVHelpers=void 0;var n=r(212);t.UVHelpers={makeFlatTriangleUVs:function(e,t,r,i,o){var a=e.vertices[r],s=e.vertices[i],c=e.vertices[o],l=function(e){return new n.Vector2((e.x-t.min.x)/t.width,(e.y-t.min.y)/t.height)};e.faceVertexUvs[0].push([l(a),l(s),l(c)])}}},659:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clearDuplicateVertices3=void 0;t.clearDuplicateVertices3=function(e,t){void 0===t&&(t=1e-6);for(var n=[],i=0;i<e.length;i++)r(e,e[i],i+1,t)||n.push(e[i]);return n};var r=function(e,t,r,n){for(var i=r;i<e.length;i++)if(o=e[i],a=t,s=n,o.distanceTo(a)<s)return!0;var o,a,s;return!1}},224:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.computeVertexNormals=void 0;var n=r(212);t.computeVertexNormals=function(e,t){for(var r=t.getAttribute("normal"),a=Array(e.faces.length),s=0;s<e.faces.length;s++){var c=e.faces[s],l=new n.Vector3(r.array[9*s+0],r.array[9*s+1],r.array[9*s+2]),h=new n.Vector3(r.array[9*s+3],r.array[9*s+4],r.array[9*s+5]),u=new n.Vector3(r.array[9*s+6],r.array[9*s+7],r.array[9*s+8]);i(a,c.a,l),i(a,c.b,h),i(a,c.c,u)}for(var d=new Array(e.vertices.length),p=0;p<e.vertices.length;p++){var v=o(a[p]);v.add(e.vertices[p]),d[p]=new n.Line3(e.vertices[p],v)}return d};var i=function(e,t,r){(t>=e.length||void 0===e[t])&&(e[t]=[]),e[t].push(r)},o=function(e){var t=new n.Vector3(0,0,0);return e&&(e.forEach((function(e){t.add(e)})),t.divideScalar(e.length)),t}},507:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KEY_SPLIT_TRIANGULATION_GEOMETRIES=t.KEY_PLANE_INTERSECTION_TRIANGULATION=t.KEY_PLANE_INTERSECTION_POINTS=t.KEY_SPLIT_PANE_MESH=t.KEY_RIGHT_SLICE_PLANE=t.KEY_LEFT_SLICE_PLANE=t.KEY_RIGHT_SLICE_GEOMETRY=t.KEY_LEFT_SLICE_GEOMETRY=t.DEG_TO_RAD=t.EPS=void 0,t.EPS=1e-6,t.DEG_TO_RAD=Math.PI/180,t.KEY_LEFT_SLICE_GEOMETRY="KEY_LEFT_SLICE_GEOMETRY",t.KEY_RIGHT_SLICE_GEOMETRY="KEY_RIGHT_SLICE_GEOMETRY",t.KEY_LEFT_SLICE_PLANE="KEY_LEFT_SLICE_PLANE",t.KEY_RIGHT_SLICE_PLANE="KEY_RIGHT_SLICE_PLANE",t.KEY_SPLIT_PANE_MESH="KEY_SPLIT_PANE_MESH",t.KEY_PLANE_INTERSECTION_POINTS="KEY_PLANE_INTERSECTION_POINTS",t.KEY_PLANE_INTERSECTION_TRIANGULATION="KEY_PLANE_INTERSECTION_TRIANGULATION",t.KEY_SPLIT_TRIANGULATION_GEOMETRIES="KEY_SPLIT_TRIANGULATION_GEOMETRIES"},555:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_BEZIER_JSON=void 0,t.DEFAULT_BEZIER_JSON='\n  [\n    {\n       "startPoint":[\n          -122,\n          77.80736634304651\n       ],\n       "endPoint":[\n          -65.59022229786551,\n          21.46778533702511\n       ],\n       "startControlPoint":[\n          -121.62058129515852,\n          25.08908859418696\n       ],\n       "endControlPoint":[\n          -79.33419353770395,\n          48.71529293460728\n       ]\n    },\n    {\n       "startPoint":[\n          -65.59022229786551,\n          21.46778533702511\n       ],\n       "endPoint":[\n          -65.66917273472913,\n          -149.23537680826058\n       ],\n       "startControlPoint":[\n          -52.448492057756646,\n          -4.585775770903305\n       ],\n       "endControlPoint":[\n          -86.1618869001374,\n          -62.11613821618976\n       ]\n    },\n    {\n       "startPoint":[\n          -65.66917273472913,\n          -149.23537680826058\n       ],\n       "endPoint":[\n          -61.86203591980055,\n          -243.8368165606738\n       ],\n       "startControlPoint":[\n          -53.701578771473564,\n          -200.1123697454778\n       ],\n       "endControlPoint":[\n          -69.80704300441666,\n          -205.36451303641783\n       ]\n    },\n    {\n       "startPoint":[\n          -61.86203591980055,\n          -243.8368165606738\n       ],\n       "endPoint":[\n          -21.108966092052256,\n          -323\n       ],\n       "startControlPoint":[\n          -54.08681426887413,\n          -281.486963896856\n       ],\n       "endControlPoint":[\n          -53.05779349623559,\n          -323\n       ]\n    }\n ]\n  '},333:(e,t,r)=>{globalThis.ngdg=r(619)._},557:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.locateVertexInArray=void 0;t.locateVertexInArray=function(e,t,r){for(var n=Number.POSITIVE_INFINITY,i=-1,o=0;o<e.length;o++){var a=e[o].distanceTo(t);-1===i&&a<n&&a<r&&(i=o,n=a)}return i}},752:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mergeAndMapVertices=t.mergeGeometries=void 0;var n=r(212),i=r(557);t.mergeGeometries=function(e,r,i){void 0===i&&(i=1e-6);for(var o=(0,t.mergeAndMapVertices)(e,r,i),a=0;a<r.faces.length;a++){var s=r.faces[a],c=o[s.a],l=o[s.b],h=o[s.c];if(e.faces.push(new n.Face3(c,l,h)),r.faceVertexUvs.length>0&&a<r.faceVertexUvs[0].length){var u=r.faceVertexUvs[0][a];e.faceVertexUvs[0].push([u[0].clone(),u[1].clone(),u[2].clone()])}else e.faceVertexUvs[0].push([new n.Vector2(0,0),new n.Vector2(0,1),new n.Vector2(1,.5)])}};t.mergeAndMapVertices=function(e,t,r){for(var n=[],o=0;o<t.vertices.length;o++){var a=t.vertices[o],s=(0,i.locateVertexInArray)(e.vertices,a,r);-1===s?(n.push(e.vertices.length),e.vertices.push(a.clone())):n.push(s)}return n}},619:(e,t,r)=>{t._=void 0;var n=r(555),i=r(479),o=r(615);t._={DEFAULT_BEZIER_JSON:n.DEFAULT_BEZIER_JSON,DildoGeneration:o.DildoGeneration,ImageStore:i.ImageStore}},541:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.randomWebColor=void 0;var n=r(19),i=r(372),o=r(246);t.randomWebColor=function(e,t){if(void 0===e){var r=Math.max(void 0!==n.WebColorsMalachite?n.WebColorsMalachite.length:0,void 0!==i.WebColorsContrast?i.WebColorsContrast.length:0,void 0!==o.WebColors?o.WebColors.length:0);e=Math.round(Math.random()*r)}switch(t){case"Malachite":if(void 0!==n.WebColorsMalachite)return n.WebColorsMalachite[e%n.WebColorsMalachite.length].cssRGB();console.warn("You decided to use the 'WebColorsMalachite' color palette but it is not installed. Falling back.");case"Mixed":if(void 0!==i.WebColorsContrast)return i.WebColorsContrast[e%i.WebColorsContrast.length].cssRGB();console.warn("You decided to use the 'WebColorsContrast' color palette but it is not installed. Falling back.");default:return o.WebColors[e%o.WebColors.length].cssRGB()}}},799:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GeometryBuilder=void 0;var n=r(826),i=r(902),o=r(416),a=function(){function e(e,t,r){this.sourceGeometry=e,this.targetGeometry=t,this.slicePlane=r,this.addedVertices=[],this.addedIntersections=[],this.newEdges=[[]]}return e.prototype.startFace=function(e){this.sourceFaceIndex=e,this.sourceFace=this.sourceGeometry.faces[e],this.sourceFaceUvs=this.sourceGeometry.faceVertexUvs[0][e],this.faceIndices=[],this.faceNormals=[],this.faceUvs=[]},e.prototype.endFace=function(){var e=this.faceIndices.map((function(e,t){return t}));this.addFace(e)},e.prototype.closeHoles=function(){var e=this;this.newEdges[0].length&&(0,i.facesFromEdges)(this.newEdges).forEach((function(t){e.faceNormal(t).dot(e.slicePlane.normal)>.5&&t.reverse(),e.startFace(),e.faceIndices=t,e.endFace()}),this)},e.prototype.addVertex=function(e){this.addUv(e),this.addNormal(e);var t,r=this.sourceFace[e];if(this.addedVertices.hasOwnProperty(r))t=this.addedVertices[r];else{var n=this.sourceGeometry.vertices[r];this.targetGeometry.vertices.push(n),t=this.targetGeometry.vertices.length-1,this.addedVertices[r]=t}this.faceIndices.push(t)},e.prototype.addIntersection=function(e,t,r,n){var i=Math.abs(r)/(Math.abs(r)+Math.abs(n));this.addIntersectionUv(e,t,i),this.addIntersectionNormal(e,t,i);var o,a=this.sourceFace[e],s=this.sourceFace[t],c=this.intersectionId(a,s);if(this.addedIntersections.hasOwnProperty(c))o=this.addedIntersections[c];else{var l=this.sourceGeometry.vertices[a],h=this.sourceGeometry.vertices[s],u=l.clone().lerp(h,i);this.targetGeometry.vertices.push(u),o=this.targetGeometry.vertices.length-1,this.addedIntersections[c]=o}this.faceIndices.push(o),this.updateNewEdges(o)},e.prototype.addUv=function(e){if(this.sourceFaceUvs){var t=this.keyIndex(e),r=this.sourceFaceUvs[t];this.faceUvs.push(r)}},e.prototype.addIntersectionUv=function(e,t,r){if(this.sourceFaceUvs){var n=this.keyIndex(e),i=this.keyIndex(t),o=this.sourceFaceUvs[n],a=this.sourceFaceUvs[i],s=o.clone().lerp(a,r);this.faceUvs.push(s)}},e.prototype.addNormal=function(e){if(this.sourceFace.vertexNormals.length){var t=this.keyIndex(e),r=this.sourceFace.vertexNormals[t];this.faceNormals.push(r)}},e.prototype.addIntersectionNormal=function(e,t,r){if(this.sourceFace.vertexNormals.length){var n=this.keyIndex(e),i=this.keyIndex(t),o=this.sourceFace.vertexNormals[n],a=this.sourceFace.vertexNormals[i],s=o.clone().lerp(a,r).normalize();this.faceNormals.push(s)}},e.prototype.addFace=function(e){var t=this;if(3!==e.length){for(var r=[],n=0;n<e.length;n++)for(var i=n+1;i<e.length;i++){var o=Math.abs(n-i);o>1&&o<e.length-1&&r.push([e[n],e[i]])}r.sort(function(e,r){return t.faceEdgeLength(e[0],e[1])-t.faceEdgeLength(r[0],r[1])}.bind(this));var a=e.indexOf(r[0][0]),s=(e=e.slice(a).concat(e.slice(0,a))).indexOf(r[0][1]),c=e.slice(0,s+1),l=e.slice(s).concat(e.slice(0,1));this.addFace(c),this.addFace(l)}else this.addFacePart(e[0],e[1],e[2])},e.prototype.addFacePart=function(e,t,r){var i=null;this.faceNormals.length&&(i=[this.faceNormals[e],this.faceNormals[t],this.faceNormals[r]]);var o=new n.Face3(this.faceIndices[e],this.faceIndices[t],this.faceIndices[r],i);this.targetGeometry.faces.push(o),this.sourceFaceUvs&&this.targetGeometry.faceVertexUvs[0].push([this.faceUvs[e],this.faceUvs[t],this.faceUvs[r]])},e.prototype.faceEdgeLength=function(e,t){var r=this.faceIndices[e],n=this.faceIndices[t],i=this.targetGeometry.vertices[r],o=this.targetGeometry.vertices[n];return i.distanceToSquared(o)},e.prototype.intersectionId=function(e,t){return[e,t].sort().join(",")},e.prototype.keyIndex=function(e){return o.FACE_KEYS.indexOf(e)},e.prototype.updateNewEdges=function(e){var t=this.newEdges.length-1,r=this.newEdges[t];r.length<2?r.push(e):this.newEdges.push([e])},e.prototype.faceNormal=function(e){var t=this,r=e.map(function(e){return t.targetGeometry.vertices[e]}.bind(this)),n=r[0].clone().sub(r[1]),i=r[0].clone().sub(r[2]);return n.cross(i).normalize()},e}();t.GeometryBuilder=a},416:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FACE_KEYS=t.ON=t.BACK=t.FRONT=void 0,t.FRONT="front",t.BACK="back",t.ON="on",t.FACE_KEYS=["a","b","c"]},902:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.facesFromEdges=void 0;function r(e){return e.forEach((function(t,r){e.forEach((function(r,a){var s=function(e,t){if(e===t)return!1;if(n(e)===i(t))return e.unshift.apply(e,t),!0;if(n(e)===n(t))return o(t),e.unshift.apply(e,t),!0;if(i(e)===n(t))return e.push.apply(e,t),!0;if(i(e)===i(t))return o(t),e.push.apply(e,t),!0;return!1}(t,r);if(s)return delete e[a],!0}))})),!1}function n(e){return e[0][0]}function i(e){return e[e.length-1][1]}function o(e){e.reverse(),e.forEach((function(e){e.reverse()}))}function a(e){return n(e)===i(e)?1:0}t.facesFromEdges=function(e){var t=function(e){var t=!0,n=e.map((function(e){return[e]}));for(;t;)t=r(n);return n=n.filter((function(e){return e.length}))}(e).filter(a);return t.map((function(e){return e.map((function(e){return e[0]}))}))}},585:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sliceGeometry=void 0;var n=r(826),i=r(799),o=r(416);t.sliceGeometry=function(e,t,r){var c=new n.Geometry,l=new i.GeometryBuilder(e,c,t),h=[],u=[];return e.vertices.forEach((function(e){var r=s(e,t),n=a(r);h.push(r),u.push(n)})),e.faces.forEach((function(e,t){var r=o.FACE_KEYS.map((function(t){return u[e[t]]}));if(-1!==r.indexOf(o.FRONT)||-1===r.indexOf(o.BACK)){l.startFace(t);var n=o.FACE_KEYS[o.FACE_KEYS.length-1],i=e[n],a=h[i],s=u[i];o.FACE_KEYS.map((function(t){var r=e[t],c=h[r],d=u[r];d===o.FRONT&&(s===o.BACK?(l.addIntersection(n,t,a,c),l.addVertex(t)):l.addVertex(t)),d===o.ON&&l.addVertex(t),d===o.BACK&&s===o.FRONT&&l.addIntersection(n,t,a,c),n=t,i=r,s=d,a=c})),l.endFace()}})),r&&l.closeHoles(),c};var a=function(e){return e<0?o.BACK:e>0?o.FRONT:o.ON},s=function(e,t){return t.distanceToPoint(e)}}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var o=r[e]={exports:{}};return t[e].call(o.exports,o,o.exports,n),o.exports}n.m=t,e=[],n.O=(t,r,i,o)=>{if(!r){var a=1/0;for(h=0;h<e.length;h++){for(var[r,i,o]=e[h],s=!0,c=0;c<r.length;c++)(!1&o||a>=o)&&Object.keys(n.O).every((e=>n.O[e](r[c])))?r.splice(c--,1):(s=!1,o<a&&(a=o));if(s){e.splice(h--,1);var l=i();void 0!==l&&(t=l)}}return t}o=o||0;for(var h=e.length;h>0&&e[h-1][2]>o;h--)e[h]=e[h-1];e[h]=[r,i,o]},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={179:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var i,o,[a,s,c]=r,l=0;if(a.some((t=>0!==e[t]))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(c)var h=c(n)}for(t&&t(r);l<a.length;l++)o=a[l],n.o(e,o)&&e[o]&&e[o][0](),e[a[l]]=0;return n.O(h)},r=self.webpackChunkngdg=self.webpackChunkngdg||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var i=n.O(void 0,[736],(()=>n(333)));i=n.O(i)})();
//# sourceMappingURL=ngdg-main.min.js.map
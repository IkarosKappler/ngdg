(()=>{"use strict";var e,t={481:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BumpMapper=void 0;var i=r(232),n=r(224),s=r(787),a=r(686);t.BumpMapper={applyBumpmap:function(e,t,r,o,l){var c=(0,n.computeVertexNormals)(e,t),h=new a.Gmetry;h.vertices=c.map((function(e){var t=e.end.clone();return s.GeometryGenerationHelpers.normalizeVectorXYZ(e.start,t,l.bumpmapStrength),t}));var d=new i.Points(h.toBufferGeometry(),new i.PointsMaterial({size:1.4,color:65535})),u=null;if(console.log("options.useBumpmap",l.useBumpmap,"bumpmap",r),l.useBumpmap&&r){for(var p=0;p<e.vertexMatrix.length;p++)for(var v=0;v<e.vertexMatrix[p].length;v++){var f=e.vertexMatrix[p][v],m=e.vertices[f],g=1-p/(e.vertexMatrix.length-1),y=v/(e.vertexMatrix[p].length-1),_=r.getHeightAt(y,g),E=h.vertices[f];m.lerp(E,_)}(t=e.toBufferGeometry()).computeVertexNormals(),u=new i.Mesh(t,o)}return{dildoMesh:u,dildoNormalsMesh:d}}}},615:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DildoGeneration=void 0;var i=r(232),n=r(862),s=r(938),a=r(498),o=r(787),l=r(752),c=r(41),h=r(541),d=r(507),u=r(481),p=r(686),v=function(){function e(e,t){this.canvas=document.getElementById(e),this.parent=this.canvas.parentElement,this.scene=new i.Scene,this.camera=new i.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e4),this.camera.position.z=500;this.ambientLightA=new i.AmbientLight(4473924),this.ambientLightA.position.set(350,0,-350).multiplyScalar(50),this.scene.add(this.ambientLightA),this.ambientLightB=new i.PointLight(16777215,5,3500,.5),this.ambientLightB.position.set(-350,0,350).multiplyScalar(10),this.scene.add(this.ambientLightB),this.directionalLightA=new i.DirectionalLight(16777215,2),this.directionalLightA.position.set(350,350,350).multiplyScalar(10),this.scene.add(this.directionalLightA),this.scene.add(this.directionalLightA.target),this.directionalLightB=new i.DirectionalLight(16777215,2),this.directionalLightB.position.set(-350,-350,-50).multiplyScalar(10),this.scene.add(this.directionalLightB),this.renderer=new i.WebGLRenderer({canvas:this.canvas,preserveDrawingBuffer:!0,antialias:!0}),this.controls=t.makeOrbitControls(this.camera,this.renderer.domElement),this.controls.update(),this.geometries=[],this.partialResults={},this.splitResults={};var r=this;window.addEventListener("resize",(function(){r.resizeCanvas()})),this.resizeCanvas();var n=function(){requestAnimationFrame(n),r.controls.update(),r.renderer.render(r.scene,r.camera)};n()}return e.prototype.resizeCanvas=function(){var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;this.canvas.width=e,this.canvas.height=t,this.canvas.style.width=e+"px",this.canvas.style.height=t+"px",this.canvas.setAttribute("width",e+"px"),this.canvas.setAttribute("height",t+"px"),this.renderer.setSize(e,t),this.camera.setViewOffset(e,t,e/4,t/20,e,t)},e.prototype.rebuild=function(e){this.removeCachedGeometries(),this.clearResults();var t=e.outline.getBounds().width,r=o.GeometryGenerationHelpers.mkCircularPolygon(t,e.shapeSegmentCount,e.baseShapeExcentricity),l=void 0!==e.useBumpmap&&e.useBumpmap&&e.bumpmap?e.bumpmap:null,c=new s.DildoGeometry(Object.assign({baseShape:r},e)),h=e.useTextureImage&&void 0!==e.textureImagePath,v=void 0!==e.textureImagePath?e.textureImagePath:null,f="double"===e.renderFaces?i.DoubleSide:"back"===e.renderFaces?i.BackSide:i.FrontSide,m=void 0!==e.wireframe&&e.wireframe,g=a.DildoMaterials.createMainMaterial(h,m,v,f),y=c.toBufferGeometry();y.computeVertexNormals();var _=new i.Mesh(y,g);this.camera.lookAt(new i.Vector3(20,0,150)),this.camera.lookAt(_.position);var E=new p.Gmetry;if(c.spineVertices.forEach((function(e){E.vertices.push(e.clone())})),e.addSpine&&o.GeometryGenerationHelpers.addSpine(this,E),e.showBasicPerpendiculars&&o.GeometryGenerationHelpers.addPerpendicularPaths(this,c),e.useBumpmap){var I=u.BumpMapper.applyBumpmap(c,y,l,g,e),w=I.dildoMesh,x=I.dildoNormalsMesh;_=w,e.showBumpmapTargets&&(x.position.y=d.SPLIT_MESH_OFFSET.y,this.addMesh(x))}if(e.performSlice)this.__performPlaneSlice(_,c,m,h,v,e);else if(_.position.y=d.SPLIT_MESH_OFFSET.y,_.userData.isExportable=!0,this.addMesh(_),e.showNormals){var P=new n.VertexNormalsHelper(_,e.normalsLength,65280);this.scene.add(P),this.geometries.push(P)}},e.prototype.__performPlaneSlice=function(e,t,r,s,u,v){var f=new i.Plane(new i.Vector3(0,0,1),0),m=o.GeometryGenerationHelpers.makeSlice(t,f),g=new i.Plane(new i.Vector3(0,0,-1),0),y=o.GeometryGenerationHelpers.makeSlice(t,g),_=a.DildoMaterials.createSliceMaterial(s,r,u),E=new i.PlaneGeometry(300,500),I=new i.Mesh(E,new i.MeshBasicMaterial({color:4737096,transparent:!0,opacity:.35,side:i.DoubleSide}));I.rotation.x=Math.PI/5,this.partialResults[d.KEY_SPLIT_PANE_MESH]=I,v.showSplitPane&&(I.position.z=.5,this.addMesh(I));for(var w=o.GeometryGenerationHelpers.makeAndAddPlaneIntersection(this,e,t,I,E,v),x=(new c.PathFinder).findAllPathsOnMesh(m,w),P=0;P<x.length;P++){var S=new p.Gmetry;S.vertices=x[P].map((function(e){return m.vertices[e]}));var b=new i.Line(S.toBufferGeometry(),new i.LineBasicMaterial({color:(0,h.randomWebColor)(G,"Mixed")}));b.position.y=d.SPLIT_MESH_OFFSET.y,this.addMesh(b)}if(v.addPrecalculatedShapeOutlines){var M=new p.Gmetry;M.vertices=w;var T=new i.Line(M.toBufferGeometry(),new i.LineBasicMaterial({color:8913064}));T.position.y=d.SPLIT_MESH_OFFSET.y,T.position.z=d.SPLIT_MESH_OFFSET.z,this.addMesh(T)}for(var V=[],G=0;G<x.length;G++){var L=o.GeometryGenerationHelpers.makePlaneTriangulation(this,m,x[G],v);V.push(L),v.closeCutAreas&&((0,l.mergeGeometries)(m,L,d.EPS),(0,l.mergeGeometries)(y,L,d.EPS))}if(v.showLeftSplit){m.uvsNeedUpdate=!0,m.buffersNeedUpdate=!0,m.computeVertexNormals();var F=new i.Mesh(m.toBufferGeometry(),_);if(F.position.y=d.SPLIT_MESH_OFFSET.y,F.position.z=d.SPLIT_MESH_OFFSET.z,F.userData.isExportable=!0,this.addMesh(F),this.splitResults[d.KEY_SLICED_MESH_LEFT]=F,v.showNormals){var N=new n.VertexNormalsHelper(F,v.normalsLength,65280);this.scene.add(N),this.geometries.push(N)}}if(v.showRightSplit){y.uvsNeedUpdate=!0,y.buffersNeedUpdate=!0,y.computeVertexNormals();var A=new i.Mesh(y.toBufferGeometry(),_);if(A.position.y=d.SPLIT_MESH_OFFSET.y,A.position.z=-d.SPLIT_MESH_OFFSET.z,A.userData.isExportable=!0,this.addMesh(A),this.splitResults[d.KEY_SLICED_MESH_RIGHT]=A,v.showNormals){N=new n.VertexNormalsHelper(A,v.normalsLength,65280);this.scene.add(N),this.geometries.push(N)}}this.partialResults[d.KEY_LEFT_SLICE_PLANE]=f,this.partialResults[d.KEY_LEFT_SLICE_GEOMETRY]=m,this.partialResults[d.KEY_RIGHT_SLICE_PLANE]=g,this.partialResults[d.KEY_RIGHT_SLICE_GEOMETRY]=y,this.partialResults[d.KEY_PLANE_INTERSECTION_POINTS]=w,this.partialResults[d.KEY_SPLIT_TRIANGULATION_GEOMETRIES]=V},e.prototype.addMesh=function(e){e.rotation.x=Math.PI,this.scene.add(e),this.geometries.push(e)},e.prototype.removeCachedGeometries=function(){for(var e=0;e<this.geometries.length;e++){var t=this.geometries[e];this.scene.remove(t),t instanceof i.Mesh&&(t.geometry.dispose(),t.material.dispose())}this.geometries=[]},e.prototype.clearResults=function(){this.splitResults[d.KEY_SLICED_MESH_RIGHT]=null,this.splitResults[d.KEY_SLICED_MESH_LEFT]=null,this.partialResults[d.KEY_LEFT_SLICE_PLANE]=null,this.partialResults[d.KEY_LEFT_SLICE_GEOMETRY]=null,this.partialResults[d.KEY_RIGHT_SLICE_PLANE]=null,this.partialResults[d.KEY_RIGHT_SLICE_GEOMETRY]=null,this.partialResults[d.KEY_PLANE_INTERSECTION_POINTS]=null,this.partialResults[d.KEY_SPLIT_TRIANGULATION_GEOMETRIES]=null},e.prototype.generateSTL=function(e,t){var r=[];for(var i in this.geometries)if(!0===this.geometries[i].userData.isExportable){var n=t.parse(this.geometries[i]);r.push(n)}"function"==typeof e.onComplete?e.onComplete(r.join("\n\n")):console.warn("STL data was generated but no 'onComplete' callback was defined.")},e}();t.DildoGeneration=v},938:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.DildoGeometry=t.DildoBaseClass=void 0;var s=r(814),a=r(232),o=r(787),l=r(11),c=r(280),h=r(686),d=Math.PI/180,u=function(){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]]};t.DildoBaseClass=u;var p=function(e){function t(t){var r=e.call(this)||this;return h.Gmetry.call(r),r.vertexMatrix=[],r.topIndex=-1,r.bottomIndex=-1,r.spineVertices=[],r.outerPerpLines=[],r.innerPerpLines=[],r.flatSidePolygon=null,r.leftFlatIndices=[],r.rightFlatIndices=[],r.leftFlatTriangleIndices=[],r.rightFlatTriangleIndices=[],r.flatSideBounds=null,r.hollowBottomEdgeVertIndices=[],r.hollowBottomTriagles=[],r.dildoNormals=[],r._buildVertices(t),r._buildFaces(t),r._buildUVMapping(t),t.useBumpmap&&(t.bumpmapTexture?r.__applyBumpmap(t.bumpmapTexture):console.warn("Cannot apply bumpmap as desired, because the bumpmap texture is null or undefined.")),r}return n(t,e),t.prototype.__buildSlice=function(e,t,r,i,n,s,o,l,c){for(var h=(t.max.x-r.x)/t.width,d=0;d<e.vertices.length;d++){var u=e.vertices[d];if(s){var p=new a.Vector3(u.x*h,0,u.y*h);f(p,c,0,0),this._bendVertex(p,o,l,n),p.y+=t.max.y}else{p=new a.Vector3(u.x*h,r.y,u.y*h);f(p,c,0,0)}this.vertexMatrix[i][d]=this.vertices.length,this.vertices.push(p),0==i&&(0==d&&p.y,d+1==e.vertices.length&&p.y)}},t.prototype.__buildSpine=function(e,t,r,i,n,s,o){var l=(t.max.x-r.x)/t.width,c=e.clone();if(n){var h=new a.Vector3(c.x*l,0,c.y*l);this._bendVertex(h,s,o,i),h.y+=t.max.y}else h=new a.Vector3(c.x*l,r.y,c.y*l);this.spineVertices.push(h)},t.prototype.__buildPerps=function(e,t,r,i,n,s,l,c,h,d){for(var u=(t.max.x-r.x)/t.width,p=[0,Math.floor(e.vertices.length/2)],f=0;f<p.length;f++){var m=p[f],g=e.vertices[m];if(s){var y=new a.Vector3(g.x*u,0,g.y*u);this._bendVertex(y,l,c,n),y.y+=t.max.y}else y=new a.Vector3(g.x*u,r.y,g.y*u);var _=new a.Vector3(r.x-i.x,r.y-i.y,0);if(0==m)var E=new a.Vector3(y.x-i.x,y.y+i.y,0);else E=new a.Vector3(y.x+i.x,y.y+i.y,0);v(E,l*n,y.x,y.y);var I=y.clone();I.x+=_.x,I.y+=_.y,I.z+=_.z,h&&o.GeometryGenerationHelpers.normalizeVectorXY(y,E,d),0==m?this.outerPerpLines.push(new a.Line3(y,E)):this.innerPerpLines.push(new a.Line3(y,E))}},t.prototype.__makeFlatSideVertices=function(e){this.flatSidePolygon=new s.Polygon(this.getPerpendicularPathVertices(!0),!1),this.flatSideBounds=this.flatSidePolygon.getBounds();for(var t=0;t<this.flatSidePolygon.vertices.length;t++){var r=this.vertices.length;this.leftFlatIndices.push(r),this.vertices.push(new a.Vector3(this.flatSidePolygon.vertices[t].x,this.flatSidePolygon.vertices[t].y,e)),0!==t&&t+1!==this.flatSidePolygon.vertices.length&&t+2!==this.flatSidePolygon.vertices.length||this.hollowBottomEdgeVertIndices.push(r)}for(t=0;t<this.flatSidePolygon.vertices.length;t++){r=this.vertices.length;this.rightFlatIndices.push(r),this.vertices.push(new a.Vector3(this.flatSidePolygon.vertices[t].x,this.flatSidePolygon.vertices[t].y,-e)),0!==t&&t+1!==this.flatSidePolygon.vertices.length&&t+2!==this.flatSidePolygon.vertices.length||this.hollowBottomEdgeVertIndices.push(r)}},t.prototype.__makeFlatSideFaces=function(){for(var e=this,t=this.leftFlatIndices.map((function(t){return e.vertices[t]})),r=o.GeometryGenerationHelpers.flattenVert2dArray(t),i=(0,l.earcut)(r),n=0;n+2<i.length;n+=3){var s=i[n],a=i[n+1],c=i[n+2];o.GeometryGenerationHelpers.makeFace3(this,this.leftFlatIndices[s],this.leftFlatIndices[a],this.leftFlatIndices[c]),this.leftFlatTriangleIndices.push([this.leftFlatIndices[s],this.leftFlatIndices[a],this.leftFlatIndices[c]])}for(n=0;n+2<i.length;n+=3){s=i[n],a=i[n+1],c=i[n+2];o.GeometryGenerationHelpers.makeFace3(this,this.rightFlatIndices[s],this.rightFlatIndices[c],this.rightFlatIndices[a]),this.rightFlatTriangleIndices.push([this.rightFlatIndices[s],this.rightFlatIndices[a],this.rightFlatIndices[c]])}},t.prototype.getPerpendicularPathVertices=function(e,t){for(var r=[],i=0;i<this.innerPerpLines.length;i++)r.push(t?this.innerPerpLines[i].start:this.innerPerpLines[i].end);for(i=this.outerPerpLines.length-1;i>=0;i--)r.push(t?this.outerPerpLines[i].start:this.outerPerpLines[i].end);return e&&r.push(this.vertices[this.bottomIndex]),r},t.prototype.getPerpendicularHullLines=function(){for(var e=[],t=0;t<this.innerPerpLines.length;t++)e.push(this.innerPerpLines[t]);for(t=this.outerPerpLines.length-1;t>=0;t--)e.push(this.outerPerpLines[t]);return e},t.prototype._getTopVertex=function(e,t,r,i){if(t){var n=new a.Vector3(0,0,0);return this._bendVertex(n,r,i,1),n.y+=e.max.y,n}return new a.Vector3(0,e.min.y,0)},t.prototype._getBottomVertex=function(e){return new a.Vector3(0,e.max.y,0)},t.prototype._bendVertex=function(e,t,r,i){var n=new a.Vector3(0,0,1),s=t*i;e.x-=r,e.applyAxisAngle(n,s),e.x+=r},t.prototype.applyBumpMap=function(e){for(var t=0;t<this.vertexMatrix.length;t++)for(var r=0;r<this.vertexMatrix[t].length;r++){var i=this.vertexMatrix[t][r];this.vertices[i]}},t.prototype._buildFaces=function(e){var t=e.baseShape,r=e.outlineSegmentCount,i=Boolean(e.closeTop),n=Boolean(e.closeBottom),s=Boolean(e.makeHollow),a=t.vertices.length;this.faceVertexUvs[0]=[];for(var o=0;o<r;o++)for(var l=0;l<a;l++)o>0&&l>0&&(this.addFace4ByIndices(o,l-1,o-1,l,s),l+1==t.vertices.length&&this.addFace4ByIndices(o,l,o-1,0,s));s&&(this.__makeFlatSideFaces(),this.__makeBackFrontFaces()),n&&(s?this._buildHollowBottomFaces():this._buildEndFaces(this.bottomIndex,0,a,!1)),i&&this._buildEndFaces(this.topIndex,this.vertexMatrix.length-1,a,s)},t.prototype._buildHollowBottomFaces=function(){for(var e,t=this,r=this.hollowBottomEdgeVertIndices.map((function(e){return t.vertices[e]})),i=function(e){for(var i,n=0,s=Number.MAX_VALUE,a=0;a<r.length;a++){var o=t.hollowBottomEdgeVertIndices[a];(i=r[a].distanceTo(e))<s&&(n=o,s=i)}return n},n=this.vertexMatrix[0].length,s=i(this.vertices[n-1]),a=0;a<n;a++){var o=i(this.vertices[this.vertexMatrix[0][a]]);e=[s,this.vertexMatrix[0][0==a?n-1:a-1],this.vertexMatrix[0][a]],this.faces.push(new h.Face3(e[0],e[1],e[2])),this.hollowBottomTriagles.push(e),s!==o&&(e=[o,s,this.vertexMatrix[0][a]],this.faces.push(new h.Face3(e[0],e[1],e[2])),this.hollowBottomTriagles.push(e)),s=o}},t.prototype._buildEndFaces=function(e,t,r,i){for(var n=1;n<r;n++)o.GeometryGenerationHelpers.makeFace3(this,this.vertexMatrix[t][n-1],e,this.vertexMatrix[t][n],i),n+1==r&&o.GeometryGenerationHelpers.makeFace3(this,this.vertexMatrix[t][n],e,this.vertexMatrix[t][0],i)},t.prototype.__makeBackFrontFaces=function(){for(var e=1;e+1<this.flatSidePolygon.vertices.length;e++)o.GeometryGenerationHelpers.makeFace4(this,this.leftFlatIndices[e],this.leftFlatIndices[e-1],this.rightFlatIndices[e],this.rightFlatIndices[e-1])},t.prototype._buildUVMapping=function(e){for(var t=e.baseShape,r=e.outlineSegmentCount,i=t.vertices.length,n=Boolean(e.closeTop),s=Boolean(e.closeBottom),l=Boolean(e.makeHollow),h=1;h<r;h++)for(var d=1;d<t.vertices.length;d++)o.GeometryGenerationHelpers.addCylindricUV4(this,h,d-1,h-1,d,r,i,l),d+1==t.vertices.length&&o.GeometryGenerationHelpers.addCylindricUV4(this,h,d-1,h-1,d,r,i,l);if(l){for(d=0;d<this.leftFlatTriangleIndices.length;d++){var u=this.leftFlatTriangleIndices[d][0],p=this.leftFlatTriangleIndices[d][1],v=this.leftFlatTriangleIndices[d][2];c.UVHelpers.makeFlatTriangleUVs(this,this.flatSideBounds,u,p,v)}for(d=0;d<this.rightFlatTriangleIndices.length;d++){var f=this.rightFlatTriangleIndices[d][0],g=this.rightFlatTriangleIndices[d][2],y=this.rightFlatTriangleIndices[d][1];c.UVHelpers.makeFlatTriangleUVs(this,this.flatSideBounds,f,g,y)}for(d=1;d+1<this.flatSidePolygon.vertices.length;d++){var _=(d-1)/(this.flatSidePolygon.vertices.length-1),E=d/(this.flatSidePolygon.vertices.length-1);this.faceVertexUvs[0].push([new a.Vector2(0,E),new a.Vector2(0,_),new a.Vector2(1,E)]),this.faceVertexUvs[0].push([new a.Vector2(0,_),new a.Vector2(1,_),new a.Vector2(1,E)])}}if(s)if(l)m(this,this.hollowBottomEdgeVertIndices,this.hollowBottomTriagles);else for(d=1;d<i;d++)o.GeometryGenerationHelpers.addPyramidalBaseUV3(this,d-1,i),d+1==i&&o.GeometryGenerationHelpers.addPyramidalBaseUV3(this,d-1,i);if(n){var I=r-1;for(d=1;d<i;d++)o.GeometryGenerationHelpers.addPyramidalBaseUV3(this,d-1,i),d+1==i&&o.GeometryGenerationHelpers.addPyramidalBaseUV3(this,I,i)}this.uvsNeedUpdate=!0},t.prototype.addFace4ByIndices=function(e,t,r,i,n){o.GeometryGenerationHelpers.makeFace4(this,this.vertexMatrix[e][t],this.vertexMatrix[r][t],this.vertexMatrix[e][i],this.vertexMatrix[r][i],n)},t.prototype._buildVertices=function(e){for(var t=e.baseShape,r=e.outline,i=e.outlineSegmentCount,n=Boolean(e.makeHollow),s=e.bendAngle/180*Math.PI,a=e.hollowStrengthX,o=e.twistAngle*d,l=Boolean(e.normalizePerpendiculars),c=void 0!==e.normalsLength?e.normalsLength:10,h=r.getBounds(),u=h.height,p=t.getBounds(),v=p.getCenter(),f=u/s,m=e.isBending&&!isNaN(f)&&f!==Number.POSITIVE_INFINITY&&f!==Number.NEGATIVE_INFINITY&&Math.abs(s)>.01,g=0;g<i;g++){var y=Math.min(1,Math.max(0,g/(i-1)));this.vertexMatrix[g]=[];var _=r.getPointAt(y),E=r.getPerpendicularAt(y),I=(h.max.y-_.y)/u,w=g/(i-1);this.__buildSlice(t,h,_,g,I,m,s,f,o*w),this.__buildSpine(v,h,_,I,m,s,f),this.__buildPerps(t,h,_,E,I,m,s,f,l,c)}var x=this._getTopVertex(h,m,s,f),P=this._getBottomVertex(h);this.topIndex=this.vertices.length,this.vertices.push(x),this.bottomIndex=this.vertices.length,this.vertices.push(P),n&&this.__makeFlatSideVertices(Math.max(p.width,p.height)/2+a)},t.prototype.__applyBumpmap=function(e){for(var t=0;t<this.vertexMatrix.length;t++)for(var r=0;r<this.vertexMatrix[t].length;r++);},t}(u);t.DildoGeometry=p;var v=function(e,t,r,i){var n=new a.Vector3(0,0,1);return e.x-=r,e.y-=i,e.applyAxisAngle(n,t),e.x+=r,e.y+=i,e},f=function(e,t,r,i){var n=new a.Vector3(0,1,0);return e.x-=r,e.z-=i,e.applyAxisAngle(n,t),e.x+=r,e.z+=i,e},m=function(e,t,r){for(var i=s.Bounds.computeFromVertices(t.map((function(t){return new s.Vertex(e.vertices[t].x,e.vertices[t].z)}))),n=function(e){return new a.Vector2((e.x-i.min.x)/i.width,(e.z-i.min.y)/i.height)},o=0;o<r.length;o++){var l=e.vertices[r[o][0]],c=e.vertices[r[o][1]],h=e.vertices[r[o][2]];e.faceVertexUvs[0].push([n(l),n(c),n(h)])}}},498:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DildoMaterials=void 0;var i,n,s=r(232);t.DildoMaterials=(i=new Map,n={createMainMaterial:function(e,t,r,i){return e?new s.MeshLambertMaterial({color:16777215,wireframe:t,depthTest:!0,opacity:1,side:i,visible:!0,emissive:0,reflectivity:1,refractionRatio:.89,map:n.loadTextureImage(r)}):new s.MeshPhongMaterial({color:3684607,wireframe:t,flatShading:!1,depthTest:!0,opacity:1,side:i,visible:!0,emissive:0,reflectivity:1,refractionRatio:.89,map:null})},createSliceMaterial:function(e,t,r){return t?new s.MeshBasicMaterial({wireframe:!0}):new s.MeshLambertMaterial({color:e?8947848:169363624,wireframe:!1,depthTest:!0,opacity:1,side:s.DoubleSide,visible:!0,emissive:0,reflectivity:1,refractionRatio:.89,map:e?n.loadTextureImage(r):null,vertexColors:!1})},loadTextureImage:function(e){var t=i.get(e);return t||(t=(new s.TextureLoader).load(e),i.set(e,t)),t}})},787:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GeometryGenerationHelpers=void 0;var i=r(232),n=r(11),s=r(814),a=r(309),o=r(834),l=r(659),c=r(686),h=r(280),d=r(507);t.GeometryGenerationHelpers={makeFace3:function(e,t,r,i,n){n?e.faces.push(new c.Face3(i,r,t)):e.faces.push(new c.Face3(t,r,i))},makeFace4:function(e,r,i,n,s,a){a?(t.GeometryGenerationHelpers.makeFace3(e,r,n,i,!1),t.GeometryGenerationHelpers.makeFace3(e,n,s,i,!1)):(t.GeometryGenerationHelpers.makeFace3(e,r,i,n,!1),t.GeometryGenerationHelpers.makeFace3(e,i,s,n,!1))},addCylindricUV4:function(e,t,r,n,s,a,o,l){l?(e.faceVertexUvs[0].push([new i.Vector2(t/a,r/o),new i.Vector2(t/a,s/o),new i.Vector2(n/a,r/o)]),e.faceVertexUvs[0].push([new i.Vector2(t/a,s/o),new i.Vector2(n/a,s/o),new i.Vector2(n/a,r/o)])):(e.faceVertexUvs[0].push([new i.Vector2(t/a,r/o),new i.Vector2(n/a,r/o),new i.Vector2(t/a,s/o)]),e.faceVertexUvs[0].push([new i.Vector2(n/a,r/o),new i.Vector2(n/a,s/o),new i.Vector2(t/a,s/o)]))},addPyramidalBaseUV3:function(e,t,r){var n=1-2*Math.abs(.5-t/r),s=1-2*Math.abs(.5-(t+1)/r);e.faceVertexUvs[0].push([new i.Vector2(n,0),new i.Vector2(.5,1),new i.Vector2(s,0)])},flattenVert2dArray:function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].x,e[r].y);return t},mkCircularPolygon:function(e,t,r){void 0===r&&(r=1);for(var i,n=[],a=0;a<t;a++)i=2*Math.PI*(a/t),n.push(new s.Vertex(Math.cos(i)*e*r,Math.sin(i)*e));return new s.Polygon(n,!1)},makeSlice:function(e,t){var r=(0,a.sliceGeometry)(e,t,!1);return r.mergeVertices(),r.computeFaceNormals(),r},makeAndAddPlaneIntersection:function(e,r,s,a,h,d){var u=(new o.PlaneMeshIntersection).getIntersectionPoints(r,s,a,h),p=(0,l.clearDuplicateVertices3)(u,1e-6),v=new c.Gmetry;v.vertices=p;var f=new i.PointsMaterial({size:1.4,color:65535}),m=new i.Points(v.toBufferGeometry(),f);d.showSplitShape&&(m.position.y=-100,m.position.z=-50,e.addMesh(m));for(var g=t.GeometryGenerationHelpers.flattenVert2dArray(p),y=(0,n.earcut)(g),_=new c.Gmetry,E=0;E<p.length;E++)_.vertices.push(p[E].clone());for(E=0;E+2<y.length;E+=3){var I=y[E],w=y[E+1],x=y[E+2];t.GeometryGenerationHelpers.makeFace3(_,I,w,x)}if(d.addRawIntersectionTriangleMesh){var P=new i.Mesh(_.toBufferGeometry(),new i.LineBasicMaterial({color:16746496}));P.position.y=-100,P.position.z=-50,e.addMesh(P)}return d.addPrecalculatedMassiveFaces&&t.GeometryGenerationHelpers.makeAndAddMassivePlaneIntersection(e,s),d.addPrecalculatedHollowFaces&&t.GeometryGenerationHelpers.makeAndAddHollowPlaneIntersection(e,s),p},makeAndAddMassivePlaneIntersection:function(e,r){var s=r.getPerpendicularPathVertices(!0,!0),a=new c.Gmetry;a.vertices=s;for(var o=new i.MeshBasicMaterial({wireframe:!1,color:16711680,opacity:.5,side:i.DoubleSide,transparent:!0}),l=t.GeometryGenerationHelpers.flattenVert2dArray(s),h=(0,n.earcut)(l),d=0;d+2<h.length;d+=3){var u=h[d],p=h[d+1],v=h[d+2];t.GeometryGenerationHelpers.makeFace3(a,u,p,v)}var f=new i.Mesh(a.toBufferGeometry(),o);f.position.y=-100,f.position.z=50,f.userData.isExportable=!1,e.addMesh(f)},makeAndAddHollowPlaneIntersection:function(e,t){for(var r=new c.Gmetry,n=t.getPerpendicularHullLines(),s=0;s<n.length;s++){var a=n[s].start,o=n[s].end;r.vertices.push(a,o);var l=r.vertices.length;s>0&&(r.faces.push(new c.Face3(l-4,l-2,l-3)),r.faces.push(new c.Face3(l-3,l-2,l-1)))}var h=new i.MeshBasicMaterial({wireframe:!1,color:16711680,opacity:.5,side:i.DoubleSide,transparent:!0}),d=new i.Mesh(r.toBufferGeometry(),h);d.position.y=-100,d.position.z=-50,d.userData.isExportable=!1,e.addMesh(d)},addSpine:function(e,t){var r=new i.LineSegments(t.toBufferGeometry(),new i.LineBasicMaterial({color:16746496}));r.position.y=-100,e.addMesh(r)},addPerpendicularPaths:function(e,r){t.GeometryGenerationHelpers.addPerpendicularPath(e,r.outerPerpLines,16711680),t.GeometryGenerationHelpers.addPerpendicularPath(e,r.innerPerpLines,65280)},addPerpendicularPath:function(e,t,r){var n=new c.Gmetry;t.forEach((function(e){n.vertices.push(e.start.clone()),n.vertices.push(e.end.clone())}));var s=new i.LineSegments(n.toBufferGeometry(),new i.LineBasicMaterial({color:r}));s.position.y=-100,e.addMesh(s)},makePlaneTriangulation:function(e,t,r,a){var o=r.reduce((function(e,r){var i=t.vertices[r];return e.push(i.x,i.y),e}),[]),l=(0,n.earcut)(o),u=new c.Gmetry;u.vertices=r.map((function(e){return t.vertices[e]}));for(var p=s.Bounds.computeFromVertices(u.vertices.map((function(e){return new s.Vertex(e.x,e.y)}))),v=0;v<l.length;v+=3){var f=l[v],m=l[v+1],g=l[v+2];u.faces.push(new c.Face3(f,m,g)),h.UVHelpers.makeFlatTriangleUVs(u,p,f,m,g)}u.uvsNeedUpdate=!0,u.buffersNeedUpdate=!0,u.computeVertexNormals();var y=new i.Mesh(u.toBufferGeometry(),new i.MeshBasicMaterial({color:18687,transparent:!0,opacity:.55,side:i.DoubleSide}));return y.position.y=-100,y.userData.isExportable=!1,e.partialResults[d.KEY_PLANE_INTERSECTION_TRIANGULATION]=u,a.showSplitShapeTriangulation&&e.addMesh(y),u},normalizeVectorXY:function(e,t,r){var i=t.x-e.x,n=t.y-e.y,s=r/Math.sqrt(i*i+n*n);t.x=e.x+i*s,t.y=e.y+n*s},normalizeVectorXYZ:function(e,t,r){var i=t.x-e.x,n=t.y-e.y,s=t.z-e.z,a=r/Math.sqrt(i*i+n*n+s*s);t.x=e.x+i*a,t.y=e.y+n*a,t.z=e.z+s*a},removeAllChildNodes:function(e){for(;e.lastChild;)e.removeChild(e.lastChild)},clamp:function(e,t,r){return Math.max(Math.min(e,r),t)}}},479:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ImageStore=void 0,t.ImageStore=(r=new Map,{getImage:function(e,t){var i=r.get(e);return i||(i=document.createElement("img"),r.set(e,i),i.onload=function(){t(i)},i.setAttribute("src",e)),i},isImageLoaded:function(e){return e.complete&&0!==e.naturalHeight&&void 0!==e.naturalHeight}})},762:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LocalstorageIO=void 0;var r=function(){function e(){}return e.prototype.onPathRestored=function(e,t){var r=localStorage.getItem("bezier_path");r&&e(r),setInterval((function(){var e=t();e&&localStorage.setItem("bezier_path",e)}),1e4)},e}();t.LocalstorageIO=r},41:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PathFinder=void 0;var i=r(507),n=function(){function e(e){this.visitedVertices=new Set,this.unvisitedVertIndices=new Set,this.numVisitedVertices=0,this.epsilon=void 0!==e&&e>=0?e:i.EPS}return e.prototype.findAllPathsOnMesh=function(e,t){var r=[];this.visitedVertices.clear(),this.unvisitedVertIndices.clear();var i=a(e,t,this.epsilon),n=i.length;for(this.unvisitedVertIndices=new Set(i.map((function(e,t){return t})));this.numVisitedVertices<n;){var s=this.unvisitedVertIndices.values().next().value,o=this.findUnvisitedPaths(e,i,s);r.push(o)}return this.combineAdjacentPaths(r,e)},e.prototype.findUnvisitedPaths=function(e,t,r){var i,n=[r];for(this.visitedVertices.add(r),this.unvisitedVertIndices.delete(r),this.numVisitedVertices++;-1!==(i=this.findAdjacentFace(e,t,r));)n.push(i),this.visitedVertices.add(i),this.unvisitedVertIndices.delete(i),this.numVisitedVertices++,r=i;return n},e.prototype.findAdjacentFace=function(e,t,r){for(var i=e.faces.length,n=0;n<i;n++)if(s(e,n,r))for(var a=0;a<t.length;a++){var o=t[a];if(o!==r&&!this.isVisited(o)){if(!this.isVisited(o)&&s(e,n,o))return o;if(s(e,n,o))return o}}return-1},e.prototype.isVisited=function(e){return this.visitedVertices.has(e)},e.prototype.combineAdjacentPaths=function(e,t){for(var r=[],i=new Set(e.map((function(e,t){return t})));i.size>0;){var n=i.values().next().value;i.delete(n);var s=e[n],a=null;do{!(a=o(e,s[s.length-1],i,t))&&s.length>1&&(s=s.reverse(),a=o(e,s[s.length-1],i,t)),a&&(s=s.concat(a))}while(a);r.push(s)}return r},e}();t.PathFinder=n;var s=function(e,t,r){var i=e.faces[t];return i.a===r||i.b===r||i.c===r},a=function(e,t,r){for(var i=[],n=0;n<t.length;n++){for(var s=t[n],a=-1,o=r,l=0;l<e.vertices.length;l++){var c=e.vertices[l].distanceTo(s);c<=o&&(-1===a||-1!==a&&e.vertices[a].distanceTo(s)>=c&&a>l)&&(a=l,o=c)}-1===a?console.warn("PathFinder.mapVerticesToGeometryIndices could not find a matching geometry vertex for path point "+n+". The final result might be locally broken."):i.push(a)}return i},o=function(e,t,r,i){for(var n=0;n<i.faces.length;n++)if(s(i,n,t))for(var a=0;a<e.length;a++)if(r.has(a)){var o=e[a];if(s(i,n,o[0]))return r.delete(a),o;if(s(i,n,o[o.length-1]))return r.delete(a),o.reverse()}}},834:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PlaneMeshIntersection=void 0;var i=r(232),n=function(){var e=this;this.getIntersectionPoints=function(t,r,n,a){e.pointsOfIntersection=[];var o=new i.Plane,l=s(a),c=l[0],h=l[1],d=l[2];n.localToWorld(e.planePointA.copy(c)),n.localToWorld(e.planePointB.copy(h)),n.localToWorld(e.planePointC.copy(d)),o.setFromCoplanarPoints(e.planePointA,e.planePointB,e.planePointC);var u=e;return r.faces.forEach((function(e){t.localToWorld(u.a.copy(r.vertices[e.a])),t.localToWorld(u.b.copy(r.vertices[e.b])),t.localToWorld(u.c.copy(r.vertices[e.c])),u.lineAB=new i.Line3(u.a,u.b),u.lineBC=new i.Line3(u.b,u.c),u.lineCA=new i.Line3(u.c,u.a),u.__setPointOfIntersection(u.lineAB,o),u.__setPointOfIntersection(u.lineBC,o),u.__setPointOfIntersection(u.lineCA,o)})),e.pointsOfIntersection},this.__setPointOfIntersection=function(e,t){var r=t.intersectLine(e,this.pointOfIntersection);r&&this.pointsOfIntersection.push(r.clone())},this.pointsOfIntersection=[],this.a=new i.Vector3,this.b=new i.Vector3,this.c=new i.Vector3,this.planePointA=new i.Vector3,this.planePointB=new i.Vector3,this.planePointC=new i.Vector3,this.lineAB=new i.Line3,this.lineBC=new i.Line3,this.lineCA=new i.Line3,this.pointOfIntersection=new i.Vector3};t.PlaneMeshIntersection=n;var s=function(e){var t=e.getAttribute("position"),r=(new i.Vector3,new i.Vector3),n=new i.Vector3,s=new i.Vector3;return r.fromBufferAttribute(t,0),n.fromBufferAttribute(t,1),s.fromBufferAttribute(t,2),[r,n,s]}},280:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UVHelpers=void 0;var i=r(232);t.UVHelpers={makeFlatTriangleUVs:function(e,t,r,n,s){var a=e.vertices[r],o=e.vertices[n],l=e.vertices[s],c=function(e){return new i.Vector2((e.x-t.min.x)/t.width,(e.y-t.min.y)/t.height)};e.faceVertexUvs[0].push([c(a),c(o),c(l)])}}},659:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clearDuplicateVertices3=void 0;t.clearDuplicateVertices3=function(e,t){void 0===t&&(t=1e-6);for(var i=[],n=0;n<e.length;n++)r(e,e[n],n+1,t)||i.push(e[n]);return i};var r=function(e,t,r,i){for(var n=r;n<e.length;n++)if(s=e[n],a=t,o=i,s.distanceTo(a)<o)return!0;var s,a,o;return!1}},224:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.computeVertexNormals=void 0;var i=r(232);t.computeVertexNormals=function(e,t){for(var r=t.getAttribute("normal"),a=Array(e.faces.length),o=0;o<e.faces.length;o++){var l=e.faces[o],c=new i.Vector3(r.array[9*o+0],r.array[9*o+1],r.array[9*o+2]),h=new i.Vector3(r.array[9*o+3],r.array[9*o+4],r.array[9*o+5]),d=new i.Vector3(r.array[9*o+6],r.array[9*o+7],r.array[9*o+8]);n(a,l.a,c),n(a,l.b,h),n(a,l.c,d)}for(var u=new Array(e.vertices.length),p=0;p<e.vertices.length;p++){var v=s(a[p]);v.add(e.vertices[p]),u[p]=new i.Line3(e.vertices[p],v)}return u};var n=function(e,t,r){(t>=e.length||void 0===e[t])&&(e[t]=[]),e[t].push(r)},s=function(e){var t=new i.Vector3(0,0,0);return e&&(e.forEach((function(e){t.add(e)})),t.divideScalar(e.length)),t}},507:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KEY_SLICED_MESH_LEFT=t.KEY_SLICED_MESH_RIGHT=t.KEY_SPLIT_TRIANGULATION_GEOMETRIES=t.KEY_PLANE_INTERSECTION_TRIANGULATION=t.KEY_PLANE_INTERSECTION_POINTS=t.KEY_SPLIT_PANE_MESH=t.KEY_RIGHT_SLICE_PLANE=t.KEY_LEFT_SLICE_PLANE=t.KEY_RIGHT_SLICE_GEOMETRY=t.KEY_LEFT_SLICE_GEOMETRY=t.SPLIT_MESH_OFFSET=t.DEG_TO_RAD=t.EPS=void 0,t.EPS=1e-6,t.DEG_TO_RAD=Math.PI/180,t.SPLIT_MESH_OFFSET={x:0,y:-100,z:-50},t.KEY_LEFT_SLICE_GEOMETRY="KEY_LEFT_SLICE_GEOMETRY",t.KEY_RIGHT_SLICE_GEOMETRY="KEY_RIGHT_SLICE_GEOMETRY",t.KEY_LEFT_SLICE_PLANE="KEY_LEFT_SLICE_PLANE",t.KEY_RIGHT_SLICE_PLANE="KEY_RIGHT_SLICE_PLANE",t.KEY_SPLIT_PANE_MESH="KEY_SPLIT_PANE_MESH",t.KEY_PLANE_INTERSECTION_POINTS="KEY_PLANE_INTERSECTION_POINTS",t.KEY_PLANE_INTERSECTION_TRIANGULATION="KEY_PLANE_INTERSECTION_TRIANGULATION",t.KEY_SPLIT_TRIANGULATION_GEOMETRIES="KEY_SPLIT_TRIANGULATION_GEOMETRIES",t.KEY_SLICED_MESH_RIGHT="KEY_SLICED_MESH_RIGHT",t.KEY_SLICED_MESH_LEFT="KEY_SLICED_MESH_LEFT"},555:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_BEZIER_JSON=void 0,t.DEFAULT_BEZIER_JSON='\n  [\n    {\n       "startPoint":[\n          -122,\n          77.80736634304651\n       ],\n       "endPoint":[\n          -65.59022229786551,\n          21.46778533702511\n       ],\n       "startControlPoint":[\n          -121.62058129515852,\n          25.08908859418696\n       ],\n       "endControlPoint":[\n          -79.33419353770395,\n          48.71529293460728\n       ]\n    },\n    {\n       "startPoint":[\n          -65.59022229786551,\n          21.46778533702511\n       ],\n       "endPoint":[\n          -65.66917273472913,\n          -149.23537680826058\n       ],\n       "startControlPoint":[\n          -52.448492057756646,\n          -4.585775770903305\n       ],\n       "endControlPoint":[\n          -86.1618869001374,\n          -62.11613821618976\n       ]\n    },\n    {\n       "startPoint":[\n          -65.66917273472913,\n          -149.23537680826058\n       ],\n       "endPoint":[\n          -61.86203591980055,\n          -243.8368165606738\n       ],\n       "startControlPoint":[\n          -53.701578771473564,\n          -200.1123697454778\n       ],\n       "endControlPoint":[\n          -69.80704300441666,\n          -205.36451303641783\n       ]\n    },\n    {\n       "startPoint":[\n          -61.86203591980055,\n          -243.8368165606738\n       ],\n       "endPoint":[\n          -21.108966092052256,\n          -323\n       ],\n       "startControlPoint":[\n          -54.08681426887413,\n          -281.486963896856\n       ],\n       "endControlPoint":[\n          -53.05779349623559,\n          -323\n       ]\n    }\n ]\n  '},333:(e,t,r)=>{globalThis.ngdg=r(619)._},444:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isMobileDevice=void 0;t.isMobileDevice=function(){return e=navigator.userAgent||navigator.vendor||window.opera,/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4));var e}},557:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.locateVertexInArray=void 0;t.locateVertexInArray=function(e,t,r){for(var i=Number.POSITIVE_INFINITY,n=-1,s=0;s<e.length;s++){var a=e[s].distanceTo(t);-1===n&&a<i&&a<r&&(n=s,i=a)}return n}},752:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mergeAndMapVertices=t.mergeGeometries=void 0;var i=r(232),n=r(557),s=r(686);t.mergeGeometries=function(e,r,n){void 0===n&&(n=1e-6);for(var a=(0,t.mergeAndMapVertices)(e,r,n),o=0;o<r.faces.length;o++){var l=r.faces[o],c=a[l.a],h=a[l.b],d=a[l.c];if(e.faces.push(new s.Face3(c,h,d)),r.faceVertexUvs.length>0&&o<r.faceVertexUvs[0].length){var u=r.faceVertexUvs[0][o];e.faceVertexUvs[0].push([u[0].clone(),u[1].clone(),u[2].clone()])}else e.faceVertexUvs[0].push([new i.Vector2(0,0),new i.Vector2(0,1),new i.Vector2(1,.5)])}};t.mergeAndMapVertices=function(e,t,r){for(var i=[],s=0;s<t.vertices.length;s++){var a=t.vertices[s],o=(0,n.locateVertexInArray)(e.vertices,a,r);-1===o?(i.push(e.vertices.length),e.vertices.push(a.clone())):i.push(o)}return i}},619:(e,t,r)=>{t._=void 0;var i=r(555),n=r(479),s=r(615),a=r(762),o=r(444),l=r(507);t._={DEFAULT_BEZIER_JSON:i.DEFAULT_BEZIER_JSON,DEG_TO_RAD:l.DEG_TO_RAD,SPLIT_MESH_OFFSET:l.SPLIT_MESH_OFFSET,KEY_SLICED_MESH_RIGHT:l.KEY_SLICED_MESH_RIGHT,KEY_SLICED_MESH_LEFT:l.KEY_SLICED_MESH_LEFT,LocalstorageIO:a.LocalstorageIO,DildoGeneration:s.DildoGeneration,ImageStore:n.ImageStore,isMobileDevice:o.isMobileDevice}},541:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.randomWebColor=void 0;var i=r(19),n=r(372),s=r(246);t.randomWebColor=function(e,t){if(void 0===e){var r=Math.max(void 0!==i.WebColorsMalachite?i.WebColorsMalachite.length:0,void 0!==n.WebColorsContrast?n.WebColorsContrast.length:0,void 0!==s.WebColors?s.WebColors.length:0);e=Math.round(Math.random()*r)}switch(t){case"Malachite":if(void 0!==i.WebColorsMalachite)return i.WebColorsMalachite[e%i.WebColorsMalachite.length].cssRGB();console.warn("You decided to use the 'WebColorsMalachite' color palette but it is not installed. Falling back.");case"Mixed":if(void 0!==n.WebColorsContrast)return n.WebColorsContrast[e%n.WebColorsContrast.length].cssRGB();console.warn("You decided to use the 'WebColorsContrast' color palette but it is not installed. Falling back.");default:return s.WebColors[e%s.WebColors.length].cssRGB()}}},309:(e,t,r)=>{r.r(t),r.d(t,{BACK:()=>n,FACE_KEYS:()=>a,FRONT:()=>i,GeometryBuilder:()=>m,ON:()=>s,facesFromEdges:()=>o,sliceGeometry:()=>g});const i="front",n="back",s="on",a=["a","b","c"],o=e=>l(e).filter(v).map((function(e){return e.map((function(e){return e[0]}))})),l=e=>{let t=!0;for(var r=e.map((e=>[e]));t;)t=c(r);return r=r.filter((function(e){return e.length}))},c=e=>(e.forEach((function(t,r){e.forEach((function(r,i){if(h(t,r))return delete e[i],!0}))})),!1),h=(e,t)=>e!==t&&(d(e)===u(t)?(e.unshift.apply(e,t),!0):d(e)===d(t)?(p(t),e.unshift.apply(e,t),!0):u(e)===d(t)?(e.push.apply(e,t),!0):u(e)===u(t)&&(p(t),e.push.apply(e,t),!0)),d=e=>e[0][0],u=e=>e[e.length-1][1],p=e=>{e.reverse(),e.forEach((function(e){e.reverse()}))},v=e=>d(e)===u(e)?1:0;var f=r(158);class m{constructor(e,t,r){this.sourceGeometry=e,this.targetGeometry=t,this.slicePlane=r,this.addedVertices=[],this.addedIntersections=[],this.newEdges=[[]]}startFace(e){this.sourceFaceIndex=e,this.sourceFace=this.sourceGeometry.faces[e],this.sourceFaceUvs=this.sourceGeometry.faceVertexUvs[0][e],this.faceIndices=[],this.faceNormals=[],this.faceUvs=[]}endFace(){var e=this.faceIndices.map((function(e,t){return t}));this.addFace(e)}closeHoles(){this.newEdges[0].length&&o(this.newEdges).forEach((e=>{this.faceNormal(e).dot(this.slicePlane.normal)>.5&&e.reverse(),this.startFace(),this.faceIndices=e,this.endFace()}),this)}addVertex(e){this.addUv(e),this.addNormal(e);const t=this.sourceFace[e];let r;if(this.addedVertices.hasOwnProperty(t))r=this.addedVertices[t];else{const e=this.sourceGeometry.vertices[t];this.targetGeometry.vertices.push(e),r=this.targetGeometry.vertices.length-1,this.addedVertices[t]=r}this.faceIndices.push(r)}addIntersection(e,t,r,i){const n=Math.abs(r)/(Math.abs(r)+Math.abs(i));this.addIntersectionUv(e,t,n),this.addIntersectionNormal(e,t,n);const s=this.sourceFace[e],a=this.sourceFace[t],o=this.intersectionId(s,a);let l;if(this.addedIntersections.hasOwnProperty(o))l=this.addedIntersections[o];else{const e=this.sourceGeometry.vertices[s],t=this.sourceGeometry.vertices[a],r=e.clone().lerp(t,n);this.targetGeometry.vertices.push(r),l=this.targetGeometry.vertices.length-1,this.addedIntersections[o]=l}this.faceIndices.push(l),this.updateNewEdges(l)}addUv(e){if(!this.sourceFaceUvs)return;const t=this.keyIndex(e),r=this.sourceFaceUvs[t];this.faceUvs.push(r)}addIntersectionUv(e,t,r){if(!this.sourceFaceUvs)return;const i=this.keyIndex(e),n=this.keyIndex(t),s=this.sourceFaceUvs[i],a=this.sourceFaceUvs[n],o=s.clone().lerp(a,r);this.faceUvs.push(o)}addNormal(e){if(!this.sourceFace.vertexNormals.length)return;const t=this.keyIndex(e),r=this.sourceFace.vertexNormals[t];this.faceNormals.push(r)}addIntersectionNormal(e,t,r){if(!this.sourceFace.vertexNormals.length)return;const i=this.keyIndex(e),n=this.keyIndex(t),s=this.sourceFace.vertexNormals[i],a=this.sourceFace.vertexNormals[n],o=s.clone().lerp(a,r).normalize();this.faceNormals.push(o)}addFace(e){if(3===e.length)return void this.addFacePart(e[0],e[1],e[2]);const t=[];for(var r=0;r<e.length;r++)for(var i=r+1;i<e.length;i++){var n=Math.abs(r-i);n>1&&n<e.length-1&&t.push([e[r],e[i]])}t.sort(((e,t)=>this.faceEdgeLength(e[0],e[1])-this.faceEdgeLength(t[0],t[1])).bind(this));const s=e.indexOf(t[0][0]),a=(e=e.slice(s).concat(e.slice(0,s))).indexOf(t[0][1]),o=e.slice(0,a+1),l=e.slice(a).concat(e.slice(0,1));this.addFace(o),this.addFace(l)}addFacePart(e,t,r){let i=null;this.faceNormals.length&&(i=[this.faceNormals[e],this.faceNormals[t],this.faceNormals[r]]);const n=new f.G_(this.faceIndices[e],this.faceIndices[t],this.faceIndices[r],i);this.targetGeometry.faces.push(n),this.sourceFaceUvs&&this.targetGeometry.faceVertexUvs[0].push([this.faceUvs[e],this.faceUvs[t],this.faceUvs[r]])}faceEdgeLength(e,t){const r=this.faceIndices[e],i=this.faceIndices[t],n=this.targetGeometry.vertices[r],s=this.targetGeometry.vertices[i];return n.distanceToSquared(s)}intersectionId(e,t){return[e,t].sort().join(",")}keyIndex(e){return a.indexOf(e)}updateNewEdges(e){const t=this.newEdges.length-1;let r=this.newEdges[t];r.length<2?r.push(e):this.newEdges.push([e])}faceNormal(e){const t=e.map((e=>this.targetGeometry.vertices[e]).bind(this)),r=t[0].clone().sub(t[1]),i=t[0].clone().sub(t[2]);return r.cross(i).normalize()}}const g=(e,t,r)=>{const o=new f.P5,l=new m(e,o,t),c=[],h=[];return e.vertices.forEach((e=>{const r=_(e,t),i=y(r);c.push(r),h.push(i)})),e.faces.forEach((function(e,t){const r=a.map((function(t){return h[e[t]]}));if(-1===r.indexOf(i)&&-1!==r.indexOf(n))return;l.startFace(t);let o=a[a.length-1],d=e[o],u=c[d],p=h[d];a.map((t=>{var r=e[t],a=c[r],v=h[r];v===i&&(p===n?(l.addIntersection(o,t,u,a),l.addVertex(t)):l.addVertex(t)),v===s&&l.addVertex(t),v===n&&p===i&&l.addIntersection(o,t,u,a),o=t,d=r,p=v,u=a})),l.endFace()})),r&&l.closeHoles(),o},y=e=>e<0?n:e>0?i:s,_=(e,t)=>t.distanceToPoint(e)}},r={};function i(e){var n=r[e];if(void 0!==n)return n.exports;var s=r[e]={exports:{}};return t[e].call(s.exports,s,s.exports,i),s.exports}i.m=t,e=[],i.O=(t,r,n,s)=>{if(!r){var a=1/0;for(h=0;h<e.length;h++){for(var[r,n,s]=e[h],o=!0,l=0;l<r.length;l++)(!1&s||a>=s)&&Object.keys(i.O).every((e=>i.O[e](r[l])))?r.splice(l--,1):(o=!1,s<a&&(a=s));if(o){e.splice(h--,1);var c=n();void 0!==c&&(t=c)}}return t}s=s||0;for(var h=e.length;h>0&&e[h-1][2]>s;h--)e[h]=e[h-1];e[h]=[r,n,s]},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={179:0};i.O.j=t=>0===e[t];var t=(t,r)=>{var n,s,[a,o,l]=r,c=0;if(a.some((t=>0!==e[t]))){for(n in o)i.o(o,n)&&(i.m[n]=o[n]);if(l)var h=l(i)}for(t&&t(r);c<a.length;c++)s=a[c],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return i.O(h)},r=self.webpackChunkngdg=self.webpackChunkngdg||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var n=i.O(void 0,[736],(()=>i(333)));n=i.O(n)})();
//# sourceMappingURL=ngdg-main.min.js.map
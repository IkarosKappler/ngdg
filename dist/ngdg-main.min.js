(()=>{"use strict";var e,t={481:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BumpMapper=void 0;var i=r(232),n=r(224),s=r(787),o=r(686);t.BumpMapper={applyBumpmap:function(e,t,r,a,l){var c=(0,n.computeVertexNormals)(e,t),h=new o.Gmetry;h.vertices=c.map((function(e){var t=e.end.clone();return s.GeometryGenerationHelpers.normalizeVectorXYZ(e.start,t,l.bumpmapStrength),t}));var d=new i.Points(h.toBufferGeometry(),new i.PointsMaterial({size:1.4,color:65535})),u=null;if(console.log("options.useBumpmap",l.useBumpmap,"bumpmap",r),l.useBumpmap&&r){for(var p=0;p<e.vertexMatrix.length;p++)for(var m=0;m<e.vertexMatrix[p].length;m++){var f=e.vertexMatrix[p][m],v=e.vertices[f],g=1-p/(e.vertexMatrix.length-1),y=m/(e.vertexMatrix[p].length-1),_=r.getHeightAt(y,g),E=h.vertices[f];v.lerp(E,_)}(t=e.toBufferGeometry()).computeVertexNormals(),u=new i.Mesh(t,a)}return{dildoMesh:u,dildoNormalsMesh:d}}}},615:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DildoGeneration=void 0;var i=r(232),n=r(862),s=r(938),o=r(498),a=r(787),l=r(752),c=r(41),h=r(541),d=r(507),u=r(481),p=r(686),m=function(){function e(e,t){this.canvas=document.getElementById(e),this.parent=this.canvas.parentElement,this.scene=new i.Scene,this.camera=new i.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e4),this.camera.position.z=500;this.ambientLightA=new i.AmbientLight(4473924),this.ambientLightA.position.set(350,0,-350).multiplyScalar(50),this.scene.add(this.ambientLightA),this.ambientLightB=new i.PointLight(16777215,5,3500,.5),this.ambientLightB.position.set(-350,0,350).multiplyScalar(10),this.scene.add(this.ambientLightB),this.directionalLightA=new i.DirectionalLight(16777215,2),this.directionalLightA.position.set(350,350,350).multiplyScalar(10),this.scene.add(this.directionalLightA),this.scene.add(this.directionalLightA.target),this.directionalLightB=new i.DirectionalLight(16777215,2),this.directionalLightB.position.set(-350,-350,-50).multiplyScalar(10),this.scene.add(this.directionalLightB),this.renderer=new i.WebGLRenderer({canvas:this.canvas,preserveDrawingBuffer:!0,antialias:!0}),this.controls=t.makeOrbitControls(this.camera,this.renderer.domElement),this.controls.update(),this.geometries=[],this.partialResults={},this.splitResults={};var r=this;window.addEventListener("resize",(function(){r.resizeCanvas()})),this.resizeCanvas();var n=function(){requestAnimationFrame(n),r.controls.update(),r.renderer.render(r.scene,r.camera)};n()}return e.prototype.resizeCanvas=function(){var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;this.canvas.width=e,this.canvas.height=t,this.canvas.style.width=e+"px",this.canvas.style.height=t+"px",this.canvas.setAttribute("width",e+"px"),this.canvas.setAttribute("height",t+"px"),this.renderer.setSize(e,t),this.camera.setViewOffset(e,t,e/4,t/20,e,t)},e.prototype.rebuild=function(e){this.removeCachedGeometries(),this.clearResults();var t=e.outline.getBounds().width,r=a.GeometryGenerationHelpers.mkCircularPolygon(t,e.shapeSegmentCount,e.baseShapeExcentricity),l=void 0!==e.useBumpmap&&e.useBumpmap&&e.bumpmap?e.bumpmap:null,c=new s.DildoGeometry(Object.assign({baseShape:r},e)),h=e.useTextureImage&&void 0!==e.textureImagePath,m=void 0!==e.textureImagePath?e.textureImagePath:null,f="double"===e.renderFaces?i.DoubleSide:"back"===e.renderFaces?i.BackSide:i.FrontSide,v=void 0!==e.wireframe&&e.wireframe,g=o.DildoMaterials.createMainMaterial(h,v,m,f),y=c.toBufferGeometry();y.computeVertexNormals();var _=new i.Mesh(y,g);this.camera.lookAt(new i.Vector3(20,0,150)),this.camera.lookAt(_.position);var E=new p.Gmetry;if(c.spineVertices.forEach((function(e){E.vertices.push(e.clone())})),e.addSpine&&a.GeometryGenerationHelpers.addSpine(this,E),e.showBasicPerpendiculars&&a.GeometryGenerationHelpers.addPerpendicularPaths(this,c),e.useBumpmap){var w=u.BumpMapper.applyBumpmap(c,y,l,g,e),I=w.dildoMesh,S=w.dildoNormalsMesh;_=I,e.showBumpmapTargets&&(S.position.y=d.SPLIT_MESH_OFFSET.y,this.addMesh(S))}if(e.performSlice)this.__performPlaneSlice(_,c,v,h,m,e);else if(_.position.y=d.SPLIT_MESH_OFFSET.y,_.userData.isExportable=!0,this.addMesh(_),e.showNormals){var P=new n.VertexNormalsHelper(_,e.normalsLength,65280);this.scene.add(P),this.geometries.push(P)}},e.prototype.__performPlaneSlice=function(e,t,r,s,u,m){var f=new i.Plane(new i.Vector3(0,0,1),0),v=a.GeometryGenerationHelpers.makeSlice(t,f),g=new i.Plane(new i.Vector3(0,0,-1),0),y=a.GeometryGenerationHelpers.makeSlice(t,g),_=o.DildoMaterials.createSliceMaterial(s,r,u),E=new i.PlaneGeometry(300,500),w=new i.Mesh(E,new i.MeshBasicMaterial({color:4737096,transparent:!0,opacity:.35,side:i.DoubleSide}));w.rotation.x=Math.PI/5,this.partialResults[d.KEY_SPLIT_PANE_MESH]=w,m.showSplitPane&&(w.position.z=.5,this.addMesh(w));for(var I=a.GeometryGenerationHelpers.makeAndAddPlaneIntersection(this,e,t,w,E,m),S=(new c.PathFinder).findAllPathsOnMesh(v,I),P=0;P<S.length;P++){var x=S[P].map((function(e){return v.vertices[e]})),b=a.GeometryGenerationHelpers.verticesToBufferGeometry(x),M=new i.Line(b,new i.LineBasicMaterial({color:(0,h.randomWebColor)(L,"Mixed")}));M.position.y=d.SPLIT_MESH_OFFSET.y,this.addMesh(M)}if(m.addPrecalculatedShapeOutlines){var T=new p.Gmetry;T.vertices=I;var V=new i.Line(T.toBufferGeometry(),new i.LineBasicMaterial({color:8913064}));V.position.y=d.SPLIT_MESH_OFFSET.y,V.position.z=d.SPLIT_MESH_OFFSET.z,this.addMesh(V)}for(var G=[],L=0;L<S.length;L++){var F=a.GeometryGenerationHelpers.makePlaneTriangulation(this,v,S[L],m);G.push(F),m.closeCutAreas&&((0,l.mergeGeometries)(v,F,d.EPS),(0,l.mergeGeometries)(y,F,d.EPS))}if(m.showLeftSplit){v.uvsNeedUpdate=!0,v.buffersNeedUpdate=!0,v.computeVertexNormals();var A=new i.Mesh(v.toBufferGeometry(),_);if(A.position.y=d.SPLIT_MESH_OFFSET.y,A.position.z=d.SPLIT_MESH_OFFSET.z,A.userData.isExportable=!0,this.addMesh(A),this.splitResults[d.KEY_SLICED_MESH_LEFT]=A,m.showNormals){var N=new n.VertexNormalsHelper(A,m.normalsLength,65280);this.scene.add(N),this.geometries.push(N)}}if(m.showRightSplit){y.uvsNeedUpdate=!0,y.buffersNeedUpdate=!0,y.computeVertexNormals();var O=new i.Mesh(y.toBufferGeometry(),_);if(O.position.y=d.SPLIT_MESH_OFFSET.y,O.position.z=-d.SPLIT_MESH_OFFSET.z,O.userData.isExportable=!0,this.addMesh(O),this.splitResults[d.KEY_SLICED_MESH_RIGHT]=O,m.showNormals){N=new n.VertexNormalsHelper(O,m.normalsLength,65280);this.scene.add(N),this.geometries.push(N)}}this.partialResults[d.KEY_LEFT_SLICE_PLANE]=f,this.partialResults[d.KEY_LEFT_SLICE_GEOMETRY]=v,this.partialResults[d.KEY_RIGHT_SLICE_PLANE]=g,this.partialResults[d.KEY_RIGHT_SLICE_GEOMETRY]=y,this.partialResults[d.KEY_PLANE_INTERSECTION_POINTS]=I,this.partialResults[d.KEY_SPLIT_TRIANGULATION_GEOMETRIES]=G},e.prototype.addMesh=function(e){e.rotation.x=Math.PI,this.scene.add(e),this.geometries.push(e)},e.prototype.removeCachedGeometries=function(){for(var e=0;e<this.geometries.length;e++){var t=this.geometries[e];this.scene.remove(t),t instanceof i.Mesh&&(t.geometry.dispose(),t.material.dispose())}this.geometries=[]},e.prototype.clearResults=function(){this.splitResults[d.KEY_SLICED_MESH_RIGHT]=null,this.splitResults[d.KEY_SLICED_MESH_LEFT]=null,this.partialResults[d.KEY_LEFT_SLICE_PLANE]=null,this.partialResults[d.KEY_LEFT_SLICE_GEOMETRY]=null,this.partialResults[d.KEY_RIGHT_SLICE_PLANE]=null,this.partialResults[d.KEY_RIGHT_SLICE_GEOMETRY]=null,this.partialResults[d.KEY_PLANE_INTERSECTION_POINTS]=null,this.partialResults[d.KEY_SPLIT_TRIANGULATION_GEOMETRIES]=null},e.prototype.generateSTL=function(e,t){var r=[];for(var i in this.geometries)if(!0===this.geometries[i].userData.isExportable){var n=t.parse(this.geometries[i]);r.push(n)}"function"==typeof e.onComplete?e.onComplete(r.join("\n\n")):console.warn("STL data was generated but no 'onComplete' callback was defined.")},e}();t.DildoGeneration=m},938:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.DildoGeometry=void 0;var s=r(814),o=r(232),a=r(787),l=r(11),c=r(280),h=r(150),d=r(507),u=function(e){function t(t){var r=e.call(this)||this;return h.Gmetry.call(r),r.vertexMatrix=[],r.topIndex=-1,r.bottomIndex=-1,r.spineVertices=[],r.outerPerpLines=[],r.innerPerpLines=[],r.flatSidePolygon=null,r.leftFlatIndices=[],r.rightFlatIndices=[],r.leftFlatTriangleIndices=[],r.rightFlatTriangleIndices=[],r.flatSideBounds=null,r.hollowBottomEdgeVertIndices=[],r.hollowBottomTriagles=[],r.dildoNormals=[],r._buildVertices(t),r._buildFaces(t),r._buildUVMapping(t),t.useBumpmap&&(t.bumpmapTexture?r.__applyBumpmap(t.bumpmapTexture):console.warn("Cannot apply bumpmap as desired, because the bumpmap texture is null or undefined.")),r}return n(t,e),t.prototype.__buildSlice=function(e,t,r,i,n,s,l,c,h){for(var d=(t.max.x-r.x)/t.width,u=0;u<e.vertices.length;u++){var p=e.vertices[u];if(s){var m=new o.Vector3(p.x*d,0,p.y*d);a.GeometryGenerationHelpers.rotateVertY(m,h,0,0),this._bendVertex(m,l,c,n),m.y+=t.max.y}else{m=new o.Vector3(p.x*d,r.y,p.y*d);a.GeometryGenerationHelpers.rotateVertY(m,h,0,0)}this.vertexMatrix[i][u]=this.vertices.length,this.vertices.push(m),0==i&&(0==u&&m.y,u+1==e.vertices.length&&m.y)}},t.prototype.__buildSpine=function(e,t,r,i,n,s,a){var l=(t.max.x-r.x)/t.width,c=e.clone();if(n){var h=new o.Vector3(c.x*l,0,c.y*l);this._bendVertex(h,s,a,i),h.y+=t.max.y}else h=new o.Vector3(c.x*l,r.y,c.y*l);this.spineVertices.push(h)},t.prototype.__buildPerps=function(e,t,r,i,n,s,l,c,h,d){for(var u=(t.max.x-r.x)/t.width,p=[0,Math.floor(e.vertices.length/2)],m=0;m<p.length;m++){var f=p[m],v=e.vertices[f];if(s){var g=new o.Vector3(v.x*u,0,v.y*u);this._bendVertex(g,l,c,n),g.y+=t.max.y}else g=new o.Vector3(v.x*u,r.y,v.y*u);var y=new o.Vector3(r.x-i.x,r.y-i.y,0);if(0==f)var _=new o.Vector3(g.x-i.x,g.y+i.y,0);else _=new o.Vector3(g.x+i.x,g.y+i.y,0);a.GeometryGenerationHelpers.rotateVert(_,l*n,g.x,g.y);var E=g.clone();E.x+=y.x,E.y+=y.y,E.z+=y.z,h&&a.GeometryGenerationHelpers.normalizeVectorXY(g,_,d),0==f?this.outerPerpLines.push(new o.Line3(g,_)):this.innerPerpLines.push(new o.Line3(g,_))}},t.prototype.__makeFlatSideVertices=function(e){this.flatSidePolygon=new s.Polygon(this.getPerpendicularPathVertices(!0).map((function(e){return new s.Vertex(e)})),!1),this.flatSideBounds=this.flatSidePolygon.getBounds();for(var t=0;t<this.flatSidePolygon.vertices.length;t++){var r=this.vertices.length;this.leftFlatIndices.push(r),this.vertices.push(new o.Vector3(this.flatSidePolygon.vertices[t].x,this.flatSidePolygon.vertices[t].y,e)),0!==t&&t+1!==this.flatSidePolygon.vertices.length&&t+2!==this.flatSidePolygon.vertices.length||this.hollowBottomEdgeVertIndices.push(r)}for(t=0;t<this.flatSidePolygon.vertices.length;t++){r=this.vertices.length;this.rightFlatIndices.push(r),this.vertices.push(new o.Vector3(this.flatSidePolygon.vertices[t].x,this.flatSidePolygon.vertices[t].y,-e)),0!==t&&t+1!==this.flatSidePolygon.vertices.length&&t+2!==this.flatSidePolygon.vertices.length||this.hollowBottomEdgeVertIndices.push(r)}},t.prototype.__makeFlatSideFaces=function(){for(var e=this,t=this.leftFlatIndices.map((function(t){return e.vertices[t]})),r=a.GeometryGenerationHelpers.flattenVert2dArray(t),i=(0,l.earcut)(r),n=0;n+2<i.length;n+=3){var s=i[n],o=i[n+1],c=i[n+2];a.GeometryGenerationHelpers.makeFace3(this,this.leftFlatIndices[s],this.leftFlatIndices[o],this.leftFlatIndices[c]),this.leftFlatTriangleIndices.push([this.leftFlatIndices[s],this.leftFlatIndices[o],this.leftFlatIndices[c]])}for(n=0;n+2<i.length;n+=3){s=i[n],o=i[n+1],c=i[n+2];a.GeometryGenerationHelpers.makeFace3(this,this.rightFlatIndices[s],this.rightFlatIndices[c],this.rightFlatIndices[o]),this.rightFlatTriangleIndices.push([this.rightFlatIndices[s],this.rightFlatIndices[o],this.rightFlatIndices[c]])}},t.prototype.getPerpendicularPathVertices=function(e,t){for(var r=[],i=0;i<this.innerPerpLines.length;i++)r.push(t?this.innerPerpLines[i].start:this.innerPerpLines[i].end);for(i=this.outerPerpLines.length-1;i>=0;i--)r.push(t?this.outerPerpLines[i].start:this.outerPerpLines[i].end);return e&&r.push(this.vertices[this.bottomIndex]),r},t.prototype.getPerpendicularHullLines=function(){for(var e=[],t=0;t<this.innerPerpLines.length;t++)e.push(this.innerPerpLines[t]);for(t=this.outerPerpLines.length-1;t>=0;t--)e.push(this.outerPerpLines[t]);return e},t.prototype._getTopVertex=function(e,t,r,i){if(t){var n=new o.Vector3(0,0,0);return this._bendVertex(n,r,i,1),n.y+=e.max.y,n}return new o.Vector3(0,e.min.y,0)},t.prototype._getBottomVertex=function(e){return new o.Vector3(0,e.max.y,0)},t.prototype._bendVertex=function(e,t,r,i){var n=new o.Vector3(0,0,1),s=t*i;e.x-=r,e.applyAxisAngle(n,s),e.x+=r},t.prototype.applyBumpMap=function(e){},t.prototype._buildFaces=function(e){var t=e.baseShape,r=e.outlineSegmentCount,i=Boolean(e.closeTop),n=Boolean(e.closeBottom),s=Boolean(e.makeHollow),o=t.vertices.length;this.faceVertexUvs[0]=[];for(var a=0;a<r;a++)for(var l=0;l<o;l++)a>0&&l>0&&(this.addFace4ByIndices(a,l-1,a-1,l,s),l+1==t.vertices.length&&this.addFace4ByIndices(a,l,a-1,0,s));s&&(this.__makeFlatSideFaces(),this.__makeBackFrontFaces()),n&&(s?this._buildHollowBottomFaces():this._buildEndFaces(this.bottomIndex,0,o,!1)),i&&this._buildEndFaces(this.topIndex,this.vertexMatrix.length-1,o,s)},t.prototype._buildHollowBottomFaces=function(){for(var e,t=this,r=this.hollowBottomEdgeVertIndices.map((function(e){return t.vertices[e]})),i=function(e){for(var i,n=0,s=Number.MAX_VALUE,o=0;o<r.length;o++){var a=t.hollowBottomEdgeVertIndices[o];(i=r[o].distanceTo(e))<s&&(n=a,s=i)}return n},n=this.vertexMatrix[0].length,s=i(this.vertices[n-1]),o=0;o<n;o++){var a=i(this.vertices[this.vertexMatrix[0][o]]);e=[s,this.vertexMatrix[0][0==o?n-1:o-1],this.vertexMatrix[0][o]],this.faces.push(new h.Face3(e[0],e[1],e[2])),this.hollowBottomTriagles.push(e),s!==a&&(e=[a,s,this.vertexMatrix[0][o]],this.faces.push(new h.Face3(e[0],e[1],e[2])),this.hollowBottomTriagles.push(e)),s=a}},t.prototype._buildEndFaces=function(e,t,r,i){for(var n=1;n<r;n++)a.GeometryGenerationHelpers.makeFace3(this,this.vertexMatrix[t][n-1],e,this.vertexMatrix[t][n],i),n+1==r&&a.GeometryGenerationHelpers.makeFace3(this,this.vertexMatrix[t][n],e,this.vertexMatrix[t][0],i)},t.prototype.__makeBackFrontFaces=function(){for(var e=1;e+1<this.flatSidePolygon.vertices.length;e++)a.GeometryGenerationHelpers.makeFace4(this,this.leftFlatIndices[e],this.leftFlatIndices[e-1],this.rightFlatIndices[e],this.rightFlatIndices[e-1])},t.prototype._buildUVMapping=function(e){for(var t=e.baseShape,r=e.outlineSegmentCount,i=t.vertices.length,n=Boolean(e.closeTop),s=Boolean(e.closeBottom),l=Boolean(e.makeHollow),h=1;h<r;h++)for(var d=1;d<t.vertices.length;d++)a.GeometryGenerationHelpers.addCylindricUV4(this,h,d-1,h-1,d,r,i,l),d+1==t.vertices.length&&a.GeometryGenerationHelpers.addCylindricUV4(this,h,d-1,h-1,d,r,i,l);if(l){for(d=0;d<this.leftFlatTriangleIndices.length;d++){var u=this.leftFlatTriangleIndices[d][0],p=this.leftFlatTriangleIndices[d][1],m=this.leftFlatTriangleIndices[d][2];c.UVHelpers.makeFlatTriangleUVs(this,this.flatSideBounds,u,p,m)}for(d=0;d<this.rightFlatTriangleIndices.length;d++){var f=this.rightFlatTriangleIndices[d][0],v=this.rightFlatTriangleIndices[d][2],g=this.rightFlatTriangleIndices[d][1];c.UVHelpers.makeFlatTriangleUVs(this,this.flatSideBounds,f,v,g)}for(d=1;d+1<this.flatSidePolygon.vertices.length;d++){var y=(d-1)/(this.flatSidePolygon.vertices.length-1),_=d/(this.flatSidePolygon.vertices.length-1);this.faceVertexUvs[0].push([new o.Vector2(0,_),new o.Vector2(0,y),new o.Vector2(1,_)]),this.faceVertexUvs[0].push([new o.Vector2(0,y),new o.Vector2(1,y),new o.Vector2(1,_)])}}if(s)if(l)c.UVHelpers.makeHollowBottomUVs(this,this.hollowBottomEdgeVertIndices,this.hollowBottomTriagles);else for(d=1;d<i;d++)a.GeometryGenerationHelpers.addPyramidalBaseUV3(this,d-1,i),d+1==i&&a.GeometryGenerationHelpers.addPyramidalBaseUV3(this,d-1,i);if(n){var E=r-1;for(d=1;d<i;d++)a.GeometryGenerationHelpers.addPyramidalBaseUV3(this,d-1,i),d+1==i&&a.GeometryGenerationHelpers.addPyramidalBaseUV3(this,E,i)}this.uvsNeedUpdate=!0},t.prototype.addFace4ByIndices=function(e,t,r,i,n){a.GeometryGenerationHelpers.makeFace4(this,this.vertexMatrix[e][t],this.vertexMatrix[r][t],this.vertexMatrix[e][i],this.vertexMatrix[r][i],n)},t.prototype._buildVertices=function(e){for(var t=e.baseShape,r=e.outline,i=e.outlineSegmentCount,n=Boolean(e.makeHollow),s=e.bendAngle/180*Math.PI,o=e.hollowStrengthX,a=e.twistAngle*d.DEG_TO_RAD,l=Boolean(e.normalizePerpendiculars),c=void 0!==e.normalsLength?e.normalsLength:10,h=r.getBounds(),u=h.height,p=t.getBounds(),m=p.getCenter(),f=u/s,v=e.isBending&&!isNaN(f)&&f!==Number.POSITIVE_INFINITY&&f!==Number.NEGATIVE_INFINITY&&Math.abs(s)>.01,g=0;g<i;g++){var y=Math.min(1,Math.max(0,g/(i-1)));this.vertexMatrix[g]=[];var _=r.getPointAt(y),E=r.getPerpendicularAt(y),w=(h.max.y-_.y)/u,I=g/(i-1);this.__buildSlice(t,h,_,g,w,v,s,f,a*I),this.__buildSpine(m,h,_,w,v,s,f),this.__buildPerps(t,h,_,E,w,v,s,f,l,c)}var S=this._getTopVertex(h,v,s,f),P=this._getBottomVertex(h);this.topIndex=this.vertices.length,this.vertices.push(S),this.bottomIndex=this.vertices.length,this.vertices.push(P),n&&this.__makeFlatSideVertices(Math.max(p.width,p.height)/2+o)},t.prototype.__applyBumpmap=function(e){},t}(h.Gmetry);t.DildoGeometry=u},498:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DildoMaterials=void 0;var i,n,s=r(232);t.DildoMaterials=(i=new Map,n={createMainMaterial:function(e,t,r,i){return e?new s.MeshLambertMaterial({color:16777215,wireframe:t,depthTest:!0,opacity:1,side:i,visible:!0,emissive:0,reflectivity:1,refractionRatio:.89,map:n.loadTextureImage(r)}):new s.MeshPhongMaterial({color:3684607,wireframe:t,flatShading:!1,depthTest:!0,opacity:1,side:i,visible:!0,emissive:0,reflectivity:1,refractionRatio:.89,map:null})},createSliceMaterial:function(e,t,r){return t?new s.MeshBasicMaterial({wireframe:!0}):new s.MeshLambertMaterial({color:e?8947848:169363624,wireframe:!1,depthTest:!0,opacity:1,side:s.DoubleSide,visible:!0,emissive:0,reflectivity:1,refractionRatio:.89,map:e?n.loadTextureImage(r):null,vertexColors:!1})},loadTextureImage:function(e){var t=i.get(e);return t||(t=(new s.TextureLoader).load(e),i.set(e,t)),t}})},787:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GeometryGenerationHelpers=void 0;var i=r(232),n=r(11),s=r(814),o=r(309),a=r(834),l=r(659),c=r(686),h=r(280),d=r(507);t.GeometryGenerationHelpers={makeFace3:function(e,t,r,i,n){n?e.faces.push(new c.Face3(i,r,t)):e.faces.push(new c.Face3(t,r,i))},makeFace4:function(e,r,i,n,s,o){o?(t.GeometryGenerationHelpers.makeFace3(e,r,n,i,!1),t.GeometryGenerationHelpers.makeFace3(e,n,s,i,!1)):(t.GeometryGenerationHelpers.makeFace3(e,r,i,n,!1),t.GeometryGenerationHelpers.makeFace3(e,i,s,n,!1))},addCylindricUV4:function(e,t,r,n,s,o,a,l){l?(e.faceVertexUvs[0].push([new i.Vector2(t/o,r/a),new i.Vector2(t/o,s/a),new i.Vector2(n/o,r/a)]),e.faceVertexUvs[0].push([new i.Vector2(t/o,s/a),new i.Vector2(n/o,s/a),new i.Vector2(n/o,r/a)])):(e.faceVertexUvs[0].push([new i.Vector2(t/o,r/a),new i.Vector2(n/o,r/a),new i.Vector2(t/o,s/a)]),e.faceVertexUvs[0].push([new i.Vector2(n/o,r/a),new i.Vector2(n/o,s/a),new i.Vector2(t/o,s/a)]))},addPyramidalBaseUV3:function(e,t,r){var n=1-2*Math.abs(.5-t/r),s=1-2*Math.abs(.5-(t+1)/r);e.faceVertexUvs[0].push([new i.Vector2(n,0),new i.Vector2(.5,1),new i.Vector2(s,0)])},flattenVert2dArray:function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].x,e[r].y);return t},mkCircularPolygon:function(e,t,r){void 0===r&&(r=1);for(var i,n=[],o=0;o<t;o++)i=2*Math.PI*(o/t),n.push(new s.Vertex(Math.cos(i)*e*r,Math.sin(i)*e));return new s.Polygon(n,!1)},makeSlice:function(e,t){var r=(0,o.sliceGeometry)(e,t,!1);return r.mergeVertices(),r.computeFaceNormals(),r},makeAndAddPlaneIntersection:function(e,r,s,o,h,d){var u=(new a.PlaneMeshIntersection).getIntersectionPoints(r,s,o,h),p=(0,l.clearDuplicateVertices3)(u,1e-6),m=t.GeometryGenerationHelpers.verticesToBufferGeometry(p),f=new i.PointsMaterial({size:1.4,color:65535}),v=new i.Points(m,f);d.showSplitShape&&(v.position.y=-100,v.position.z=-50,e.addMesh(v));for(var g=t.GeometryGenerationHelpers.flattenVert2dArray(p),y=(0,n.earcut)(g),_=new c.Gmetry,E=0;E<p.length;E++)_.vertices.push(p[E].clone());for(E=0;E+2<y.length;E+=3){var w=y[E],I=y[E+1],S=y[E+2];t.GeometryGenerationHelpers.makeFace3(_,w,I,S)}if(d.addRawIntersectionTriangleMesh){var P=new i.Mesh(_.toBufferGeometry(),new i.LineBasicMaterial({color:16746496}));P.position.y=-100,P.position.z=-50,e.addMesh(P)}return d.addPrecalculatedMassiveFaces&&t.GeometryGenerationHelpers.makeAndAddMassivePlaneIntersection(e,s),d.addPrecalculatedHollowFaces&&t.GeometryGenerationHelpers.makeAndAddHollowPlaneIntersection(e,s),p},makeAndAddMassivePlaneIntersection:function(e,r){var s=r.getPerpendicularPathVertices(!0,!0),o=new c.Gmetry;o.vertices=s;for(var a=new i.MeshBasicMaterial({wireframe:!1,color:16711680,opacity:.5,side:i.DoubleSide,transparent:!0}),l=t.GeometryGenerationHelpers.flattenVert2dArray(s),h=(0,n.earcut)(l),d=0;d+2<h.length;d+=3){var u=h[d],p=h[d+1],m=h[d+2];t.GeometryGenerationHelpers.makeFace3(o,u,p,m)}var f=new i.Mesh(o.toBufferGeometry(),a);f.position.y=-100,f.position.z=50,f.userData.isExportable=!1,e.addMesh(f)},makeAndAddHollowPlaneIntersection:function(e,t){for(var r=new c.Gmetry,n=t.getPerpendicularHullLines(),s=0;s<n.length;s++){var o=n[s].start,a=n[s].end;r.vertices.push(o,a);var l=r.vertices.length;s>0&&(r.faces.push(new c.Face3(l-4,l-2,l-3)),r.faces.push(new c.Face3(l-3,l-2,l-1)))}var h=new i.MeshBasicMaterial({wireframe:!1,color:16711680,opacity:.5,side:i.DoubleSide,transparent:!0}),d=new i.Mesh(r.toBufferGeometry(),h);d.position.y=-100,d.position.z=-50,d.userData.isExportable=!1,e.addMesh(d)},addSpine:function(e,t){var r=new i.LineSegments(t.toBufferGeometry(),new i.LineBasicMaterial({color:16746496}));r.position.y=-100,e.addMesh(r)},addPerpendicularPaths:function(e,r){t.GeometryGenerationHelpers.addPerpendicularPath(e,r.outerPerpLines,16711680),t.GeometryGenerationHelpers.addPerpendicularPath(e,r.innerPerpLines,65280)},addPerpendicularPath:function(e,t,r){var n=new c.Gmetry;t.forEach((function(e){n.vertices.push(e.start.clone()),n.vertices.push(e.end.clone())}));var s=new i.LineSegments(n.toBufferGeometry(),new i.LineBasicMaterial({color:r}));s.position.y=-100,e.addMesh(s)},makePlaneTriangulation:function(e,t,r,o){var a=r.reduce((function(e,r){var i=t.vertices[r];return e.push(i.x,i.y),e}),[]),l=(0,n.earcut)(a),u=new c.Gmetry;u.vertices=r.map((function(e){return t.vertices[e]}));for(var p=s.Bounds.computeFromVertices(u.vertices.map((function(e){return new s.Vertex(e.x,e.y)}))),m=0;m<l.length;m+=3){var f=l[m],v=l[m+1],g=l[m+2];u.faces.push(new c.Face3(f,v,g)),h.UVHelpers.makeFlatTriangleUVs(u,p,f,v,g)}u.uvsNeedUpdate=!0,u.buffersNeedUpdate=!0,u.computeVertexNormals();var y=new i.Mesh(u.toBufferGeometry(),new i.MeshBasicMaterial({color:18687,transparent:!0,opacity:.55,side:i.DoubleSide}));return y.position.y=-100,y.userData.isExportable=!1,e.partialResults[d.KEY_PLANE_INTERSECTION_TRIANGULATION]=u,o.showSplitShapeTriangulation&&e.addMesh(y),u},normalizeVectorXY:function(e,t,r){var i=t.x-e.x,n=t.y-e.y,s=r/Math.sqrt(i*i+n*n);t.x=e.x+i*s,t.y=e.y+n*s},normalizeVectorXYZ:function(e,t,r){var i=t.x-e.x,n=t.y-e.y,s=t.z-e.z,o=r/Math.sqrt(i*i+n*n+s*s);t.x=e.x+i*o,t.y=e.y+n*o,t.z=e.z+s*o},removeAllChildNodes:function(e){for(;e.lastChild;)e.removeChild(e.lastChild)},clamp:function(e,t,r){return Math.max(Math.min(e,r),t)},verticesToBufferGeometry:function(e){var t=new i.BufferGeometry,r=new Float32Array(e.reduce((function(e,t){return e.push(t.x,t.y,t.z),e}),[]));return t.setAttribute("position",new i.BufferAttribute(r,3)),t},rotateVert:function(e,t,r,n){var s=new i.Vector3(0,0,1);return e.x-=r,e.y-=n,e.applyAxisAngle(s,t),e.x+=r,e.y+=n,e},rotateVertY:function(e,t,r,n){var s=new i.Vector3(0,1,0);return e.x-=r,e.z-=n,e.applyAxisAngle(s,t),e.x+=r,e.z+=n,e}}},479:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ImageStore=void 0,t.ImageStore=(r=new Map,{getImage:function(e,t){var i=r.get(e);return i||(i=document.createElement("img"),r.set(e,i),i.onload=function(){t(i)},i.setAttribute("src",e)),i},isImageLoaded:function(e){return e.complete&&0!==e.naturalHeight&&void 0!==e.naturalHeight}})},762:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LocalstorageIO=void 0;var r=function(){function e(){}return e.prototype.onPathRestored=function(e,t){var r=localStorage.getItem("bezier_path"),i=localStorage.getItem("bend_angle"),n=localStorage.getItem("twist_angle");r&&e(r,i?Number(i):0,n?Number(n):0),setInterval((function(){var e=t();e.bezierJSON&&localStorage.setItem("bezier_path",e.bezierJSON),e.bendAngle&&localStorage.setItem("bend_angle",e.bendAngle.toString()),e.twistAngle&&localStorage.setItem("twist_angle",e.twistAngle.toString())}),1e4)},e}();t.LocalstorageIO=r},41:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PathFinder=void 0;var i=r(507),n=function(){function e(e){this.visitedVertices=new Set,this.unvisitedVertIndices=new Set,this.numVisitedVertices=0,this.epsilon=void 0!==e&&e>=0?e:i.EPS}return e.prototype.findAllPathsOnMesh=function(e,t){var r=[];this.visitedVertices.clear(),this.unvisitedVertIndices.clear();var i=o(e,t,this.epsilon),n=i.length;for(this.unvisitedVertIndices=new Set(i.map((function(e,t){return t})));this.numVisitedVertices<n;){var s=this.unvisitedVertIndices.values().next().value,a=this.findUnvisitedPaths(e,i,s);r.push(a)}return this.combineAdjacentPaths(r,e)},e.prototype.findUnvisitedPaths=function(e,t,r){var i,n=[r];for(this.visitedVertices.add(r),this.unvisitedVertIndices.delete(r),this.numVisitedVertices++;-1!==(i=this.findAdjacentFace(e,t,r));)n.push(i),this.visitedVertices.add(i),this.unvisitedVertIndices.delete(i),this.numVisitedVertices++,r=i;return n},e.prototype.findAdjacentFace=function(e,t,r){for(var i=e.faces.length,n=0;n<i;n++)if(s(e,n,r))for(var o=0;o<t.length;o++){var a=t[o];if(a!==r&&!this.isVisited(a)){if(!this.isVisited(a)&&s(e,n,a))return a;if(s(e,n,a))return a}}return-1},e.prototype.isVisited=function(e){return this.visitedVertices.has(e)},e.prototype.combineAdjacentPaths=function(e,t){for(var r=[],i=new Set(e.map((function(e,t){return t})));i.size>0;){var n=i.values().next().value;i.delete(n);var s=e[n],o=null;do{!(o=a(e,s[s.length-1],i,t))&&s.length>1&&(s=s.reverse(),o=a(e,s[s.length-1],i,t)),o&&(s=s.concat(o))}while(o);r.push(s)}return r},e}();t.PathFinder=n;var s=function(e,t,r){var i=e.faces[t];return i.a===r||i.b===r||i.c===r},o=function(e,t,r){for(var i=[],n=0;n<t.length;n++){for(var s=t[n],o=-1,a=r,l=0;l<e.vertices.length;l++){var c=e.vertices[l].distanceTo(s);c<=a&&(-1===o||-1!==o&&e.vertices[o].distanceTo(s)>=c&&o>l)&&(o=l,a=c)}-1===o?console.warn("PathFinder.mapVerticesToGeometryIndices could not find a matching geometry vertex for path point "+n+". The final result might be locally broken."):i.push(o)}return i},a=function(e,t,r,i){for(var n=0;n<i.faces.length;n++)if(s(i,n,t))for(var o=0;o<e.length;o++)if(r.has(o)){var a=e[o];if(s(i,n,a[0]))return r.delete(o),a;if(s(i,n,a[a.length-1]))return r.delete(o),a.reverse()}}},834:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PlaneMeshIntersection=void 0;var i=r(232),n=function(){var e=this;this.getIntersectionPoints=function(t,r,n,o){e.pointsOfIntersection=[];var a=new i.Plane,l=s(o),c=l[0],h=l[1],d=l[2];n.localToWorld(e.planePointA.copy(c)),n.localToWorld(e.planePointB.copy(h)),n.localToWorld(e.planePointC.copy(d)),a.setFromCoplanarPoints(e.planePointA,e.planePointB,e.planePointC);var u=e;return r.faces.forEach((function(e){t.localToWorld(u.a.copy(r.vertices[e.a])),t.localToWorld(u.b.copy(r.vertices[e.b])),t.localToWorld(u.c.copy(r.vertices[e.c])),u.lineAB=new i.Line3(u.a,u.b),u.lineBC=new i.Line3(u.b,u.c),u.lineCA=new i.Line3(u.c,u.a),u.__setPointOfIntersection(u.lineAB,a),u.__setPointOfIntersection(u.lineBC,a),u.__setPointOfIntersection(u.lineCA,a)})),e.pointsOfIntersection},this.__setPointOfIntersection=function(t,r){var i=r.intersectLine(t,e.pointOfIntersection);i&&e.pointsOfIntersection.push(i.clone())},this.pointsOfIntersection=[],this.a=new i.Vector3,this.b=new i.Vector3,this.c=new i.Vector3,this.planePointA=new i.Vector3,this.planePointB=new i.Vector3,this.planePointC=new i.Vector3,this.lineAB=new i.Line3,this.lineBC=new i.Line3,this.lineCA=new i.Line3,this.pointOfIntersection=new i.Vector3};t.PlaneMeshIntersection=n;var s=function(e){var t=e.getAttribute("position"),r=(new i.Vector3,new i.Vector3),n=new i.Vector3,s=new i.Vector3;return r.fromBufferAttribute(t,0),n.fromBufferAttribute(t,1),s.fromBufferAttribute(t,2),[r,n,s]}},280:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UVHelpers=void 0;var i=r(232),n=r(814);t.UVHelpers={makeFlatTriangleUVs:function(e,t,r,n,s){var o=e.vertices[r],a=e.vertices[n],l=e.vertices[s],c=function(e){return new i.Vector2((e.x-t.min.x)/t.width,(e.y-t.min.y)/t.height)};e.faceVertexUvs[0].push([c(o),c(a),c(l)])},makeHollowBottomUVs:function(e,t,r){for(var s=n.Bounds.computeFromVertices(t.map((function(t){return new n.Vertex(e.vertices[t].x,e.vertices[t].z)}))),o=function(e){return new i.Vector2((e.x-s.min.x)/s.width,(e.z-s.min.y)/s.height)},a=0;a<r.length;a++){var l=e.vertices[r[a][0]],c=e.vertices[r[a][1]],h=e.vertices[r[a][2]];e.faceVertexUvs[0].push([o(l),o(c),o(h)])}}}},659:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clearDuplicateVertices3=void 0;t.clearDuplicateVertices3=function(e,t){void 0===t&&(t=1e-6);for(var i=[],n=0;n<e.length;n++)r(e,e[n],n+1,t)||i.push(e[n]);return i};var r=function(e,t,r,i){for(var n=r;n<e.length;n++)if(s=e[n],o=t,a=i,s.distanceTo(o)<a)return!0;var s,o,a;return!1}},224:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.computeVertexNormals=void 0;var i=r(232);t.computeVertexNormals=function(e,t){for(var r=t.getAttribute("normal"),o=Array(e.faces.length),a=0;a<e.faces.length;a++){var l=e.faces[a],c=new i.Vector3(r.array[9*a+0],r.array[9*a+1],r.array[9*a+2]),h=new i.Vector3(r.array[9*a+3],r.array[9*a+4],r.array[9*a+5]),d=new i.Vector3(r.array[9*a+6],r.array[9*a+7],r.array[9*a+8]);n(o,l.a,c),n(o,l.b,h),n(o,l.c,d)}for(var u=new Array(e.vertices.length),p=0;p<e.vertices.length;p++){var m=s(o[p]);m.add(e.vertices[p]),u[p]=new i.Line3(e.vertices[p],m)}return u};var n=function(e,t,r){(t>=e.length||void 0===e[t])&&(e[t]=[]),e[t].push(r)},s=function(e){var t=new i.Vector3(0,0,0);return e&&(e.forEach((function(e){t.add(e)})),t.divideScalar(e.length)),t}},507:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KEY_SLICED_MESH_LEFT=t.KEY_SLICED_MESH_RIGHT=t.KEY_SPLIT_TRIANGULATION_GEOMETRIES=t.KEY_PLANE_INTERSECTION_TRIANGULATION=t.KEY_PLANE_INTERSECTION_POINTS=t.KEY_SPLIT_PANE_MESH=t.KEY_RIGHT_SLICE_PLANE=t.KEY_LEFT_SLICE_PLANE=t.KEY_RIGHT_SLICE_GEOMETRY=t.KEY_LEFT_SLICE_GEOMETRY=t.SPLIT_MESH_OFFSET=t.DEG_TO_RAD=t.EPS=void 0,t.EPS=1e-6,t.DEG_TO_RAD=Math.PI/180,t.SPLIT_MESH_OFFSET={x:0,y:-100,z:-50},t.KEY_LEFT_SLICE_GEOMETRY="KEY_LEFT_SLICE_GEOMETRY",t.KEY_RIGHT_SLICE_GEOMETRY="KEY_RIGHT_SLICE_GEOMETRY",t.KEY_LEFT_SLICE_PLANE="KEY_LEFT_SLICE_PLANE",t.KEY_RIGHT_SLICE_PLANE="KEY_RIGHT_SLICE_PLANE",t.KEY_SPLIT_PANE_MESH="KEY_SPLIT_PANE_MESH",t.KEY_PLANE_INTERSECTION_POINTS="KEY_PLANE_INTERSECTION_POINTS",t.KEY_PLANE_INTERSECTION_TRIANGULATION="KEY_PLANE_INTERSECTION_TRIANGULATION",t.KEY_SPLIT_TRIANGULATION_GEOMETRIES="KEY_SPLIT_TRIANGULATION_GEOMETRIES",t.KEY_SLICED_MESH_RIGHT="KEY_SLICED_MESH_RIGHT",t.KEY_SLICED_MESH_LEFT="KEY_SLICED_MESH_LEFT"},555:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_BEZIER_JSON=void 0,t.DEFAULT_BEZIER_JSON='\n  [\n    {\n       "startPoint":[\n          -122,\n          77.80736634304651\n       ],\n       "endPoint":[\n          -65.59022229786551,\n          21.46778533702511\n       ],\n       "startControlPoint":[\n          -121.62058129515852,\n          25.08908859418696\n       ],\n       "endControlPoint":[\n          -79.33419353770395,\n          48.71529293460728\n       ]\n    },\n    {\n       "startPoint":[\n          -65.59022229786551,\n          21.46778533702511\n       ],\n       "endPoint":[\n          -65.66917273472913,\n          -149.23537680826058\n       ],\n       "startControlPoint":[\n          -52.448492057756646,\n          -4.585775770903305\n       ],\n       "endControlPoint":[\n          -86.1618869001374,\n          -62.11613821618976\n       ]\n    },\n    {\n       "startPoint":[\n          -65.66917273472913,\n          -149.23537680826058\n       ],\n       "endPoint":[\n          -61.86203591980055,\n          -243.8368165606738\n       ],\n       "startControlPoint":[\n          -53.701578771473564,\n          -200.1123697454778\n       ],\n       "endControlPoint":[\n          -69.80704300441666,\n          -205.36451303641783\n       ]\n    },\n    {\n       "startPoint":[\n          -61.86203591980055,\n          -243.8368165606738\n       ],\n       "endPoint":[\n          -21.108966092052256,\n          -323\n       ],\n       "startControlPoint":[\n          -54.08681426887413,\n          -281.486963896856\n       ],\n       "endControlPoint":[\n          -53.05779349623559,\n          -323\n       ]\n    }\n ]\n  '},333:(e,t,r)=>{globalThis.ngdg=r(619)._},444:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isMobileDevice=void 0;t.isMobileDevice=function(){return e=navigator.userAgent||navigator.vendor||window.opera,/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4));var e}},557:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.locateVertexInArray=void 0;t.locateVertexInArray=function(e,t,r){for(var i=Number.POSITIVE_INFINITY,n=-1,s=0;s<e.length;s++){var o=e[s].distanceTo(t);-1===n&&o<i&&o<r&&(n=s,i=o)}return n}},752:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mergeAndMapVertices=t.mergeGeometries=void 0;var i=r(232),n=r(557),s=r(686),o=r(507);t.mergeGeometries=function(e,r,n){void 0===n&&(n=o.EPS);for(var a=(0,t.mergeAndMapVertices)(e,r,n),l=0;l<r.faces.length;l++){var c=r.faces[l],h=a[c.a],d=a[c.b],u=a[c.c];if(e.faces.push(new s.Face3(h,d,u)),r.faceVertexUvs.length>0&&l<r.faceVertexUvs[0].length){var p=r.faceVertexUvs[0][l];e.faceVertexUvs[0].push([p[0].clone(),p[1].clone(),p[2].clone()])}else e.faceVertexUvs[0].push([new i.Vector2(0,0),new i.Vector2(0,1),new i.Vector2(1,.5)])}};t.mergeAndMapVertices=function(e,t,r){for(var i=[],s=0;s<t.vertices.length;s++){var o=t.vertices[s],a=(0,n.locateVertexInArray)(e.vertices,o,r);-1===a?(i.push(e.vertices.length),e.vertices.push(o.clone())):i.push(a)}return i}},619:(e,t,r)=>{t._=void 0;var i=r(555),n=r(479),s=r(615),o=r(762),a=r(444),l=r(507);t._={DEFAULT_BEZIER_JSON:i.DEFAULT_BEZIER_JSON,DEG_TO_RAD:l.DEG_TO_RAD,SPLIT_MESH_OFFSET:l.SPLIT_MESH_OFFSET,KEY_SLICED_MESH_RIGHT:l.KEY_SLICED_MESH_RIGHT,KEY_SLICED_MESH_LEFT:l.KEY_SLICED_MESH_LEFT,LocalstorageIO:o.LocalstorageIO,DildoGeneration:s.DildoGeneration,ImageStore:n.ImageStore,isMobileDevice:a.isMobileDevice}},541:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.randomWebColor=void 0;var i=r(19),n=r(738),s=r(246);t.randomWebColor=function(e,t){if(void 0===e){var r=Math.max(void 0!==i.WebColorsMalachite?i.WebColorsMalachite.length:0,void 0!==n.WebColorsContrast?n.WebColorsContrast.length:0,void 0!==s.WebColors?s.WebColors.length:0);e=Math.round(Math.random()*r)}switch(t){case"Malachite":if(void 0!==i.WebColorsMalachite)return i.WebColorsMalachite[e%i.WebColorsMalachite.length].cssRGB();console.warn("You decided to use the 'WebColorsMalachite' color palette but it is not installed. Falling back.");case"Mixed":if(void 0!==n.WebColorsContrast)return n.WebColorsContrast[e%n.WebColorsContrast.length].cssRGB();console.warn("You decided to use the 'WebColorsContrast' color palette but it is not installed. Falling back.");default:return s.WebColors[e%s.WebColors.length].cssRGB()}}},309:(e,t,r)=>{r.r(t),r.d(t,{BACK:()=>n,FACE_KEYS:()=>o,FRONT:()=>i,GeometryBuilder:()=>v,ON:()=>s,facesFromEdges:()=>a,sliceGeometry:()=>g});const i="front",n="back",s="on",o=["a","b","c"],a=e=>l(e).filter(m).map((function(e){return e.map((function(e){return e[0]}))})),l=e=>{let t=!0;for(var r=e.map((e=>[e]));t;)t=c(r);return r=r.filter((function(e){return e.length}))},c=e=>(e.forEach((function(t,r){e.forEach((function(r,i){if(h(t,r))return delete e[i],!0}))})),!1),h=(e,t)=>e!==t&&(d(e)===u(t)?(e.unshift.apply(e,t),!0):d(e)===d(t)?(p(t),e.unshift.apply(e,t),!0):u(e)===d(t)?(e.push.apply(e,t),!0):u(e)===u(t)&&(p(t),e.push.apply(e,t),!0)),d=e=>e[0][0],u=e=>e[e.length-1][1],p=e=>{e.reverse(),e.forEach((function(e){e.reverse()}))},m=e=>d(e)===u(e)?1:0;var f=r(158);class v{constructor(e,t,r){this.sourceGeometry=e,this.targetGeometry=t,this.slicePlane=r,this.addedVertices=[],this.addedIntersections=[],this.newEdges=[[]]}startFace(e){this.sourceFaceIndex=e,this.sourceFace=this.sourceGeometry.faces[e],this.sourceFaceUvs=this.sourceGeometry.faceVertexUvs[0][e],this.faceIndices=[],this.faceNormals=[],this.faceUvs=[]}endFace(){var e=this.faceIndices.map((function(e,t){return t}));this.addFace(e)}closeHoles(){this.newEdges[0].length&&a(this.newEdges).forEach((e=>{this.faceNormal(e).dot(this.slicePlane.normal)>.5&&e.reverse(),this.startFace(),this.faceIndices=e,this.endFace()}),this)}addVertex(e){this.addUv(e),this.addNormal(e);const t=this.sourceFace[e];let r;if(this.addedVertices.hasOwnProperty(t))r=this.addedVertices[t];else{const e=this.sourceGeometry.vertices[t];this.targetGeometry.vertices.push(e),r=this.targetGeometry.vertices.length-1,this.addedVertices[t]=r}this.faceIndices.push(r)}addIntersection(e,t,r,i){const n=Math.abs(r)/(Math.abs(r)+Math.abs(i));this.addIntersectionUv(e,t,n),this.addIntersectionNormal(e,t,n);const s=this.sourceFace[e],o=this.sourceFace[t],a=this.intersectionId(s,o);let l;if(this.addedIntersections.hasOwnProperty(a))l=this.addedIntersections[a];else{const e=this.sourceGeometry.vertices[s],t=this.sourceGeometry.vertices[o],r=e.clone().lerp(t,n);this.targetGeometry.vertices.push(r),l=this.targetGeometry.vertices.length-1,this.addedIntersections[a]=l}this.faceIndices.push(l),this.updateNewEdges(l)}addUv(e){if(!this.sourceFaceUvs)return;const t=this.keyIndex(e),r=this.sourceFaceUvs[t];this.faceUvs.push(r)}addIntersectionUv(e,t,r){if(!this.sourceFaceUvs)return;const i=this.keyIndex(e),n=this.keyIndex(t),s=this.sourceFaceUvs[i],o=this.sourceFaceUvs[n],a=s.clone().lerp(o,r);this.faceUvs.push(a)}addNormal(e){if(!this.sourceFace.vertexNormals.length)return;const t=this.keyIndex(e),r=this.sourceFace.vertexNormals[t];this.faceNormals.push(r)}addIntersectionNormal(e,t,r){if(!this.sourceFace.vertexNormals.length)return;const i=this.keyIndex(e),n=this.keyIndex(t),s=this.sourceFace.vertexNormals[i],o=this.sourceFace.vertexNormals[n],a=s.clone().lerp(o,r).normalize();this.faceNormals.push(a)}addFace(e){if(3===e.length)return void this.addFacePart(e[0],e[1],e[2]);const t=[];for(var r=0;r<e.length;r++)for(var i=r+1;i<e.length;i++){var n=Math.abs(r-i);n>1&&n<e.length-1&&t.push([e[r],e[i]])}t.sort(((e,t)=>this.faceEdgeLength(e[0],e[1])-this.faceEdgeLength(t[0],t[1])).bind(this));const s=e.indexOf(t[0][0]),o=(e=e.slice(s).concat(e.slice(0,s))).indexOf(t[0][1]),a=e.slice(0,o+1),l=e.slice(o).concat(e.slice(0,1));this.addFace(a),this.addFace(l)}addFacePart(e,t,r){let i=null;this.faceNormals.length&&(i=[this.faceNormals[e],this.faceNormals[t],this.faceNormals[r]]);const n=new f.G_(this.faceIndices[e],this.faceIndices[t],this.faceIndices[r],i);this.targetGeometry.faces.push(n),this.sourceFaceUvs&&this.targetGeometry.faceVertexUvs[0].push([this.faceUvs[e],this.faceUvs[t],this.faceUvs[r]])}faceEdgeLength(e,t){const r=this.faceIndices[e],i=this.faceIndices[t],n=this.targetGeometry.vertices[r],s=this.targetGeometry.vertices[i];return n.distanceToSquared(s)}intersectionId(e,t){return[e,t].sort().join(",")}keyIndex(e){return o.indexOf(e)}updateNewEdges(e){const t=this.newEdges.length-1;let r=this.newEdges[t];r.length<2?r.push(e):this.newEdges.push([e])}faceNormal(e){const t=e.map((e=>this.targetGeometry.vertices[e]).bind(this)),r=t[0].clone().sub(t[1]),i=t[0].clone().sub(t[2]);return r.cross(i).normalize()}}const g=(e,t,r)=>{const a=new f.P5,l=new v(e,a,t),c=[],h=[];return e.vertices.forEach((e=>{const r=_(e,t),i=y(r);c.push(r),h.push(i)})),e.faces.forEach((function(e,t){const r=o.map((function(t){return h[e[t]]}));if(-1===r.indexOf(i)&&-1!==r.indexOf(n))return;l.startFace(t);let a=o[o.length-1],d=e[a],u=c[d],p=h[d];o.map((t=>{var r=e[t],o=c[r],m=h[r];m===i&&(p===n?(l.addIntersection(a,t,u,o),l.addVertex(t)):l.addVertex(t)),m===s&&l.addVertex(t),m===n&&p===i&&l.addIntersection(a,t,u,o),a=t,d=r,p=m,u=o})),l.endFace()})),r&&l.closeHoles(),a},y=e=>e<0?n:e>0?i:s,_=(e,t)=>t.distanceToPoint(e)}},r={};function i(e){var n=r[e];if(void 0!==n)return n.exports;var s=r[e]={exports:{}};return t[e].call(s.exports,s,s.exports,i),s.exports}i.m=t,e=[],i.O=(t,r,n,s)=>{if(!r){var o=1/0;for(h=0;h<e.length;h++){for(var[r,n,s]=e[h],a=!0,l=0;l<r.length;l++)(!1&s||o>=s)&&Object.keys(i.O).every((e=>i.O[e](r[l])))?r.splice(l--,1):(a=!1,s<o&&(o=s));if(a){e.splice(h--,1);var c=n();void 0!==c&&(t=c)}}return t}s=s||0;for(var h=e.length;h>0&&e[h-1][2]>s;h--)e[h]=e[h-1];e[h]=[r,n,s]},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={179:0};i.O.j=t=>0===e[t];var t=(t,r)=>{var n,s,[o,a,l]=r,c=0;if(o.some((t=>0!==e[t]))){for(n in a)i.o(a,n)&&(i.m[n]=a[n]);if(l)var h=l(i)}for(t&&t(r);c<o.length;c++)s=o[c],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return i.O(h)},r=self.webpackChunkngdg=self.webpackChunkngdg||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var n=i.O(void 0,[736],(()=>i(333)));n=i.O(n)})();
//# sourceMappingURL=ngdg-main.min.js.map
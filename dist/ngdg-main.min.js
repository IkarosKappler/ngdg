(()=>{"use strict";var e,t={481:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BumpMapper=void 0;var i=r(212),n=r(224),a=r(787);t.BumpMapper={applyBumpmap:function(e,t,r,s,o){var l=(0,n.computeVertexNormals)(e,t),c=new i.Geometry;c.vertices=l.map((function(e){var t=e.end.clone();return a.GeometryGenerationHelpers.normalizeVectorXYZ(e.start,t,o.bumpmapStrength),t}));var h=new i.Points(c,new i.PointsMaterial({size:1.4,color:65535})),u=null;if(console.log("options.useBumpmap",o.useBumpmap,"bumpmap",r),o.useBumpmap&&r){for(var d=0;d<e.vertexMatrix.length;d++)for(var p=0;p<e.vertexMatrix[d].length;p++){var v=e.vertexMatrix[d][p],f=e.vertices[v],m=1-d/(e.vertexMatrix.length-1),x=p/(e.vertexMatrix[d].length-1),y=r.getHeightAt(x,m),g=c.vertices[v];f.lerp(g,y)}(t=(new i.BufferGeometry).fromGeometry(e)).computeVertexNormals(),u=new i.Mesh(t,s)}return{dildoMesh:u,dildoNormalsMesh:h}}}},615:(e,t,r)=>{t.n=void 0;var i=r(212),n=r(718),a=r(938),s=r(498),o=r(787),l=r(752),c=r(41),h=r(541),u=r(507),d=r(481),p=function(){function e(e,t){this.canvas=document.getElementById(e),this.parent=this.canvas.parentElement,this.scene=new i.Scene,this.camera=new i.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e4),this.camera.position.z=500;this.ambientLightA=new i.AmbientLight(4473924),this.ambientLightA.position.set(350,0,-350).multiplyScalar(50),this.scene.add(this.ambientLightA),this.ambientLightB=new i.PointLight(16777215,5,3500,.5),this.ambientLightB.position.set(-350,0,350).multiplyScalar(10),this.scene.add(this.ambientLightB),this.directionalLightA=new i.DirectionalLight(16777215,2),this.directionalLightA.position.set(350,350,350).multiplyScalar(10),this.scene.add(this.directionalLightA),this.scene.add(this.directionalLightA.target),this.directionalLightB=new i.DirectionalLight(16777215,2),this.directionalLightB.position.set(-350,-350,-50).multiplyScalar(10),this.scene.add(this.directionalLightB),this.renderer=new i.WebGLRenderer({canvas:this.canvas,preserveDrawingBuffer:!0,antialias:!0}),this.controls=t.makeOrbitControls(this.camera,this.renderer.domElement),this.controls.update(),this.geometries=[],this.partialResults={};var r=this;window.addEventListener("resize",(function(){r.resizeCanvas()})),this.resizeCanvas();var n=function(){requestAnimationFrame(n),r.controls.update(),r.renderer.render(r.scene,r.camera)};n()}return e.prototype.resizeCanvas=function(){var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;this.canvas.width=e,this.canvas.height=t,this.canvas.style.width=e+"px",this.canvas.style.height=t+"px",this.canvas.setAttribute("width",e+"px"),this.canvas.setAttribute("height",t+"px"),this.renderer.setSize(e,t),this.camera.setViewOffset(e,t,e/4,t/20,e,t)},e.prototype.rebuild=function(e){this.removeCachedGeometries();var t=e.outline.getBounds().width,r=o.GeometryGenerationHelpers.mkCircularPolygon(t,e.shapeSegmentCount,e.baseShapeExcentricity),l=void 0!==e.useBumpmap&&e.useBumpmap&&e.bumpmap?e.bumpmap:null,c=new a.DildoGeometry(Object.assign({baseShape:r},e)),h=e.useTextureImage&&void 0!==e.textureImagePath,u=void 0!==e.textureImagePath?e.textureImagePath:null,p="double"===e.renderFaces?i.DoubleSide:"back"===e.renderFaces?i.BackSide:i.FrontSide,v=void 0!==e.wireframe&&e.wireframe,f=s.DildoMaterials.createMainMaterial(h,v,u,p),m=(new i.BufferGeometry).fromGeometry(c);m.computeVertexNormals();var x=new i.Mesh(m,f);this.camera.lookAt(new i.Vector3(20,0,150)),this.camera.lookAt(x.position);var y=new i.Geometry;if(c.spineVertices.forEach((function(e){y.vertices.push(e.clone())})),e.addSpine&&o.GeometryGenerationHelpers.addSpine(this,y),e.showBasicPerpendiculars&&o.GeometryGenerationHelpers.addPerpendicularPaths(this,c),e.useBumpmap){var g=d.BumpMapper.applyBumpmap(c,m,l,f,e),_=g.dildoMesh,E=g.dildoNormalsMesh;x=_,e.showBumpmapTargets&&(E.position.y=-100,this.addMesh(E))}if(e.performSlice)this.__performPlaneSlice(x,c,v,h,u,e);else if(x.position.y=-100,x.userData.isExportable=!0,this.addMesh(x),e.showNormals){var I=new n.VertexNormalsHelper(x,e.normalsLength,65280);this.scene.add(I),this.geometries.push(I)}},e.prototype.__performPlaneSlice=function(e,t,r,a,d,p){var v=new i.Plane(new i.Vector3(0,0,1),0),f=o.GeometryGenerationHelpers.makeSlice(t,v),m=new i.Plane(new i.Vector3(0,0,-1),0),x=o.GeometryGenerationHelpers.makeSlice(t,m),y=s.DildoMaterials.createSliceMaterial(a,r,d),g=new i.PlaneGeometry(300,500),_=new i.Mesh(g,new i.MeshBasicMaterial({color:4737096,transparent:!0,opacity:.35,side:i.DoubleSide}));_.rotation.x=Math.PI/5,this.partialResults[u.KEY_SPLIT_PANE_MESH]=_,p.showSplitPane&&(_.position.z=.5,this.addMesh(_));for(var E=o.GeometryGenerationHelpers.makeAndAddPlaneIntersection(this,e,t,_,g,p),I=(new c.PathFinder).findAllPathsOnMesh(f,E),w=0;w<I.length;w++){var P=new i.Geometry;P.vertices=I[w].map((function(e){return f.vertices[e]}));var b=new i.Line(P,new i.LineBasicMaterial({color:(0,h.randomWebColor)(G,"Mixed")}));b.position.y=-100,this.addMesh(b)}if(p.addPrecalculatedShapeOutlines){var M=new i.Geometry;M.vertices=E;var T=new i.Line(M,new i.LineBasicMaterial({color:8913064}));T.position.y=-100,T.position.z=-50,this.addMesh(T)}for(var V=[],G=0;G<I.length;G++){var S=o.GeometryGenerationHelpers.makePlaneTriangulation(this,f,I[G],p);V.push(S),p.closeCutAreas&&((0,l.mergeGeometries)(f,S,u.EPS),(0,l.mergeGeometries)(x,S,u.EPS))}if(p.showLeftSplit){f.uvsNeedUpdate=!0,f.buffersNeedUpdate=!0,f.computeVertexNormals();var L=new i.Mesh(f,y);if(L.position.y=-100,L.position.z=-50,L.userData.isExportable=!0,this.addMesh(L),p.showNormals){var F=new n.VertexNormalsHelper(L,p.normalsLength,65280);this.scene.add(F),this.geometries.push(F)}}if(p.showRightSplit){x.uvsNeedUpdate=!0,x.buffersNeedUpdate=!0,x.computeVertexNormals();var N=new i.Mesh(x,y);if(N.position.y=-100,N.position.z=50,N.userData.isExportable=!0,this.addMesh(N),p.showNormals){F=new n.VertexNormalsHelper(N,p.normalsLength,65280);this.scene.add(F),this.geometries.push(F)}}this.partialResults[u.KEY_LEFT_SLICE_PLANE]=v,this.partialResults[u.KEY_LEFT_SLICE_GEOMETRY]=f,this.partialResults[u.KEY_RIGHT_SLICE_PLANE]=m,this.partialResults[u.KEY_RIGHT_SLICE_GEOMETRY]=x,this.partialResults[u.KEY_PLANE_INTERSECTION_POINTS]=E,this.partialResults[u.KEY_SPLIT_TRIANGULATION_GEOMETRIES]=V},e.prototype.addMesh=function(e){e.rotation.x=Math.PI,this.scene.add(e),this.geometries.push(e)},e.prototype.removeCachedGeometries=function(){for(var e=0;e<this.geometries.length;e++){var t=this.geometries[e];this.scene.remove(t),t instanceof i.Mesh&&(t.geometry.dispose(),t.material.dispose())}this.geometries=[]},e.prototype.generateSTL=function(e,t){var r=[];for(var i in this.geometries)if(!0===this.geometries[i].userData.isExportable){var n=t.parse(this.geometries[i]);r.push(n)}"function"==typeof e.onComplete?e.onComplete(r.join("\n\n")):console.warn("STL data was generated but no 'onComplete' callback was defined.")},e}();t.n=p},938:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.DildoGeometry=t.DildoBaseClass=void 0;var a=r(739),s=r(212),o=r(787),l=r(175),c=r(280),h=Math.PI/180,u=function(){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]]};t.DildoBaseClass=u;var d=function(e){function t(t){var r=e.call(this)||this;return s.Geometry.call(r),r.vertexMatrix=[],r.topIndex=-1,r.bottomIndex=-1,r.spineVertices=[],r.outerPerpLines=[],r.innerPerpLines=[],r.flatSidePolygon=null,r.leftFlatIndices=[],r.rightFlatIndices=[],r.leftFlatTriangleIndices=[],r.rightFlatTriangleIndices=[],r.flatSideBounds=null,r.hollowBottomEdgeVertIndices=[],r.hollowBottomTriagles=[],r.dildoNormals=[],r._buildVertices(t),r._buildFaces(t),r._buildUVMapping(t),t.useBumpmap&&(t.bumpmapTexture?r.__applyBumpmap(t.bumpmapTexture):console.warn("Cannot apply bumpmap as desired, because the bumpmap texture is null or undefined.")),r}return n(t,e),t.prototype.__buildSlice=function(e,t,r,i,n,a,o,l,c){for(var h=(t.max.x-r.x)/t.width,u=0;u<e.vertices.length;u++){var d=e.vertices[u];if(a){var p=new s.Vector3(d.x*h,0,d.y*h);v(p,c,0,0),this._bendVertex(p,o,l,n),p.y+=t.max.y}else{p=new s.Vector3(d.x*h,r.y,d.y*h);v(p,c,0,0)}this.vertexMatrix[i][u]=this.vertices.length,this.vertices.push(p),0==i&&(0==u&&p.y,u+1==e.vertices.length&&p.y)}},t.prototype.__buildSpine=function(e,t,r,i,n,a,o){var l=(t.max.x-r.x)/t.width,c=e.clone();if(n){var h=new s.Vector3(c.x*l,0,c.y*l);this._bendVertex(h,a,o,i),h.y+=t.max.y}else h=new s.Vector3(c.x*l,r.y,c.y*l);this.spineVertices.push(h)},t.prototype.__buildPerps=function(e,t,r,i,n,a,l,c,h,u){for(var d=(t.max.x-r.x)/t.width,v=[0,Math.floor(e.vertices.length/2)],f=0;f<v.length;f++){var m=v[f],x=e.vertices[m];if(a){var y=new s.Vector3(x.x*d,0,x.y*d);this._bendVertex(y,l,c,n),y.y+=t.max.y}else y=new s.Vector3(x.x*d,r.y,x.y*d);var g=new s.Vector3(r.x-i.x,r.y-i.y,0);if(0==m)var _=new s.Vector3(y.x-i.x,y.y+i.y,0);else _=new s.Vector3(y.x+i.x,y.y+i.y,0);p(_,l*n,y.x,y.y);var E=y.clone();E.x+=g.x,E.y+=g.y,E.z+=g.z,h&&o.GeometryGenerationHelpers.normalizeVectorXY(y,_,u),0==m?this.outerPerpLines.push(new s.Line3(y,_)):this.innerPerpLines.push(new s.Line3(y,_))}},t.prototype.__makeFlatSideVertices=function(e){this.flatSidePolygon=new a.Polygon(this.getPerpendicularPathVertices(!0),!1),this.flatSideBounds=this.flatSidePolygon.getBounds();for(var t=0;t<this.flatSidePolygon.vertices.length;t++){var r=this.vertices.length;this.leftFlatIndices.push(r),this.vertices.push(new s.Vector3(this.flatSidePolygon.vertices[t].x,this.flatSidePolygon.vertices[t].y,e)),0!==t&&t+1!==this.flatSidePolygon.vertices.length&&t+2!==this.flatSidePolygon.vertices.length||this.hollowBottomEdgeVertIndices.push(r)}for(t=0;t<this.flatSidePolygon.vertices.length;t++){r=this.vertices.length;this.rightFlatIndices.push(r),this.vertices.push(new s.Vector3(this.flatSidePolygon.vertices[t].x,this.flatSidePolygon.vertices[t].y,-e)),0!==t&&t+1!==this.flatSidePolygon.vertices.length&&t+2!==this.flatSidePolygon.vertices.length||this.hollowBottomEdgeVertIndices.push(r)}},t.prototype.__makeFlatSideFaces=function(){for(var e=this,t=this.leftFlatIndices.map((function(t){return e.vertices[t]})),r=o.GeometryGenerationHelpers.flattenVert2dArray(t),i=(0,l.earcut)(r),n=0;n+2<i.length;n+=3){var a=i[n],s=i[n+1],c=i[n+2];o.GeometryGenerationHelpers.makeFace3(this,this.leftFlatIndices[a],this.leftFlatIndices[s],this.leftFlatIndices[c]),this.leftFlatTriangleIndices.push([this.leftFlatIndices[a],this.leftFlatIndices[s],this.leftFlatIndices[c]])}for(n=0;n+2<i.length;n+=3){a=i[n],s=i[n+1],c=i[n+2];o.GeometryGenerationHelpers.makeFace3(this,this.rightFlatIndices[a],this.rightFlatIndices[c],this.rightFlatIndices[s]),this.rightFlatTriangleIndices.push([this.rightFlatIndices[a],this.rightFlatIndices[s],this.rightFlatIndices[c]])}},t.prototype.getPerpendicularPathVertices=function(e,t){for(var r=[],i=0;i<this.innerPerpLines.length;i++)r.push(t?this.innerPerpLines[i].start:this.innerPerpLines[i].end);for(i=this.outerPerpLines.length-1;i>=0;i--)r.push(t?this.outerPerpLines[i].start:this.outerPerpLines[i].end);return e&&r.push(this.vertices[this.bottomIndex]),r},t.prototype.getPerpendicularHullLines=function(){for(var e=[],t=0;t<this.innerPerpLines.length;t++)e.push(this.innerPerpLines[t]);for(t=this.outerPerpLines.length-1;t>=0;t--)e.push(this.outerPerpLines[t]);return e},t.prototype._getTopVertex=function(e,t,r,i){if(t){var n=new s.Vector3(0,0,0);return this._bendVertex(n,r,i,1),n.y+=e.max.y,n}return new s.Vector3(0,e.min.y,0)},t.prototype._getBottomVertex=function(e){return new s.Vector3(0,e.max.y,0)},t.prototype._bendVertex=function(e,t,r,i){var n=new s.Vector3(0,0,1),a=t*i;e.x-=r,e.applyAxisAngle(n,a),e.x+=r},t.prototype.applyBumpMap=function(e){for(var t=0;t<this.vertexMatrix.length;t++)for(var r=0;r<this.vertexMatrix[t].length;r++){var i=this.vertexMatrix[t][r];this.vertices[i]}},t.prototype._buildFaces=function(e){var t=e.baseShape,r=e.outlineSegmentCount,i=Boolean(e.closeTop),n=Boolean(e.closeBottom),a=Boolean(e.makeHollow),s=t.vertices.length;this.faceVertexUvs[0]=[];for(var o=0;o<r;o++)for(var l=0;l<s;l++)o>0&&l>0&&(this.addFace4ByIndices(o,l-1,o-1,l,a),l+1==t.vertices.length&&this.addFace4ByIndices(o,l,o-1,0,a));a&&(this.__makeFlatSideFaces(),this.__makeBackFrontFaces()),n&&(a?this._buildHollowBottomFaces():this._buildEndFaces(this.bottomIndex,0,s,!1)),i&&this._buildEndFaces(this.topIndex,this.vertexMatrix.length-1,s,a)},t.prototype._buildHollowBottomFaces=function(){for(var e,t=this,r=this.hollowBottomEdgeVertIndices.map((function(e){return t.vertices[e]})),i=function(e){for(var i,n=0,a=Number.MAX_VALUE,s=0;s<r.length;s++){var o=t.hollowBottomEdgeVertIndices[s];(i=r[s].distanceTo(e))<a&&(n=o,a=i)}return n},n=this.vertexMatrix[0].length,a=i(this.vertices[n-1]),o=0;o<n;o++){var l=i(this.vertices[this.vertexMatrix[0][o]]);e=[a,this.vertexMatrix[0][0==o?n-1:o-1],this.vertexMatrix[0][o]],this.faces.push(new s.Face3(e[0],e[1],e[2])),this.hollowBottomTriagles.push(e),a!==l&&(e=[l,a,this.vertexMatrix[0][o]],this.faces.push(new s.Face3(e[0],e[1],e[2])),this.hollowBottomTriagles.push(e)),a=l}},t.prototype._buildEndFaces=function(e,t,r,i){for(var n=1;n<r;n++)o.GeometryGenerationHelpers.makeFace3(this,this.vertexMatrix[t][n-1],e,this.vertexMatrix[t][n],i),n+1==r&&o.GeometryGenerationHelpers.makeFace3(this,this.vertexMatrix[t][n],e,this.vertexMatrix[t][0],i)},t.prototype.__makeBackFrontFaces=function(){for(var e=1;e+1<this.flatSidePolygon.vertices.length;e++)o.GeometryGenerationHelpers.makeFace4(this,this.leftFlatIndices[e],this.leftFlatIndices[e-1],this.rightFlatIndices[e],this.rightFlatIndices[e-1])},t.prototype._buildUVMapping=function(e){for(var t=e.baseShape,r=e.outlineSegmentCount,i=t.vertices.length,n=Boolean(e.closeTop),a=Boolean(e.closeBottom),l=Boolean(e.makeHollow),h=1;h<r;h++)for(var u=1;u<t.vertices.length;u++)o.GeometryGenerationHelpers.addCylindricUV4(this,h,u-1,h-1,u,r,i,l),u+1==t.vertices.length&&o.GeometryGenerationHelpers.addCylindricUV4(this,h,u-1,h-1,u,r,i,l);if(l){for(u=0;u<this.leftFlatTriangleIndices.length;u++){var d=this.leftFlatTriangleIndices[u][0],p=this.leftFlatTriangleIndices[u][1],v=this.leftFlatTriangleIndices[u][2];c.UVHelpers.makeFlatTriangleUVs(this,this.flatSideBounds,d,p,v)}for(u=0;u<this.rightFlatTriangleIndices.length;u++){var m=this.rightFlatTriangleIndices[u][0],x=this.rightFlatTriangleIndices[u][2],y=this.rightFlatTriangleIndices[u][1];c.UVHelpers.makeFlatTriangleUVs(this,this.flatSideBounds,m,x,y)}for(u=1;u+1<this.flatSidePolygon.vertices.length;u++){var g=(u-1)/(this.flatSidePolygon.vertices.length-1),_=u/(this.flatSidePolygon.vertices.length-1);this.faceVertexUvs[0].push([new s.Vector2(0,_),new s.Vector2(0,g),new s.Vector2(1,_)]),this.faceVertexUvs[0].push([new s.Vector2(0,g),new s.Vector2(1,g),new s.Vector2(1,_)])}}if(a)if(l)f(this,this.hollowBottomEdgeVertIndices,this.hollowBottomTriagles);else for(u=1;u<i;u++)o.GeometryGenerationHelpers.addPyramidalBaseUV3(this,u-1,i),u+1==i&&o.GeometryGenerationHelpers.addPyramidalBaseUV3(this,u-1,i);if(n){var E=r-1;for(u=1;u<i;u++)o.GeometryGenerationHelpers.addPyramidalBaseUV3(this,u-1,i),u+1==i&&o.GeometryGenerationHelpers.addPyramidalBaseUV3(this,E,i)}this.uvsNeedUpdate=!0},t.prototype.addFace4ByIndices=function(e,t,r,i,n){o.GeometryGenerationHelpers.makeFace4(this,this.vertexMatrix[e][t],this.vertexMatrix[r][t],this.vertexMatrix[e][i],this.vertexMatrix[r][i],n)},t.prototype._buildVertices=function(e){for(var t=e.baseShape,r=e.outline,i=e.outlineSegmentCount,n=Boolean(e.makeHollow),a=e.bendAngle/180*Math.PI,s=e.hollowStrengthX,o=e.twistAngle*h,l=Boolean(e.normalizePerpendiculars),c=void 0!==e.normalsLength?e.normalsLength:10,u=r.getBounds(),d=u.height,p=t.getBounds(),v=p.getCenter(),f=d/a,m=e.isBending&&!isNaN(f)&&f!==Number.POSITIVE_INFINITY&&f!==Number.NEGATIVE_INFINITY&&Math.abs(a)>.01,x=0;x<i;x++){var y=Math.min(1,Math.max(0,x/(i-1)));this.vertexMatrix[x]=[];var g=r.getPointAt(y),_=r.getPerpendicularAt(y),E=(u.max.y-g.y)/d,I=x/(i-1);this.__buildSlice(t,u,g,x,E,m,a,f,o*I),this.__buildSpine(v,u,g,E,m,a,f),this.__buildPerps(t,u,g,_,E,m,a,f,l,c)}var w=this._getTopVertex(u,m,a,f),P=this._getBottomVertex(u);this.topIndex=this.vertices.length,this.vertices.push(w),this.bottomIndex=this.vertices.length,this.vertices.push(P),n&&this.__makeFlatSideVertices(Math.max(p.width,p.height)/2+s)},t.prototype.__applyBumpmap=function(e){for(var t=0;t<this.vertexMatrix.length;t++)for(var r=0;r<this.vertexMatrix[t].length;r++);},t}(u);t.DildoGeometry=d;var p=function(e,t,r,i){var n=new s.Vector3(0,0,1);return e.x-=r,e.y-=i,e.applyAxisAngle(n,t),e.x+=r,e.y+=i,e},v=function(e,t,r,i){var n=new s.Vector3(0,1,0);return e.x-=r,e.z-=i,e.applyAxisAngle(n,t),e.x+=r,e.z+=i,e},f=function(e,t,r){for(var i=a.Bounds.computeFromVertices(t.map((function(t){return new a.Vertex(e.vertices[t].x,e.vertices[t].z)}))),n=function(e){return new s.Vector2((e.x-i.min.x)/i.width,(e.z-i.min.y)/i.height)},o=0;o<r.length;o++){var l=e.vertices[r[o][0]],c=e.vertices[r[o][1]],h=e.vertices[r[o][2]];e.faceVertexUvs[0].push([n(l),n(c),n(h)])}}},498:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DildoMaterials=void 0;var i,n,a=r(212);t.DildoMaterials=(i=new Map,n={createMainMaterial:function(e,t,r,i){return e?new a.MeshLambertMaterial({color:16777215,wireframe:t,depthTest:!0,opacity:1,side:i,visible:!0,emissive:0,reflectivity:1,refractionRatio:.89,map:n.loadTextureImage(r)}):new a.MeshPhongMaterial({color:3684607,wireframe:t,flatShading:!1,depthTest:!0,opacity:1,side:i,visible:!0,emissive:0,reflectivity:1,refractionRatio:.89,map:null})},createSliceMaterial:function(e,t,r){return t?new a.MeshBasicMaterial({wireframe:!0}):new a.MeshLambertMaterial({color:e?8947848:169363624,wireframe:!1,depthTest:!0,opacity:1,side:a.DoubleSide,visible:!0,emissive:0,reflectivity:1,refractionRatio:.89,map:e?n.loadTextureImage(r):null,vertexColors:!1})},loadTextureImage:function(e){var t=i.get(e);return t||(t=(new a.TextureLoader).load(e),i.set(e,t)),t}})},787:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GeometryGenerationHelpers=void 0;var i=r(212),n=r(175),a=r(739),s=r(461),o=r(834),l=r(659),c=r(280),h=r(507);t.GeometryGenerationHelpers={makeFace3:function(e,t,r,n,a){a?e.faces.push(new i.Face3(n,r,t)):e.faces.push(new i.Face3(t,r,n))},makeFace4:function(e,r,i,n,a,s){s?(t.GeometryGenerationHelpers.makeFace3(e,r,n,i,!1),t.GeometryGenerationHelpers.makeFace3(e,n,a,i,!1)):(t.GeometryGenerationHelpers.makeFace3(e,r,i,n,!1),t.GeometryGenerationHelpers.makeFace3(e,i,a,n,!1))},addCylindricUV4:function(e,t,r,n,a,s,o,l){l?(e.faceVertexUvs[0].push([new i.Vector2(t/s,r/o),new i.Vector2(t/s,a/o),new i.Vector2(n/s,r/o)]),e.faceVertexUvs[0].push([new i.Vector2(t/s,a/o),new i.Vector2(n/s,a/o),new i.Vector2(n/s,r/o)])):(e.faceVertexUvs[0].push([new i.Vector2(t/s,r/o),new i.Vector2(n/s,r/o),new i.Vector2(t/s,a/o)]),e.faceVertexUvs[0].push([new i.Vector2(n/s,r/o),new i.Vector2(n/s,a/o),new i.Vector2(t/s,a/o)]))},addPyramidalBaseUV3:function(e,t,r){var n=1-2*Math.abs(.5-t/r),a=1-2*Math.abs(.5-(t+1)/r);e.faceVertexUvs[0].push([new i.Vector2(n,0),new i.Vector2(.5,1),new i.Vector2(a,0)])},flattenVert2dArray:function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].x,e[r].y);return t},mkCircularPolygon:function(e,t,r){void 0===r&&(r=1);for(var i,n=[],s=0;s<t;s++)i=2*Math.PI*(s/t),n.push(new a.Vertex(Math.cos(i)*e*r,Math.sin(i)*e));return new a.Polygon(n,!1)},makeSlice:function(e,t){var r=(0,s.sliceGeometry)(e,t,!1);return r.mergeVertices(),r.computeFaceNormals(),r},makeAndAddPlaneIntersection:function(e,r,a,s,c,h){var u=(new o.PlaneMeshIntersection).getIntersectionPoints(r,a,s,c),d=(0,l.clearDuplicateVertices3)(u,1e-6),p=new i.Geometry;p.vertices=d;var v=new i.PointsMaterial({size:1.4,color:65535}),f=new i.Points(p,v);h.showSplitShape&&(f.position.y=-100,f.position.z=-50,e.addMesh(f));for(var m=t.GeometryGenerationHelpers.flattenVert2dArray(d),x=(0,n.earcut)(m),y=new i.Geometry,g=0;g<d.length;g++)y.vertices.push(d[g].clone());for(g=0;g+2<x.length;g+=3){var _=x[g],E=x[g+1],I=x[g+2];t.GeometryGenerationHelpers.makeFace3(y,_,E,I)}if(h.addRawIntersectionTriangleMesh){var w=new i.Mesh(y,new i.LineBasicMaterial({color:16746496}));w.position.y=-100,w.position.z=-50,e.addMesh(w)}return h.addPrecalculatedMassiveFaces&&t.GeometryGenerationHelpers.makeAndAddMassivePlaneIntersection(e,a),h.addPrecalculatedHollowFaces&&t.GeometryGenerationHelpers.makeAndAddHollowPlaneIntersection(e,a),d},makeAndAddMassivePlaneIntersection:function(e,r){var a=r.getPerpendicularPathVertices(!0,!0),s=new i.Geometry;s.vertices=a;for(var o=new i.MeshBasicMaterial({wireframe:!1,color:16711680,opacity:.5,side:i.DoubleSide,transparent:!0}),l=t.GeometryGenerationHelpers.flattenVert2dArray(a),c=(0,n.earcut)(l),h=0;h+2<c.length;h+=3){var u=c[h],d=c[h+1],p=c[h+2];t.GeometryGenerationHelpers.makeFace3(s,u,d,p)}var v=new i.Mesh(s,o);v.position.y=-100,v.position.z=50,v.userData.isExportable=!1,e.addMesh(v)},makeAndAddHollowPlaneIntersection:function(e,t){for(var r=new i.Geometry,n=t.getPerpendicularHullLines(),a=0;a<n.length;a++){var s=n[a].start,o=n[a].end;r.vertices.push(s,o);var l=r.vertices.length;a>0&&(r.faces.push(new i.Face3(l-4,l-2,l-3)),r.faces.push(new i.Face3(l-3,l-2,l-1)))}var c=new i.MeshBasicMaterial({wireframe:!1,color:16711680,opacity:.5,side:i.DoubleSide,transparent:!0}),h=new i.Mesh(r,c);h.position.y=-100,h.position.z=-50,h.userData.isExportable=!1,e.addMesh(h)},addSpine:function(e,t){var r=new i.LineSegments(t,new i.LineBasicMaterial({color:16746496}));r.position.y=-100,e.addMesh(r)},addPerpendicularPaths:function(e,r){t.GeometryGenerationHelpers.addPerpendicularPath(e,r.outerPerpLines,16711680),t.GeometryGenerationHelpers.addPerpendicularPath(e,r.innerPerpLines,65280)},addPerpendicularPath:function(e,t,r){var n=new i.Geometry;t.forEach((function(e){n.vertices.push(e.start.clone()),n.vertices.push(e.end.clone())}));var a=new i.LineSegments(n,new i.LineBasicMaterial({color:r}));a.position.y=-100,e.addMesh(a)},makePlaneTriangulation:function(e,t,r,s){var o=r.reduce((function(e,r){var i=t.vertices[r];return e.push(i.x,i.y),e}),[]),l=(0,n.earcut)(o),u=new i.Geometry;u.vertices=r.map((function(e){return t.vertices[e]}));for(var d=a.Bounds.computeFromVertices(u.vertices.map((function(e){return new a.Vertex(e.x,e.y)}))),p=0;p<l.length;p+=3){var v=l[p],f=l[p+1],m=l[p+2];u.faces.push(new i.Face3(v,f,m)),c.UVHelpers.makeFlatTriangleUVs(u,d,v,f,m)}u.uvsNeedUpdate=!0,u.buffersNeedUpdate=!0,u.computeVertexNormals();var x=new i.Mesh(u,new i.MeshBasicMaterial({color:18687,transparent:!0,opacity:.55,side:i.DoubleSide}));return x.position.y=-100,x.userData.isExportable=!1,e.partialResults[h.KEY_PLANE_INTERSECTION_TRIANGULATION]=u,s.showSplitShapeTriangulation&&e.addMesh(x),u},normalizeVectorXY:function(e,t,r){var i=t.x-e.x,n=t.y-e.y,a=r/Math.sqrt(i*i+n*n);t.x=e.x+i*a,t.y=e.y+n*a},normalizeVectorXYZ:function(e,t,r){var i=t.x-e.x,n=t.y-e.y,a=t.z-e.z,s=r/Math.sqrt(i*i+n*n+a*a);t.x=e.x+i*s,t.y=e.y+n*s,t.z=e.z+a*s},removeAllChildNodes:function(e){for(;e.lastChild;)e.removeChild(e.lastChild)},clamp:function(e,t,r){return Math.max(Math.min(e,r),t)}}},479:(e,t)=>{var r;t.Y=void 0,t.Y=(r=new Map,{getImage:function(e,t){var i=r.get(e);return i||(i=document.createElement("img"),r.set(e,i),i.onload=function(){t(i)},i.setAttribute("src",e)),i},isImageLoaded:function(e){return e.complete&&0!==e.naturalHeight&&void 0!==e.naturalHeight}})},41:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PathFinder=void 0;var i=r(507),n=function(){function e(e){this.visitedVertices=new Set,this.unvisitedVertIndices=new Set,this.numVisitedVertices=0,this.epsilon=void 0!==e&&e>=0?e:i.EPS}return e.prototype.findAllPathsOnMesh=function(e,t){var r=[];this.visitedVertices.clear(),this.unvisitedVertIndices.clear();var i=s(e,t,this.epsilon),n=i.length;for(this.unvisitedVertIndices=new Set(i.map((function(e,t){return t})));this.numVisitedVertices<n;){var a=this.unvisitedVertIndices.values().next().value,o=this.findUnvisitedPaths(e,i,a);r.push(o)}return this.combineAdjacentPaths(r,e)},e.prototype.findUnvisitedPaths=function(e,t,r){var i,n=[r];for(this.visitedVertices.add(r),this.unvisitedVertIndices.delete(r),this.numVisitedVertices++;-1!==(i=this.findAdjacentFace(e,t,r));)n.push(i),this.visitedVertices.add(i),this.unvisitedVertIndices.delete(i),this.numVisitedVertices++,r=i;return n},e.prototype.findAdjacentFace=function(e,t,r){for(var i=e.faces.length,n=0;n<i;n++)if(a(e,n,r))for(var s=0;s<t.length;s++){var o=t[s];if(o!==r&&!this.isVisited(o)){if(!this.isVisited(o)&&a(e,n,o))return o;if(a(e,n,o))return o}}return-1},e.prototype.isVisited=function(e){return this.visitedVertices.has(e)},e.prototype.combineAdjacentPaths=function(e,t){for(var r=[],i=new Set(e.map((function(e,t){return t})));i.size>0;){var n=i.values().next().value;i.delete(n);var a=e[n],s=null;do{!(s=o(e,a[a.length-1],i,t))&&a.length>1&&(a=a.reverse(),s=o(e,a[a.length-1],i,t)),s&&(a=a.concat(s))}while(s);r.push(a)}return r},e}();t.PathFinder=n;var a=function(e,t,r){var i=e.faces[t];return i.a===r||i.b===r||i.c===r},s=function(e,t,r){for(var i=[],n=0;n<t.length;n++){for(var a=t[n],s=-1,o=r,l=0;l<e.vertices.length;l++){var c=e.vertices[l].distanceTo(a);c<=o&&(-1===s||-1!==s&&e.vertices[s].distanceTo(a)>=c&&s>l)&&(s=l,o=c)}-1===s?console.warn("PathFinder.mapVerticesToGeometryIndices could not find a matching geometry vertex for path point "+n+". The final result might be locally broken."):i.push(s)}return i},o=function(e,t,r,i){for(var n=0;n<i.faces.length;n++)if(a(i,n,t))for(var s=0;s<e.length;s++)if(r.has(s)){var o=e[s];if(a(i,n,o[0]))return r.delete(s),o;if(a(i,n,o[o.length-1]))return r.delete(s),o.reverse()}}},834:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PlaneMeshIntersection=void 0;var i=r(212),n=function(){var e=this;this.getIntersectionPoints=function(t,r,n,a){e.pointsOfIntersection=[];var s=new i.Plane;n.localToWorld(e.planePointA.copy(a.vertices[a.faces[0].a])),n.localToWorld(e.planePointB.copy(a.vertices[a.faces[0].b])),n.localToWorld(e.planePointC.copy(a.vertices[a.faces[0].c])),s.setFromCoplanarPoints(e.planePointA,e.planePointB,e.planePointC);var o=e;return r.faces.forEach((function(e){t.localToWorld(o.a.copy(r.vertices[e.a])),t.localToWorld(o.b.copy(r.vertices[e.b])),t.localToWorld(o.c.copy(r.vertices[e.c])),o.lineAB=new i.Line3(o.a,o.b),o.lineBC=new i.Line3(o.b,o.c),o.lineCA=new i.Line3(o.c,o.a),o.__setPointOfIntersection(o.lineAB,s),o.__setPointOfIntersection(o.lineBC,s),o.__setPointOfIntersection(o.lineCA,s)})),e.pointsOfIntersection},this.__setPointOfIntersection=function(e,t){var r=t.intersectLine(e,this.pointOfIntersection);r&&this.pointsOfIntersection.push(r.clone())},this.pointsOfIntersection=[],this.a=new i.Vector3,this.b=new i.Vector3,this.c=new i.Vector3,this.planePointA=new i.Vector3,this.planePointB=new i.Vector3,this.planePointC=new i.Vector3,this.lineAB=new i.Line3,this.lineBC=new i.Line3,this.lineCA=new i.Line3,this.pointOfIntersection=new i.Vector3};t.PlaneMeshIntersection=n},403:(e,t,r)=>{t.t=void 0;var i=r(787),n=function(){function e(e,t,r){t||(t=e.naturalWidth),r||(t=e.naturalHeight),this.canvas=document.createElement("canvas"),this.canvas.setAttribute("width",t+"px"),this.canvas.setAttribute("height",r+"px"),this.context=this.canvas.getContext("2d"),this.context.drawImage(e,0,0,t,r),this.imageData=this.context.getImageData(0,0,t,r).data,this.image=e,this.width=t,this.height=r}return e.prototype.getHeightAt=function(e,t){var r=Math.floor((this.width-1)*i.GeometryGenerationHelpers.clamp(e,0,1)),n=4*(Math.floor((this.height-1)*i.GeometryGenerationHelpers.clamp(t,0,1))*this.width+r),a=this.imageData[n],s=this.imageData[n+1],o=this.imageData[n+2];this.imageData[n+3];return(.21*a+.72*s+.07*o)/255},e.prototype.createPreviewImage=function(){var e=document.createElement("img");return e.setAttribute("src",this.canvas.toDataURL("image/png")),e.setAttribute("width",""+this.width),e.setAttribute("height",""+this.height),e},e.prototype.getDimension=function(){return{width:this.width,height:this.height}},e}();t.t=n},280:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UVHelpers=void 0;var i=r(212);t.UVHelpers={makeFlatTriangleUVs:function(e,t,r,n,a){var s=e.vertices[r],o=e.vertices[n],l=e.vertices[a],c=function(e){return new i.Vector2((e.x-t.min.x)/t.width,(e.y-t.min.y)/t.height)};e.faceVertexUvs[0].push([c(s),c(o),c(l)])}}},659:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clearDuplicateVertices3=void 0;t.clearDuplicateVertices3=function(e,t){void 0===t&&(t=1e-6);for(var i=[],n=0;n<e.length;n++)r(e,e[n],n+1,t)||i.push(e[n]);return i};var r=function(e,t,r,i){for(var n=r;n<e.length;n++)if(a=e[n],s=t,o=i,a.distanceTo(s)<o)return!0;var a,s,o;return!1}},224:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.computeVertexNormals=void 0;var i=r(212);t.computeVertexNormals=function(e,t){for(var r=t.getAttribute("normal"),s=Array(e.faces.length),o=0;o<e.faces.length;o++){var l=e.faces[o],c=new i.Vector3(r.array[9*o+0],r.array[9*o+1],r.array[9*o+2]),h=new i.Vector3(r.array[9*o+3],r.array[9*o+4],r.array[9*o+5]),u=new i.Vector3(r.array[9*o+6],r.array[9*o+7],r.array[9*o+8]);n(s,l.a,c),n(s,l.b,h),n(s,l.c,u)}for(var d=new Array(e.vertices.length),p=0;p<e.vertices.length;p++){var v=a(s[p]);v.add(e.vertices[p]),d[p]=new i.Line3(e.vertices[p],v)}return d};var n=function(e,t,r){(t>=e.length||void 0===e[t])&&(e[t]=[]),e[t].push(r)},a=function(e){var t=new i.Vector3(0,0,0);return e&&(e.forEach((function(e){t.add(e)})),t.divideScalar(e.length)),t}},507:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KEY_SPLIT_TRIANGULATION_GEOMETRIES=t.KEY_PLANE_INTERSECTION_TRIANGULATION=t.KEY_PLANE_INTERSECTION_POINTS=t.KEY_SPLIT_PANE_MESH=t.KEY_RIGHT_SLICE_PLANE=t.KEY_LEFT_SLICE_PLANE=t.KEY_RIGHT_SLICE_GEOMETRY=t.KEY_LEFT_SLICE_GEOMETRY=t.DEG_TO_RAD=t.EPS=void 0,t.EPS=1e-6,t.DEG_TO_RAD=Math.PI/180,t.KEY_LEFT_SLICE_GEOMETRY="KEY_LEFT_SLICE_GEOMETRY",t.KEY_RIGHT_SLICE_GEOMETRY="KEY_RIGHT_SLICE_GEOMETRY",t.KEY_LEFT_SLICE_PLANE="KEY_LEFT_SLICE_PLANE",t.KEY_RIGHT_SLICE_PLANE="KEY_RIGHT_SLICE_PLANE",t.KEY_SPLIT_PANE_MESH="KEY_SPLIT_PANE_MESH",t.KEY_PLANE_INTERSECTION_POINTS="KEY_PLANE_INTERSECTION_POINTS",t.KEY_PLANE_INTERSECTION_TRIANGULATION="KEY_PLANE_INTERSECTION_TRIANGULATION",t.KEY_SPLIT_TRIANGULATION_GEOMETRIES="KEY_SPLIT_TRIANGULATION_GEOMETRIES"},555:(e,t)=>{t.M=void 0,t.M='[ { "startPoint" : [-122,77.80736634304651], "endPoint" : [-65.59022229786551,21.46778533702511], "startControlPoint": [-121.62058129515852,25.08908859418696], "endControlPoint" : [-79.33419353770395,48.71529293460728] }, { "startPoint" : [-65.59022229786551,21.46778533702511], "endPoint" : [-65.66917273472913,-149.23537680826058], "startControlPoint": [-52.448492057756646,-4.585775770903305], "endControlPoint" : [-86.1618869001374,-62.11613821618976] }, { "startPoint" : [-65.66917273472913,-149.23537680826058], "endPoint" : [-61.86203591980055,-243.8368165606738], "startControlPoint": [-53.701578771473564,-200.1123697454778], "endControlPoint" : [-69.80704300441666,-205.36451303641783] }, { "startPoint" : [-61.86203591980055,-243.8368165606738], "endPoint" : [-21.108966092052256,-323], "startControlPoint": [-54.08681426887413,-281.486963896856], "endControlPoint" : [-53.05779349623559,-323] } ]'},333:(e,t,r)=>{const i=r(498).DildoMaterials;globalThis.DildoMaterials=i,globalThis.DEFAULT_BEZIER_JSON=r(555).M,globalThis.clearDuplicateVertices3=r(659).clearDuplicateVertices3,globalThis.UVHelpers=r(280).UVHelpers,globalThis.locateVertexInArray=r(557).locateVertexInArray,globalThis.earcut=r(175).earcut,globalThis.sliceGeometry=r(461).sliceGeometry,globalThis.BumpMapper=r(481).BumpMapper,globalThis.computeVertexNormals=r(224).computeVertexNormals;const n=r(507);globalThis.DEG_TO_RAD=n.DEG_TO_RAD,globalThis.EPS=n.EPS,globalThis.KEY_LEFT_SLICE_GEOMETRY=n.KEY_LEFT_SLICE_GEOMETRY,globalThis.KEY_LEFT_SLICE_PLANE=n.KEY_LEFT_SLICE_PLANE,globalThis.KEY_PLANE_INTERSECTION_POINTS=n.KEY_PLANE_INTERSECTION_POINTS,globalThis.KEY_PLANE_INTERSECTION_TRIANGULATION=n.KEY_PLANE_INTERSECTION_TRIANGULATION,globalThis.KEY_RIGHT_SLICE_GEOMETRY=n.KEY_RIGHT_SLICE_GEOMETRY,globalThis.KEY_RIGHT_SLICE_PLANE=n.KEY_RIGHT_SLICE_PLANE,globalThis.KEY_SPLIT_PANE_MESH=n.KEY_SPLIT_PANE_MESH,globalThis.KEY_SPLIT_TRIANGULATION_GEOMETRIES=n.KEY_SPLIT_TRIANGULATION_GEOMETRIES,globalThis.DEFAULT_BEZIER_JSON=n.DEFAULT_BEZIER_JSON,globalThis.DildoGeneration=r(615).n,globalThis.GeometryGenerationHelpers=r(787).GeometryGenerationHelpers,globalThis.ImageStore=r(479).Y,globalThis.mergeGeometries=r(752).mergeGeometries,globalThis.PathFinder=r(41).PathFinder,globalThis.PlaneMeshIntersection=r(834).PlaneMeshIntersection,globalThis.randomWebColor=r(541).randomWebColor,globalThis.RasteredBumpmap=r(403).t,globalThis.UVHelpers=r(280).UVHelpers},557:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.locateVertexInArray=void 0;t.locateVertexInArray=function(e,t,r){for(var i=Number.POSITIVE_INFINITY,n=-1,a=0;a<e.length;a++){var s=e[a].distanceTo(t);-1===n&&s<i&&s<r&&(n=a,i=s)}return n}},752:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mergeAndMapVertices=t.mergeGeometries=void 0;var i=r(212),n=r(557);t.mergeGeometries=function(e,r,n){void 0===n&&(n=1e-6);for(var a=(0,t.mergeAndMapVertices)(e,r,n),s=0;s<r.faces.length;s++){var o=r.faces[s],l=a[o.a],c=a[o.b],h=a[o.c];if(e.faces.push(new i.Face3(l,c,h)),r.faceVertexUvs.length>0&&s<r.faceVertexUvs[0].length){var u=r.faceVertexUvs[0][s];e.faceVertexUvs[0].push([u[0].clone(),u[1].clone(),u[2].clone()])}else e.faceVertexUvs[0].push([new i.Vector2(0,0),new i.Vector2(0,1),new i.Vector2(1,.5)])}};t.mergeAndMapVertices=function(e,t,r){for(var i=[],a=0;a<t.vertices.length;a++){var s=t.vertices[a],o=(0,n.locateVertexInArray)(e.vertices,s,r);-1===o?(i.push(e.vertices.length),e.vertices.push(s.clone())):i.push(o)}return i}},541:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.randomWebColor=void 0;var i=r(19),n=r(372),a=r(246);t.randomWebColor=function(e,t){if(void 0===e){var r=Math.max(void 0!==i.WebColorsMalachite?i.WebColorsMalachite.length:0,void 0!==n.WebColorsContrast?n.WebColorsContrast.length:0,void 0!==a.WebColors?a.WebColors.length:0);e=Math.round(Math.random()*r)}switch(t){case"Malachite":if(void 0!==i.WebColorsMalachite)return i.WebColorsMalachite[e%i.WebColorsMalachite.length].cssRGB();console.warn("You decided to use the 'WebColorsMalachite' color palette but it is not installed. Falling back.");case"Mixed":if(void 0!==n.WebColorsContrast)return n.WebColorsContrast[e%n.WebColorsContrast.length].cssRGB();console.warn("You decided to use the 'WebColorsContrast' color palette but it is not installed. Falling back.");default:return a.WebColors[e%a.WebColors.length].cssRGB()}}},767:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.earcut=void 0;function r(e,t,r,i,n){var a,s;if(n===M(e,t,r,i)>0)for(a=t;a<r;a+=i)s=w(a,e[a],e[a+1],s);else for(a=r-i;a>=t;a-=i)s=w(a,e[a],e[a+1],s);return s&&x(s,s.next)&&(P(s),s=s.next),s}function i(e,t){if(!e)return e;t||(t=e);var r,i=e;do{if(r=!1,i.steiner||!x(i,i.next)&&0!==m(i.prev,i,i.next))i=i.next;else{if(P(i),(i=t=i.prev)===i.next)break;r=!0}}while(r||i!==t);return t}function n(e,t,r,c,h,u,p){if(e){!p&&u&&function(e,t,r,i){var n=e;do{null===n.z&&(n.z=d(n.x,n.y,t,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,function(e){var t,r,i,n,a,s,o,l,c=1;do{for(r=e,e=null,a=null,s=0;r;){for(s++,i=r,o=0,t=0;t<c&&(o++,i=i.nextZ);t++);for(l=c;o>0||l>0&&i;)0!==o&&(0===l||!i||r.z<=i.z)?(n=r,r=r.nextZ,o--):(n=i,i=i.nextZ,l--),a?a.nextZ=n:e=n,n.prevZ=a,a=n;r=i}a.nextZ=null,c*=2}while(s>1)}(n)}(e,c,h,u);for(var v,f,m=e;e.prev!==e.next;)if(v=e.prev,f=e.next,u?s(e,c,h,u):a(e))t.push(v.i/r),t.push(e.i/r),t.push(f.i/r),P(e),e=f.next,m=f.next;else if((e=f)===m){p?1===p?n(e=o(i(e),t,r),t,r,c,h,u,2):2===p&&l(e,t,r,c,h,u):n(i(e),t,r,c,h,u,1);break}}}function a(e){var t=e.prev,r=e,i=e.next;if(m(t,r,i)>=0)return!1;for(var n=e.next.next;n!==e.prev;){if(v(t.x,t.y,r.x,r.y,i.x,i.y,n.x,n.y)&&m(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function s(e,t,r,i){var n=e.prev,a=e,s=e.next;if(m(n,a,s)>=0)return!1;for(var o=n.x<a.x?n.x<s.x?n.x:s.x:a.x<s.x?a.x:s.x,l=n.y<a.y?n.y<s.y?n.y:s.y:a.y<s.y?a.y:s.y,c=n.x>a.x?n.x>s.x?n.x:s.x:a.x>s.x?a.x:s.x,h=n.y>a.y?n.y>s.y?n.y:s.y:a.y>s.y?a.y:s.y,u=d(o,l,t,r,i),p=d(c,h,t,r,i),f=e.prevZ,x=e.nextZ;f&&f.z>=u&&x&&x.z<=p;){if(f!==e.prev&&f!==e.next&&v(n.x,n.y,a.x,a.y,s.x,s.y,f.x,f.y)&&m(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,x!==e.prev&&x!==e.next&&v(n.x,n.y,a.x,a.y,s.x,s.y,x.x,x.y)&&m(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;f&&f.z>=u;){if(f!==e.prev&&f!==e.next&&v(n.x,n.y,a.x,a.y,s.x,s.y,f.x,f.y)&&m(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;x&&x.z<=p;){if(x!==e.prev&&x!==e.next&&v(n.x,n.y,a.x,a.y,s.x,s.y,x.x,x.y)&&m(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function o(e,t,r){var n=e;do{var a=n.prev,s=n.next.next;!x(a,s)&&y(a,n,n.next,s)&&E(a,s)&&E(s,a)&&(t.push(a.i/r),t.push(n.i/r),t.push(s.i/r),P(n),P(n.next),n=e=s),n=n.next}while(n!==e);return i(n)}function l(e,t,r,a,s,o){var l=e;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&f(l,c)){var h=I(l,c);return l=i(l,l.next),h=i(h,h.next),n(l,t,r,a,s,o),void n(h,t,r,a,s,o)}c=c.next}l=l.next}while(l!==e)}function c(e,t){return e.x-t.x}function h(e,t){var r=function(e,t){var r,i=t,n=e.x,a=e.y,s=-1/0;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){var o=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(o<=n&&o>s){if(s=o,o===n){if(a===i.y)return i;if(a===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!r)return null;if(n===s)return r;var l,c=r,h=r.x,d=r.y,p=1/0;i=r;do{n>=i.x&&i.x>=h&&n!==i.x&&v(a<d?n:s,a,h,d,a<d?s:n,a,i.x,i.y)&&(l=Math.abs(a-i.y)/(n-i.x),E(i,e)&&(l<p||l===p&&(i.x>r.x||i.x===r.x&&u(r,i)))&&(r=i,p=l)),i=i.next}while(i!==c);return r}(e,t);if(!r)return t;var n=I(r,e),a=i(r,r.next);return i(n,n.next),t===r?a:t}function u(e,t){return m(e.prev,e,t.prev)<0&&m(t.next,e,e.next)<0}function d(e,t,r,i,n){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function p(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function v(e,t,r,i,n,a,s,o){return(n-s)*(t-o)-(e-s)*(a-o)>=0&&(e-s)*(i-o)-(r-s)*(t-o)>=0&&(r-s)*(a-o)-(n-s)*(i-o)>=0}function f(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&y(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&(E(e,t)&&E(t,e)&&function(e,t){var r=e,i=!1,n=(e.x+t.x)/2,a=(e.y+t.y)/2;do{r.y>a!=r.next.y>a&&r.next.y!==r.y&&n<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next}while(r!==e);return i}(e,t)&&(m(e.prev,e,t.prev)||m(e,t.prev,t))||x(e,t)&&m(e.prev,e,e.next)>0&&m(t.prev,t,t.next)>0)}function m(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function x(e,t){return e.x===t.x&&e.y===t.y}function y(e,t,r,i){var n=_(m(e,t,r)),a=_(m(e,t,i)),s=_(m(r,i,e)),o=_(m(r,i,t));return n!==a&&s!==o||(!(0!==n||!g(e,r,t))||(!(0!==a||!g(e,i,t))||(!(0!==s||!g(r,e,i))||!(0!==o||!g(r,t,i)))))}function g(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function _(e){return e>0?1:e<0?-1:0}function E(e,t){return m(e.prev,e,e.next)<0?m(e,t,e.next)>=0&&m(e,e.prev,t)>=0:m(e,t,e.prev)<0||m(e,e.next,t)<0}function I(e,t){var r=new b(e.i,e.x,e.y),i=new b(t.i,t.x,t.y),n=e.next,a=t.prev;return e.next=t,t.prev=e,r.next=n,n.prev=r,i.next=r,r.prev=i,a.next=i,i.prev=a,i}function w(e,t,r,i){var n=new b(e,t,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function P(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function b(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function M(e,t,r,i){for(var n=0,a=t,s=r-i;a<r;a+=i)n+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return n}t.earcut=function(e,t,a){a=a||2;var s,o,l,u,d,v,f,m=t&&t.length,x=m?t[0]*a:e.length,y=r(e,0,x,a,!0),g=[];if(!y||y.next===y.prev)return g;if(m&&(y=function(e,t,n,a){var s,o,l,u=[];for(s=0,o=t.length;s<o;s++)(l=r(e,t[s]*a,s<o-1?t[s+1]*a:e.length,a,!1))===l.next&&(l.steiner=!0),u.push(p(l));for(u.sort(c),s=0;s<u.length;s++)n=i(n=h(u[s],n),n.next);return n}(e,t,y,a)),e.length>80*a){s=l=e[0],o=u=e[1];for(var _=a;_<x;_+=a)(d=e[_])<s&&(s=d),(v=e[_+1])<o&&(o=v),d>l&&(l=d),v>u&&(u=v);f=0!==(f=Math.max(l-s,u-o))?1/f:0}return n(y,g,a,s,o,f),g},t.earcut.deviation=function(e,t,r,i){var n=t&&t.length,a=n?t[0]*r:e.length,s=Math.abs(M(e,0,a,r));if(n)for(var o=0,l=t.length;o<l;o++){var c=t[o]*r,h=o<l-1?t[o+1]*r:e.length;s-=Math.abs(M(e,c,h,r))}var u=0;for(o=0;o<i.length;o+=3){var d=i[o]*r,p=i[o+1]*r,v=i[o+2]*r;u+=Math.abs((e[d]-e[v])*(e[p+1]-e[d+1])-(e[d]-e[p])*(e[v+1]-e[d+1]))}return 0===s&&0===u?0:Math.abs((u-s)/s)},t.earcut.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},i=0,n=0;n<e.length;n++){for(var a=0;a<e[n].length;a++)for(var s=0;s<t;s++)r.vertices.push(e[n][a][s]);n>0&&(i+=e[n-1].length,r.holes.push(i))}return r}},175:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.earcut=void 0;var i=r(767);Object.defineProperty(t,"earcut",{enumerable:!0,get:function(){return i.earcut}})},744:(e,t)=>{function r(e){return e.forEach((function(t,r){e.forEach((function(r,s){var o=function(e,t){if(e===t)return!1;if(i(e)===n(t))return e.unshift.apply(e,t),!0;if(i(e)===i(t))return a(t),e.unshift.apply(e,t),!0;if(n(e)===i(t))return e.push.apply(e,t),!0;if(n(e)===n(t))return a(t),e.push.apply(e,t),!0;return!1}(t,r);if(o)return delete e[s],!0}))})),!1}function i(e){return e[0][0]}function n(e){return e[e.length-1][1]}function a(e){e.reverse(),e.forEach((function(e){e.reverse()}))}function s(e){return i(e)===n(e)?1:0}Object.defineProperty(t,"__esModule",{value:!0}),t.facesFromEdges=void 0,t.facesFromEdges=function(e){var t=function(e){var t=!0,i=e.map((function(e){return[e]}));for(;t;)t=r(i);return i=i.filter((function(e){return e.length}))}(e).filter(s);return t.map((function(e){return e.map((function(e){return e[0]}))}))}},461:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sliceGeometry=void 0;var i=r(591);Object.defineProperty(t,"sliceGeometry",{enumerable:!0,get:function(){return i.sliceGeometry}})},591:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sliceGeometry=void 0;var i=r(744),n=r(212),a="front",s="back",o=["a","b","c"];t.sliceGeometry=function(e,t,r){var i=new n.Geometry,u=new h(e,i,t),d=[],p=[];return e.vertices.forEach((function(e){var r=c(e,t),i=l(r);d.push(r),p.push(i)})),e.faces.forEach((function(e,t){var r=o.map((function(t){return p[e[t]]}));if(-1!==r.indexOf(a)||-1===r.indexOf(s)){u.startFace(t);var i=o[o.length-1],n=e[i],l=d[n],c=p[n];o.map((function(t){var r=e[t],o=d[r],h=p[r];h===a&&(c===s?(u.addIntersection(i,t,l,o),u.addVertex(t)):u.addVertex(t)),"on"===h&&u.addVertex(t),h===s&&c===a&&u.addIntersection(i,t,l,o),i=t,n=r,c=h,l=o})),u.endFace()}})),r&&u.closeHoles(),i};var l=function(e){return e<0?s:e>0?a:"on"},c=function(e,t){return t.distanceToPoint(e)},h=function(e,t,r){this.sourceGeometry=e,this.targetGeometry=t,this.slicePlane=r,this.addedVertices=[],this.addedIntersections=[],this.newEdges=[[]]};h.prototype.startFace=function(e){this.sourceFaceIndex=e,this.sourceFace=this.sourceGeometry.faces[e],this.sourceFaceUvs=this.sourceGeometry.faceVertexUvs[0][e],this.faceIndices=[],this.faceNormals=[],this.faceUvs=[]},h.prototype.endFace=function(){var e=this.faceIndices.map((function(e,t){return t}));this.addFace(e)},h.prototype.closeHoles=function(){this.newEdges[0].length&&(0,i.facesFromEdges)(this.newEdges).forEach((function(e){this.faceNormal(e).dot(this.slicePlane.normal)>.5&&e.reverse(),this.startFace(),this.faceIndices=e,this.endFace()}),this)},h.prototype.addVertex=function(e){this.addUv(e),this.addNormal(e);var t,r=this.sourceFace[e];if(this.addedVertices.hasOwnProperty(r))t=this.addedVertices[r];else{var i=this.sourceGeometry.vertices[r];this.targetGeometry.vertices.push(i),t=this.targetGeometry.vertices.length-1,this.addedVertices[r]=t}this.faceIndices.push(t)},h.prototype.addIntersection=function(e,t,r,i){var n=Math.abs(r)/(Math.abs(r)+Math.abs(i));this.addIntersectionUv(e,t,n),this.addIntersectionNormal(e,t,n);var a,s=this.sourceFace[e],o=this.sourceFace[t],l=this.intersectionId(s,o);if(this.addedIntersections.hasOwnProperty(l))a=this.addedIntersections[l];else{var c=this.sourceGeometry.vertices[s],h=this.sourceGeometry.vertices[o],u=c.clone().lerp(h,n);this.targetGeometry.vertices.push(u),a=this.targetGeometry.vertices.length-1,this.addedIntersections[l]=a}this.faceIndices.push(a),this.updateNewEdges(a)},h.prototype.addUv=function(e){if(this.sourceFaceUvs){var t=this.keyIndex(e),r=this.sourceFaceUvs[t];this.faceUvs.push(r)}},h.prototype.addIntersectionUv=function(e,t,r){if(this.sourceFaceUvs){var i=this.keyIndex(e),n=this.keyIndex(t),a=this.sourceFaceUvs[i],s=this.sourceFaceUvs[n],o=a.clone().lerp(s,r);this.faceUvs.push(o)}},h.prototype.addNormal=function(e){if(this.sourceFace.vertexNormals.length){var t=this.keyIndex(e),r=this.sourceFace.vertexNormals[t];this.faceNormals.push(r)}},h.prototype.addIntersectionNormal=function(e,t,r){if(this.sourceFace.vertexNormals.length){var i=this.keyIndex(e),n=this.keyIndex(t),a=this.sourceFace.vertexNormals[i],s=this.sourceFace.vertexNormals[n],o=a.clone().lerp(s,r).normalize();this.faceNormals.push(o)}},h.prototype.addFace=function(e){if(3!==e.length){for(var t=[],r=0;r<e.length;r++)for(var i=r+1;i<e.length;i++){var n=Math.abs(r-i);n>1&&n<e.length-1&&t.push([e[r],e[i]])}t.sort(function(e,t){return this.faceEdgeLength(e[0],e[1])-this.faceEdgeLength(t[0],t[1])}.bind(this));var a=e.indexOf(t[0][0]),s=(e=e.slice(a).concat(e.slice(0,a))).indexOf(t[0][1]),o=e.slice(0,s+1),l=e.slice(s).concat(e.slice(0,1));this.addFace(o),this.addFace(l)}else this.addFacePart(e[0],e[1],e[2])},h.prototype.addFacePart=function(e,t,r){var i=null;this.faceNormals.length&&(i=[this.faceNormals[e],this.faceNormals[t],this.faceNormals[r]]);var a=new n.Face3(this.faceIndices[e],this.faceIndices[t],this.faceIndices[r],i);this.targetGeometry.faces.push(a),this.sourceFaceUvs&&this.targetGeometry.faceVertexUvs[0].push([this.faceUvs[e],this.faceUvs[t],this.faceUvs[r]])},h.prototype.faceEdgeLength=function(e,t){var r=this.faceIndices[e],i=this.faceIndices[t],n=this.targetGeometry.vertices[r],a=this.targetGeometry.vertices[i];return n.distanceToSquared(a)},h.prototype.intersectionId=function(e,t){return[e,t].sort().join(",")},h.prototype.keyIndex=function(e){return o.indexOf(e)},h.prototype.updateNewEdges=function(e){var t=this.newEdges.length-1,r=this.newEdges[t];r.length<2?r.push(e):this.newEdges.push([e])},h.prototype.faceNormal=function(e){var t=e.map(function(e){return this.targetGeometry.vertices[e]}.bind(this)),r=t[0].clone().sub(t[1]),i=t[0].clone().sub(t[2]);return r.cross(i).normalize()}}},r={};function i(e){var n=r[e];if(void 0!==n)return n.exports;var a=r[e]={exports:{}};return t[e].call(a.exports,a,a.exports,i),a.exports}i.m=t,e=[],i.O=(t,r,n,a)=>{if(!r){var s=1/0;for(h=0;h<e.length;h++){for(var[r,n,a]=e[h],o=!0,l=0;l<r.length;l++)(!1&a||s>=a)&&Object.keys(i.O).every((e=>i.O[e](r[l])))?r.splice(l--,1):(o=!1,a<s&&(s=a));if(o){e.splice(h--,1);var c=n();void 0!==c&&(t=c)}}return t}a=a||0;for(var h=e.length;h>0&&e[h-1][2]>a;h--)e[h]=e[h-1];e[h]=[r,n,a]},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={179:0};i.O.j=t=>0===e[t];var t=(t,r)=>{var n,a,[s,o,l]=r,c=0;if(s.some((t=>0!==e[t]))){for(n in o)i.o(o,n)&&(i.m[n]=o[n]);if(l)var h=l(i)}for(t&&t(r);c<s.length;c++)a=s[c],i.o(e,a)&&e[a]&&e[a][0](),e[s[c]]=0;return i.O(h)},r=self.webpackChunkngdg=self.webpackChunkngdg||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var n=i.O(void 0,[736],(()=>i(333)));n=i.O(n)})();
//# sourceMappingURL=ngdg-main.min.js.map
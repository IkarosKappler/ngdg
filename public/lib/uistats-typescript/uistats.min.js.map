{"version":3,"sources":["webpack://uistats-typescript/./src/js/UIStats.js","webpack://uistats-typescript/webpack/bootstrap","webpack://uistats-typescript/./src/js/entry.js"],"names":["FN_IDENTITY","value","UIStats","observee","this","keyProps","keyCount","root","document","createElement","body","appendChild","_self","toggled","header","addEventListener","__toggleVisibility","__applyBaseLayout","proxyHandler","set","obj","propName","kProps","refinedValue","childElem","evaluateFn","__applyKeyValue","proxy","Proxy","prototype","keyName","node","getElementById","id","innerHTML","setAttribute","__updateChildElem","newElem","add","Math","floor","random","label","content","style","display","width","color","__applyTextLayout","UIStatsChild","left","transform","textNode","paddingLeft","overflow","whiteSpace","textOverflow","position","top","background","fontFamily","fontSize","transition","justifyContent","alignItems","height","borderRadius","cursor","class_1","uiStats","precision","__installAsNewParent","Number","toFixed","suffix","suffixText","join","prefix","prefixText","newChildElem","exports","__webpack_module_cache__","globalThis","__webpack_require__","moduleId","module","__webpack_modules__"],"mappings":"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","file":"uistats.min.js","sourcesContent":["\"use strict\";\n/**\n * This is a tiny UI module for displaying simple stats data.\n *\n * Not working with IEx. Use a 'Proxy' polyfill maybe?\n *\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy\n *\n * @author Ikaros Kappler\n * @date   2020-12-20\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n;\n/**\n * The default `Evaluator` function: identity (display values raw as they are).\n */\nvar FN_IDENTITY = function (value) { return value; };\n/**\n * The main class.\n *\n * Once instantiated it will append a new HTMLDivElement node to the DOM.\n */\nvar UIStats = /** @class */ (function () {\n    // @name LiveStats\n    // @constructor\n    // @param {object} observee\n    // @param {Object} keyToObserve (string->Object with props)\n    function UIStats(observee) {\n        // @member {object} Keeps the props for currently observed keys.\n        this.keyProps = {};\n        // @member {object}\n        this.keyProps = {};\n        // @member {number}\n        this.keyCount = 0;\n        // @member {object}\n        this.observee = observee;\n        this.root = document.createElement('div');\n        document.body.appendChild(this.root);\n        var _self = this;\n        this.toggled = false;\n        // Add header node\n        this.header = document.createElement('div');\n        this.header.addEventListener('click', function () { _self.__toggleVisibility(); });\n        this.root.appendChild(this.header);\n        this.__applyBaseLayout();\n        var proxyHandler = {\n            // get: function(target, prop, receiver) {\n            //    if( prop === 'message' )\n            //       return ...;\n            // }, \n            set: function (obj, propName, value) {\n                var kProps = _self.keyProps[propName];\n                if (typeof kProps !== \"undefined\") {\n                    var refinedValue = kProps.childElem.evaluateFn(value);\n                    _self.__applyKeyValue(propName, kProps, refinedValue);\n                }\n                return true; // Indicates change was successful\n            }\n        };\n        this.proxy = new Proxy(observee, proxyHandler);\n    }\n    ;\n    // @private\n    UIStats.prototype.__applyKeyValue = function (keyName, kProps, value) {\n        var node = document.getElementById(kProps.id);\n        node.innerHTML = value;\n        node.setAttribute('title', value);\n    };\n    ;\n    // @param {string} keyName\n    // @param {LiveStatsElem} newElem\n    UIStats.prototype.__updateChildElem = function (keyName, newElem) {\n        var kProps = this.keyProps[keyName];\n        if (typeof kProps !== \"undefined\") {\n            kProps.childElem = newElem;\n        }\n    };\n    ;\n    UIStats.prototype.add = function (keyName) {\n        var id = keyName + \"_\" + Math.floor(Math.random() * 65636);\n        // └-Root\n        //   └-Node\n        //     ├-Label\n        //     └-Content (with unique ID)\n        var node = document.createElement('div');\n        var label = document.createElement('div');\n        var content = document.createElement('div');\n        node.style.display = 'flex';\n        label.style.width = '50%';\n        label.style.color = '#0070ff';\n        this.__applyTextLayout(label);\n        label.innerHTML = keyName;\n        label.setAttribute('title', keyName);\n        content.style.width = '50%';\n        content.style.color = '#cccecb';\n        content.setAttribute('id', id);\n        this.__applyTextLayout(content);\n        node.appendChild(label);\n        node.appendChild(content);\n        this.root.appendChild(node);\n        // Gives the user the opportunity to tweak the output.\n        // Identity function is the default behavior.\n        var childElem = new UIStats.UIStatsChild(this, keyName, FN_IDENTITY);\n        this.keyProps[keyName] = { id: id, childElem: childElem };\n        this.keyCount++;\n        // Initially display the current value\n        this.__applyKeyValue(keyName, this.keyProps[keyName], this.observee[keyName]);\n        return childElem;\n    };\n    ;\n    // Toggles the main component on/off.\n    // @private\n    UIStats.prototype.__toggleVisibility = function () {\n        this.toggled = !this.toggled;\n        if (this.toggled) {\n            this.root.style.left = '-200px';\n            this.header.style.transform = 'rotate(180deg)';\n        }\n        else {\n            this.root.style.left = '0px';\n            this.header.style.transform = 'rotate(0deg)';\n        }\n    };\n    ;\n    // Avoid text from overflowing or breaking the bounds.\n    // @private\n    UIStats.prototype.__applyTextLayout = function (textNode) {\n        textNode.style.paddingLeft = '3px';\n        textNode.style.overflow = 'hidden';\n        textNode.style.whiteSpace = 'nowrap';\n        textNode.style.textOverflow = 'ellipsis';\n    };\n    ;\n    // @private\n    UIStats.prototype.__applyBaseLayout = function () {\n        this.root.style.position = 'absolute';\n        this.root.style.left = '0';\n        this.root.style.top = '0';\n        this.root.style.width = '200px';\n        this.root.style.background = '#1a1a1a'; // Like in dat.gui\n        this.root.style.fontFamily = 'Calibri, Arial, Helvetica';\n        this.root.style.fontSize = '12px';\n        this.root.style.transition = 'left 1s';\n        this.header.style.position = 'absolute';\n        this.header.style.display = 'flex';\n        this.header.style.justifyContent = 'center';\n        this.header.style.alignItems = 'center';\n        this.header.style.top = '0';\n        this.header.style.left = '100%';\n        this.header.style.width = '12px';\n        this.header.style.height = '12px';\n        this.header.style.borderRadius = '6px';\n        this.header.style.background = 'rgba(255,255,255,0.5)';\n        this.header.style.color = 'black';\n        this.header.style.fontSize = '6px';\n        this.header.style.cursor = 'pointer';\n        this.header.innerHTML = '&#9664;';\n    };\n    ;\n    // @param {UIStats} liveStats\n    // @param {string} keyName\n    // @param {function} evaluateFn - A function with one param: value => newValue\n    UIStats.UIStatsChild = /** @class */ (function () {\n        // Creates a new child.\n        function class_1(uiStats, keyName, evaluateFn) {\n            this.precision = function (precision) {\n                var _self = this;\n                return this.__installAsNewParent(function (value) {\n                    return Number(_self.evaluateFn(value)).toFixed(precision);\n                });\n            };\n            this.suffix = function (suffixText) {\n                var _self = this;\n                return this.__installAsNewParent(function (value) {\n                    return [_self.evaluateFn(value), suffixText].join('');\n                });\n            };\n            this.prefix = function (prefixText) {\n                var _self = this;\n                return this.__installAsNewParent(function (value) {\n                    return [prefixText, _self.evaluateFn(value)].join('');\n                });\n            };\n            this.uiStats = uiStats;\n            this.keyName = keyName;\n            this.evaluateFn = evaluateFn;\n        }\n        ;\n        class_1.prototype.__installAsNewParent = function (evaluateFn) {\n            var newChildElem = new UIStats.UIStatsChild(this.uiStats, this.keyName, evaluateFn);\n            this.uiStats.__updateChildElem(this.keyName, newChildElem);\n            return newChildElem;\n        };\n        ;\n        return class_1;\n    }()); // END nested class\n    return UIStats;\n}());\n;\nexports.default = UIStats;\n//# sourceMappingURL=UIStats.js.map","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","\"use strict\";\n/* Imports and exports for webpack */\n\n// Expose the component to the global scope\nglobalThis.UIStats = require(\"./UIStats.js\").default;\n"],"sourceRoot":""}